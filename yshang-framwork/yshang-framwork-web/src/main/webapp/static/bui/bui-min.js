(function(a,r){if(a.seajs){return}var ab=a.seajs={version:"2.2.1"};var aa=ab.data={};function M(af){return function(ag){return{}.toString.call(ag)=="[object "+af+"]"}}var R=M("Object");var o=M("String");var E=Array.isArray||M("Array");var u=M("Function");var m=0;function n(){return m++}var F=aa.events={};ab.on=function(af,ah){var ag=F[af]||(F[af]=[]);ag.push(ah);return ab};ab.off=function(af,ai){if(!(af||ai)){F=aa.events={};return ab}var ah=F[af];if(ah){if(ai){for(var ag=ah.length-1;ag>=0;ag--){if(ah[ag]===ai){ah.splice(ag,1)}}}else{delete F[af]}}return ab};var w=ab.emit=function(af,ai){var ah=F[af],ag;if(ah){ah=ah.slice();while((ag=ah.shift())){ag(ai)}}return ab};var i=/[^?#]*\//;var C=/\/\.\//g;var H=/\/[^/]+\/\.\.\//;var Z=/([^:/])\/\//g;function G(af){return af.match(i)[0]}function D(af){af=af.replace(C,"/");while(af.match(H)){af=af.replace(H,"/")}af=af.replace(Z,"$1/");return af}function W(ah){var ag=ah.length-1;var af=ah.charAt(ag);if(af==="#"){return ah.substring(0,ag)}return(ah.substring(ag-2)===".js"||ah.indexOf("?")>0||ah.substring(ag-3)===".css"||af==="/")?ah:ah+".js"}var O=/^([^/:]+)(\/.+)$/;var Y=/{([^{]+)}/g;function B(ag){var af=aa.alias;return af&&o(af[ag])?af[ag]:ag}function q(ah){var ag=aa.paths;var af;if(ag&&(af=ah.match(O))&&o(ag[af[1]])){ah=ag[af[1]]+af[2]}return ah}function ac(ag){var af=aa.vars;if(af&&ag.indexOf("{")>-1){ag=ag.replace(Y,function(ah,ai){return o(af[ai])?af[ai]:ah})}return ag}function e(ai){var ak=aa.map;var ag=ai;if(ak){for(var ah=0,af=ak.length;ah<af;ah++){var aj=ak[ah];ag=u(aj)?(aj(ai)||ai):ai.replace(aj[0],aj[1]);if(ag!==ai){break}}}return ag}var I=/^\/\/.|:\//;var ad=/^.*?\/\/.*?\//;function S(aj,ah){var ag;var ai=aj.charAt(0);if(I.test(aj)){ag=aj}else{if(ai==="."){ag=D((ah?G(ah):aa.cwd)+aj)}else{if(ai==="/"){var af=aa.cwd.match(ad);ag=af?af[0]+aj.substring(1):aj}else{ag=aa.base+aj}}}if(ag.indexOf("//")===0){ag=location.protocol+ag}return ag}function k(ah,af){if(!ah){return""}ah=B(ah);ah=q(ah);ah=ac(ah);ah=W(ah);var ag=S(ah,af);ag=e(ag);return ag}var h=document;var P=G(h.URL);var p=h.scripts;var l=h.getElementById("seajsnode")||p[p.length-1];var x=G(A(l)||P);function A(af){return af.hasAttribute?af.src:af.getAttribute("src",4)}ab.resolve=k;var t=h.head||h.getElementsByTagName("head")[0]||h.documentElement;var c=t.getElementsByTagName("base")[0];var s=/\.css(?:\?|$)/i;var Q;var y;var z=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;function d(ag,ak,aj){var af=s.test(ag);var ai=h.createElement(af?"link":"script");if(aj){var ah=u(aj)?aj(ag):aj;if(ah){ai.charset=ah}}T(ai,ak,af,ag);if(af){ai.rel="stylesheet";ai.href=ag}else{ai.async=true;ai.src=ag}Q=ai;c?t.insertBefore(ai,c):t.appendChild(ai);Q=null}function T(ah,ak,af,ag){var aj="onload" in ah;if(af&&(z||!aj)){setTimeout(function(){V(ah,ak)},1);return}if(aj){ah.onload=ai;ah.onerror=function(){w("error",{uri:ag,node:ah});ai()}}else{ah.onreadystatechange=function(){if(/loaded|complete/.test(ah.readyState)){ai()}}}function ai(){ah.onload=ah.onerror=ah.onreadystatechange=null;if(!af&&!aa.debug){t.removeChild(ah)}ah=null;ak()}}function V(ai,aj){var ah=ai.sheet;var af;if(z){if(ah){af=true}}else{if(ah){try{if(ah.cssRules){af=true}}catch(ag){if(ag.name==="NS_ERROR_DOM_SECURITY_ERR"){af=true}}}}setTimeout(function(){if(af){aj()}else{V(ai,aj)}},20)}function v(){if(Q){return Q}if(y&&y.readyState==="interactive"){return y}var af=t.getElementsByTagName("script");for(var ah=af.length-1;ah>=0;ah--){var ag=af[ah];if(ag.readyState==="interactive"){y=ag;return y}}}ab.request=d;var b=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g;var L=/\\\\/g;function f(ag){var af=[];ag.replace(L,"").replace(b,function(ah,aj,ai){if(ai){af.push(ai)}});return af}var K=ab.cache={};var X;var N={};var ae={};var g={};var j=J.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};function J(af,ag){this.uri=af;this.dependencies=ag||[];this.exports=null;this.status=0;this._waitings={};this._remain=0}J.prototype.resolve=function(){var ai=this;var aj=ai.dependencies;var ag=[];for(var ah=0,af=aj.length;ah<af;ah++){ag[ah]=J.resolve(aj[ah],ai.uri)}return ag};J.prototype.load=function(){var aj=this;if(aj.status>=j.LOADING){return}aj.status=j.LOADING;var ah=aj.resolve();w("load",ah);var ag=aj._remain=ah.length;var af;for(var ai=0;ai<ag;ai++){af=J.get(ah[ai]);if(af.status<j.LOADED){af._waitings[aj.uri]=(af._waitings[aj.uri]||0)+1}else{aj._remain--}}if(aj._remain===0){aj.onload();return}var al={};for(ai=0;ai<ag;ai++){af=K[ah[ai]];if(af.status<j.FETCHING){af.fetch(al)}else{if(af.status===j.SAVED){af.load()}}}for(var ak in al){if(al.hasOwnProperty(ak)){al[ak]()}}};J.prototype.onload=function(){var ah=this;ah.status=j.LOADED;if(ah.callback){ah.callback()}var ag=ah._waitings;var ai,af;for(ai in ag){if(ag.hasOwnProperty(ai)){af=K[ai];af._remain-=ag[ai];if(af._remain===0){af.onload()}}}delete ah._waitings;delete ah._remain};J.prototype.fetch=function(al){var ag=this;var ah=ag.uri;ag.status=j.FETCHING;var ak={uri:ah};w("fetch",ak);var aj=ak.requestUri||ah;if(!aj||ae[aj]){ag.load();return}if(N[aj]){g[aj].push(ag);return}N[aj]=true;g[aj]=[ag];w("request",ak={uri:ah,requestUri:aj,onRequest:ai,charset:aa.charset});if(!ak.requested){al?al[ak.requestUri]=af:af()}function af(){ab.request(ak.requestUri,ak.onRequest,ak.charset)}function ai(){delete N[aj];ae[aj]=true;if(X){J.save(ah,X);X=null}var am,an=g[aj];delete g[aj];while((am=an.shift())){am.load()}}};J.prototype.exec=function(){var ai=this;if(ai.status>=j.EXECUTING){return ai.exports}ai.status=j.EXECUTING;var aj=ai.uri;function ah(ak){return J.get(ah.resolve(ak)).exec()}ah.resolve=function(ak){return J.resolve(ak,aj)};ah.async=function(ak,al){J.use(ak,al,aj+"_async_"+n());return ah};var ag=ai.factory;var af=u(ag)?ag(ah,ai.exports={},ai):ag;if(af===r){af=ai.exports}delete ai.factory;ai.exports=af;ai.status=j.EXECUTED;w("exec",ai);return af};J.resolve=function(ah,af){var ag={id:ah,refUri:af};w("resolve",ag);return ag.uri||ab.resolve(ag.id,af)};J.define=function(ak,aj,ah){var ag=arguments.length;if(ag===1){ah=ak;ak=r}else{if(ag===2){ah=aj;if(E(ak)){aj=ak;ak=r}else{aj=r}}}if(!E(aj)&&u(ah)){aj=f(ah.toString())}var ai={id:ak,uri:J.resolve(ak),deps:aj,factory:ah};if(!ai.uri&&h.attachEvent){var af=v();if(af){ai.uri=af.src}}w("define",ai);ai.uri?J.save(ai.uri,ai):X=ai};J.save=function(ag,ah){var af=J.get(ag);if(af.status<j.SAVED){af.id=ah.id||ag;af.dependencies=ah.deps||[];af.factory=ah.factory;af.status=j.SAVED}};J.get=function(af,ag){return K[af]||(K[af]=new J(af,ag))};J.use=function(ag,ai,ah){var af=J.get(ah,E(ag)?ag:[ag]);af.callback=function(){var al=[];var ak=af.resolve();for(var am=0,aj=ak.length;am<aj;am++){al[am]=K[ak[am]].exec()}if(ai){ai.apply(a,al)}delete af.callback};af.load()};J.preload=function(ah){var ag=aa.preload;var af=ag.length;if(af){J.use(ag,function(){ag.splice(0,af);J.preload(ah)},aa.cwd+"_preload_"+n())}else{ah()}};ab.use=function(af,ag){J.preload(function(){J.use(af,ag,aa.cwd+"_use_"+n())});return ab};J.define.cmd={};a.define=J.define;ab.Module=J;aa.fetchedList=ae;aa.cid=n;ab.require=function(ag){var af=J.get(J.resolve(ag));if(af.status<j.EXECUTING){af.onload();af.exec()}return af.exports};var U=/^(.+?\/)(\?\?)?(seajs\/)+/;aa.base=(x.match(U)||["",x])[1];aa.dir=x;aa.cwd=P;aa.charset="utf-8";aa.preload=(function(){var af=[];var ag=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");ag+=" "+h.cookie;ag.replace(/(seajs-\w+)=1/g,function(ah,ai){af.push(ai)});return af})();ab.config=function(af){for(var ah in af){var aj=af[ah];var ai=aa[ah];if(ai&&R(ai)){for(var ag in aj){ai[ag]=aj[ag]}}else{if(E(ai)){aj=ai.concat(aj)}else{if(ah==="base"){if(aj.slice(-1)!=="/"){aj+="/"}aj=S(aj)}}aa[ah]=aj}}w("config",af);return ab}})(this);(function(){var a;a=function(){function e(i){return i.hasAttribute?i.src:i.getAttribute("src",4)}var f=window.BUI=window.BUI||{};f.use=seajs.use;f.config=seajs.config;var b=document.getElementsByTagName("script"),h=b[b.length-1],g=e(h),d=g.substring(0,g.lastIndexOf("/")),c=h.getAttribute("debug")==="true"?true:false;f.loaderScript=h;seajs.config({paths:{"bui":d}});f.setDebug=function(j){f.debug=j;var l=new RegExp("^("+d+"\\S*).js$");if(!j){seajs.config({map:[[l,"$1-min.js"]]})}else{var n=seajs.data.map;var m;if(!n){return}for(var k=n.length-1;k>=0;k--){m=n[k][0];if(Object.prototype.toString.call(m)==="[object RegExp]"&&m.toString()===l.toString()){n.splice(k,1)}}}};f.setDebug(c);if(window.jQuery){window.define("jquery",[],function(){return window.jQuery})}}()}());define("bui/common",["jquery"],function(b,a,c){var d=b("bui/common/util");d.mix(d,{UA:b("bui/common/ua"),JSON:b("bui/common/json"),Date:b("bui/common/date"),Array:b("bui/common/array"),KeyCode:b("bui/common/keycode"),Observable:b("bui/common/observable"),Base:b("bui/common/base"),Component:b("bui/common/component/component")});c.exports=d});define("bui/common/util",["jquery"],function(i,r,b){var f=i("jquery");(function(t){if(t.fn){t.fn.on=t.fn.on||t.fn.bind;t.fn.off=t.fn.off||t.fn.unbind}})(f);function p(v,u){for(var t in u){if(u.hasOwnProperty(t)){v[t]=v[t]||{};h(v[t],u[t])}}}function h(t,u){for(var v in u){if(u.hasOwnProperty(v)){if(v=="value"){if(BUI.isObject(u[v])){t[v]=t[v]||{};BUI.mix(t[v],u[v])}else{if(BUI.isArray(u[v])){t[v]=t[v]||[];t[v]=t[v].concat(u[v])}else{t[v]=u[v]}}}else{t[v]=u[v]}}}}var c=window,s=document,a=Object.prototype,n=a.toString,o="body",l="documentElement",k="scroll",j=k+"Width",e=k+"Height",d="ATTRS",m="PARSER",g="guid";window.BUI=window.BUI||{};f.extend(BUI,{version:"1.1.0",isFunction:function(t){return typeof(t)==="function"},isArray:("isArray" in Array)?Array.isArray:function(t){return n.call(t)==="[object Array]"},isDate:function(t){return n.call(t)==="[object Date]"},isObject:(n.call(null)==="[object Object]")?function(t){return t!==null&&t!==undefined&&n.call(t)==="[object Object]"&&t.ownerDocument===undefined}:function(t){return n.call(t)==="[object Object]"},isNumeric:function(t){return !isNaN(parseFloat(t))&&isFinite(t)},augment:function(v,u){if(!BUI.isFunction(v)){return v}for(var t=1;t<arguments.length;t++){BUI.mix(v.prototype,arguments[t].prototype||arguments[t])}return v},cloneObject:function(u){var t=BUI.isArray(u)?[]:{};return BUI.mix(true,t,u)},error:function(t){if(BUI.debug){throw t}},extend:function(u,y,x,t){if(!BUI.isFunction(y)){x=y;y=u;u=function(){}}var v=Object.create?function(z,A){return Object.create(z,{constructor:{value:A}})}:function(A,C){function z(){}z.prototype=A;var B=new z();B.constructor=C;return B};var w=v(y.prototype,u);u.prototype=BUI.mix(w,u.prototype);u.superclass=v(y.prototype,y);BUI.mix(w,x);BUI.mix(u,t);return u},guid:(function(){var t={};return function(u){u=u||BUI.prefix+g;if(!t[u]){t[u]=1}else{t[u]+=1}return u+t[u]}})(),isString:function(t){return typeof t==="string"},isNumber:function(t){return typeof t==="number"},isBoolean:function(t){return typeof t==="boolean"},log:function(t){if(BUI.debug&&c.console&&c.console.log){c.console.log(t)}},merge:function(){var t=f.makeArray(arguments),u=t[0];if(BUI.isBoolean(u)){t.shift();t.unshift({});t.unshift(u)}else{t.unshift({})}return BUI.mix.apply(null,t)},mix:function(){return f.extend.apply(null,arguments)},app:function(t){if(!window[t]){window[t]={namespace:function(u){return BUI.namespace(u,window[t])}}}return window[t]},mixAttrs:p,mixAttr:h,mixin:function(z,t,v){v=v||[d,m];var w=t;if(w){z.mixins=w;var y={},x=w["concat"](z);BUI.each(x,function(A){if(A){BUI.each(v,function(B){if(A[B]){y[B]=y[B]||{};if(B=="ATTRS"){p(y[B],A[B])}else{BUI.mix(y[B],A[B])}}})}});BUI.each(y,function(B,A){z[A]=B});var u={};BUI.each(x,function(A){if(A){var B=A.prototype;for(var C in B){if(B.hasOwnProperty(C)){u[C]=B[C]}}}});BUI.each(u,function(B,A){z.prototype[A]=B})}return z},namespace:function(u,x){x=x||BUI;if(!u){return x}var w=u.split("."),t=x;for(var v=0;v<w.length;v++){var y=w[v];if(!t[y]){t[y]={}}t=t[y]}return t},prefix:"bui-",substitute:function(v,u,t){if(!BUI.isString(v)||(!BUI.isObject(u))&&!BUI.isArray(u)){return v}return v.replace(t||/\\?\{([^{}]+)\}/g,function(x,w){if(x.charAt(0)==="\\"){return x.slice(1)}return(u[w]===undefined)?"":u[w]})},unparam:function(x){if(typeof x!="string"||!(x=f.trim(x))){return{}}var v=x.split("&"),t,w={};for(var u=v.length-1;u>=0;u--){t=v[u].split("=");w[t[0]]=decodeURIComponent(t[1])}return w},ucfirst:function(t){t+="";return t.charAt(0).toUpperCase()+t.substring(1)},isInView:function(z){var x=z.left,w=z.top,u=BUI.viewportWidth(),t=BUI.viewportHeight(),v=BUI.scrollTop(),y=BUI.scrollLeft();if(x<y||x>y+u){return false}if(w<v||w>v+t){return false}return true},isInVerticalView:function(v){var t=BUI.viewportHeight(),u=BUI.scrollTop();if(v<u||v>u+t){return false}return true},isInHorizontalView:function(u){var t=BUI.viewportWidth(),v=BUI.scrollLeft();if(u<v||u>v+t){return false}return true},viewportWidth:function(){return f(window).width()},viewportHeight:function(){return f(window).height()},scrollLeft:function(){return f(window).scrollLeft()},scrollTop:function(){return f(window).scrollTop()},docWidth:function(){return Math.max(this.viewportWidth(),s[l][j],s[o][j])},docHeight:function(){return Math.max(this.viewportHeight(),s[l][e],s[o][e])},each:function(u,t){if(!u){return}f.each(u,function(x,w){return t(w,x)})},wrapBehavior:function(t,u){return t["__bui_wrap_"+u]=function(v){if(!t.get("disabled")){t[u](v)}}},getWrapBehavior:function(t,u){return t["__bui_wrap_"+u]},getControl:function(t){return BUI.Component.Manager.getComponent(t)},setValue:function(A,w,z){if(!A&&!w){return A}var u=w.split("."),v=A,t=u.length;for(var x=0;x<t;x++){if(!v||!BUI.isObject(v)){break}var y=u[x];if(x===t-1){v[y]=z;break}if(!v[y]){v[y]={}}v=v[y]}return A},getValue:function(A,w){if(!A&&!w){return null}var u=w.split("."),v=A,t=u.length,z=null;for(var x=0;x<t;x++){if(!v||!BUI.isObject(v)){break}var y=u[x];if(x===t-1){z=v[y];break}if(!v[y]){break}v=v[y]}return z}});var q={serializeToObject:function(u){var v=f(u).serializeArray(),t={};BUI.each(v,function(x){var w=x.name;if(!t[w]){t[w]=x.value}else{if(!BUI.isArray(t[w])){t[w]=[t[w]]}t[w].push(x.value)}});return t},setFields:function(u,v){for(var t in v){if(v.hasOwnProperty(t)){BUI.FormHelper.setField(u,t,v[t])}}},clear:function(t){var u=f.makeArray(t.elements);BUI.each(u,function(v){if(v.type==="checkbox"||v.type==="radio"){f(v).attr("checked",false)}else{f(v).val("")}f(v).change()})},setField:function(u,w,v){var t=u.elements[w];if(t&&t.type){q._setFieldValue(t,v)}else{if(BUI.isArray(t)||(t&&t.length)){BUI.each(t,function(x){q._setFieldValue(x,v)})}}},_setFieldValue:function(u,t){if(u.type==="checkbox"){if(u.value==""+t||(BUI.isArray(t)&&BUI.Array.indexOf(u.value,t)!==-1)){f(u).attr("checked",true)}else{f(u).attr("checked",false)}}else{if(u.type==="radio"){if(u.value==""+t){f(u).attr("checked",true)}else{f(u).attr("checked",false)}}else{f(u).val(t)}}},getField:function(t,u){return BUI.FormHelper.serializeToObject(t)[u]}};BUI.FormHelper=q;b.exports=BUI});define("bui/common/ua",["jquery"],function(c,b,d){var g=c("jquery");function f(h){var i=0;return parseFloat(h.replace(/\./g,function(){return(i++===0)?".":""}))}function a(j){j=j.toLowerCase();var k=/(chrome)[ \/]([\w.]+)/.exec(j)||/(webkit)[ \/]([\w.]+)/.exec(j)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(j)||/(msie) ([\w.]+)/.exec(j)||j.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(j)||[],i={browser:k[1]||"",version:k[2]||"0"},h={};i.browser&&(h[i.browser]=!0,h.version=i.version),h.chrome?h.webkit=!0:h.webkit&&(h.safari=!0);return h}var e=g.UA||(function(){var h=g.browser||a(navigator.userAgent),j=f(h.version),i={ie:h.msie&&j,webkit:h.webkit&&j,opera:h.opera&&j,mozilla:h.mozilla&&j};return i})();d.exports=e});define("bui/common/json",["jquery"],function(d,g,b){var h=d("jquery"),k=d("bui/common/ua"),i=window,p=i.JSON;if(!p||k["ie"]<9){p=i.JSON={}}function j(f){return f<10?"0"+f:f}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(f){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+j(this.getUTCMonth()+1)+"-"+j(this.getUTCDate())+"T"+j(this.getUTCHours())+":"+j(this.getUTCMinutes())+":"+j(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(f){return this.valueOf()}}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,c,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;function a(f){o["lastIndex"]=0;return o.test(f)?'"'+f.replace(o,function(s){var t=r[s];return typeof t==="string"?t:"\\u"+("0000"+s.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function l(z,w){var t,s,A,f,x=n,u,y=w[z];if(y&&typeof y==="object"&&typeof y.toJSON==="function"){y=y.toJSON(z)}if(typeof m==="function"){y=m.call(w,z,y)}switch(typeof y){case"string":return a(y);case"number":return isFinite(y)?String(y):"null";case"boolean":case"null":return String(y);case"object":if(!y){return"null"}n+=c;u=[];if(Object.prototype.toString.apply(y)==="[object Array]"){f=y.length;for(t=0;t<f;t+=1){u[t]=l(t,y)||"null"}A=u.length===0?"[]":n?"[\n"+n+u.join(",\n"+n)+"\n"+x+"]":"["+u.join(",")+"]";n=x;return A}if(m&&typeof m==="object"){f=m.length;for(t=0;t<f;t+=1){s=m[t];if(typeof s==="string"){A=l(s,y);if(A){u.push(a(s)+(n?": ":":")+A)}}}}else{for(s in y){if(Object.hasOwnProperty.call(y,s)){A=l(s,y);if(A){u.push(a(s)+(n?": ":":")+A)}}}}A=u.length===0?"{}":n?"{\n"+n+u.join(",\n"+n)+"\n"+x+"}":"{"+u.join(",")+"}";n=x;return A}}if(typeof p.stringify!=="function"){p.stringify=function(u,s,t){var f;n="";c="";if(typeof t==="number"){for(f=0;f<t;f+=1){c+=" "}}else{if(typeof t==="string"){c=t}}m=s;if(s&&typeof s!=="function"&&(typeof s!=="object"||typeof s.length!=="number")){throw new Error("JSON.stringify")}return l("",{"":u})}}function q(f){try{return new Function("return "+f+";")()}catch(s){throw"Json parse error!"}}var p={parse:h.parseJSON,looseParse:q,stringify:p.stringify};b.exports=p});define("bui/common/date",[],function(e,c,f){var d=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function g(C,t){if(C instanceof Date){return C}if(typeof(t)=="undefined"||t==null||t==""){var l=new Array("y-m-d","yyyy-mm-dd","yyyy-mm-dd HH:MM:ss","H:M:s");for(var s=0;s<l.length;s++){var v=g(C,l[s]);if(v!=null){return v}}return null}C=C+"";var B=0;var q=0;var w="";var m="";var o,n;var j=new Date();var p=j.getYear();var A=j.getMonth()+1;var z=1;var k=0;var u=0;var r=0;this.isInteger=function(i){return/^\d*$/.test(i)};this.getInt=function(H,F,G,E){for(var y=E;y>=G;y--){var D=H.substring(F,F+y);if(D.length<G){return null}if(this.isInteger(D)){return D}}return null};while(q<t.length){w=t.charAt(q);m="";while((t.charAt(q)==w)&&(q<t.length)){m+=t.charAt(q++)}if(m=="yyyy"||m=="yy"||m=="y"){if(m=="yyyy"){o=4;n=4}if(m=="yy"){o=2;n=2}if(m=="y"){o=2;n=4}p=this.getInt(C,B,o,n);if(p==null){return null}B+=p.length;if(p.length==2){p=p>70?1900+(p-0):2000+(p-0)}}else{if(m=="mm"||m=="m"){A=this.getInt(C,B,m.length,2);if(A==null||(A<1)||(A>12)){return null}B+=A.length}else{if(m=="dd"||m=="d"){z=this.getInt(C,B,m.length,2);if(z==null||(z<1)||(z>31)){return null}B+=z.length}else{if(m=="hh"||m=="h"){k=this.getInt(C,B,m.length,2);if(k==null||(k<1)||(k>12)){return null}B+=k.length}else{if(m=="HH"||m=="H"){k=this.getInt(C,B,m.length,2);if(k==null||(k<0)||(k>23)){return null}B+=k.length}else{if(m=="MM"||m=="M"){u=this.getInt(C,B,m.length,2);if(u==null||(u<0)||(u>59)){return null}B+=u.length}else{if(m=="ss"||m=="s"){r=this.getInt(C,B,m.length,2);if(r==null||(r<0)||(r>59)){return null}B+=r.length}else{if(C.substring(B,B+m.length)!=m){return null}else{B+=m.length}}}}}}}}}if(B!=C.length){return null}if(A==2){if(((p%4==0)&&(p%100!=0))||(p%400==0)){if(z>29){return null}}else{if(z>28){return null}}}if((A==4)||(A==6)||(A==9)||(A==11)){if(z>30){return null}}return new Date(p,A-1,z,k,u,r)}function h(k,i,j){var l=new Date(j);if(isNaN(l)){l=new Date()}i=parseInt(i,10);switch(k){case"s":l=new Date(l.getTime()+(1000*i));break;case"n":l=new Date(l.getTime()+(60000*i));break;case"h":l=new Date(l.getTime()+(3600000*i));break;case"d":l=new Date(l.getTime()+(86400000*i));break;case"w":l=new Date(l.getTime()+((86400000*7)*i));break;case"m":l=new Date(l.getFullYear(),(l.getMonth())+i,l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds());break;case"y":l=new Date(l.getFullYear()+i,l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds());break}return l}var a=function(){var j=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,k=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,m=function(p,o){p=String(p);o=o||2;while(p.length<o){p="0"+p}return p},i={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy年mm月dd日",localShortDateTime:"yy年mm月dd日 hh:MM:ss TT",localLongDate:"yyyy年mm月dd日",localLongDateTime:"yyyy年mm月dd日 hh:MM:ss TT",localFullDate:"yyyy年mm月dd日 w",localFullDateTime:"yyyy年mm月dd日 w hh:MM:ss TT"},l={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","星期日","星期一","星期二","星期三","星期四","星期五","星期六"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(t,F,A){if(arguments.length===1&&Object.prototype.toString.call(t)==="[object String]"&&!/\d/.test(t)){F=t;t=undefined}t=t?new Date(t):new Date();if(isNaN(t)){throw SyntaxError("invalid date")}F=String(i[F]||F||i["default"]);if(F.slice(0,4)==="UTC:"){F=F.slice(4);A=true}var C=A?"getUTC":"get",w=t[C+"Date"](),p=t[C+"Day"](),u=t[C+"Month"](),z=t[C+"FullYear"](),B=t[C+"Hours"](),v=t[C+"Minutes"](),E=t[C+"Seconds"](),x=t[C+"Milliseconds"](),q=A?0:t.getTimezoneOffset(),r={d:w,dd:m(w,undefined),ddd:l.dayNames[p],dddd:l.dayNames[p+7],w:l.dayNames[p+14],m:u+1,mm:m(u+1,undefined),mmm:l.monthNames[u],mmmm:l.monthNames[u+12],yy:String(z).slice(2),yyyy:z,h:B%12||12,hh:m(B%12||12,undefined),H:B,HH:m(B,undefined),M:v,MM:m(v,undefined),s:E,ss:m(E,undefined),l:m(x,3),L:m(x>99?Math.round(x/10):x,undefined),t:B<12?"a":"p",tt:B<12?"am":"pm",T:B<12?"A":"P",TT:B<12?"AM":"PM",Z:A?"UTC":(String(t).match(k)||[""]).pop().replace(n,""),o:(q>0?"-":"+")+m(Math.floor(Math.abs(q)/60)*100+Math.abs(q)%60,4),S:["th","st","nd","rd"][w%10>3?0:(w%100-w%10!==10)*w%10]};return F.replace(j,function(o){return o in r?r[o]:o.slice(1,o.length-1)})}}();var b={add:function(j,k,i){return h(j,k,i)},addHour:function(i,j){return h("h",i,j)},addMinute:function(j,i){return h("n",j,i)},addSecond:function(j,i){return h("s",j,i)},addDay:function(j,i){return h("d",j,i)},addWeek:function(j,i){return h("w",j,i)},addMonths:function(i,j){return h("m",i,j)},addYear:function(j,i){return h("y",j,i)},isDateEquals:function(j,i){return j.getFullYear()===i.getFullYear()&&j.getMonth()===i.getMonth()&&j.getDate()===i.getDate()},isEquals:function(j,i){if(j==i){return true}if(!j||!i){return false}if(!j.getTime||!i.getTime){return false}return j.getTime()==i.getTime()},isDateString:function(i){return d.test(i)},format:function(j,i,k){return a(j,i,k)},parse:function(i,j){if(BUI.isString(i)){i=i.replace("/","-")}return g(i,j)},today:function(){var i=new Date();return new Date(i.getFullYear(),i.getMonth(),i.getDate())},getDate:function(i){return new Date(i.getFullYear(),i.getMonth(),i.getDate())}};f.exports=b});define("bui/common/array",["jquery"],function(b,a,c){var e=b("bui/common/util");var d={peek:function(f){return f[f.length-1]},indexOf:function(j,k,f){var h=f==null?0:(f<0?Math.max(0,k.length+f):f);for(var g=h;g<k.length;g++){if(g in k&&k[g]===j){return g}}return -1},contains:function(f,g){return d.indexOf(f,g)>=0},each:e.each,equals:function(g,f){if(g==f){return true}if(!g||!f){return false}if(g.length!=f.length){return false}var j=true;for(var h=0;h<g.length;h++){if(g[h]!==f[h]){j=false;break}}return j},filter:function(h,g){var f=[];d.each(h,function(j,i){if(g(j,i)){f.push(j)}});return f},map:function(h,g){var f=[];d.each(h,function(j,i){f.push(g(j,i))});return f},find:function(h,g){var f=d.findIndex(h,g);return f<0?null:h[f]},findIndex:function(h,g){var f=-1;d.each(h,function(j,i){if(g(j,i)){f=i;return false}});return f},isEmpty:function(f){return f.length==0},add:function(g,f){g.push(f)},addAt:function(h,g,f){d.splice(h,f,0,g)},empty:function(g){if(!(g instanceof (Array))){for(var f=g.length-1;f>=0;f--){delete g[f]}}g.length=0},remove:function(j,g){var f=d.indexOf(g,j);var h;if((h=f>=0)){d.removeAt(j,f)}return h},removeAt:function(g,f){return d.splice(g,f,1).length==1},slice:function(g,h,f){if(arguments.length<=2){return Array.prototype.slice.call(g,h)}else{return Array.prototype.slice.call(g,h,f)}},splice:function(f,g,h,i){return Array.prototype.splice.apply(f,d.slice(arguments,1))}};c.exports=d});define("bui/common/keycode",[],function(b,a,c){var d={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};c.exports=d});define("bui/common/observable",["jquery"],function(c,d,a){var e=c("jquery");var f=c("bui/common/util"),g=c("bui/common/array");var i=function(){this._init()};f.augment(i,{_functions:null,_init:function(){var j=this;j._functions=[]},add:function(j){this._functions.push(j)},remove:function(j){var k=this._functions;index=g.indexOf(j,k);if(index>=0){k.splice(index,1)}},empty:function(){var j=this._functions.length;this._functions.splice(0,j)},pause:function(){this._paused=true},resume:function(){this._paused=false},fireWith:function(l,k){var j=this,m;if(j._paused){return}f.each(j._functions,function(n){m=n.apply(l,k);if(m===false){return false}});return m}});function b(){return new i()}var h=function(j){this._events=[];this._eventMap={};this._bubblesEvents=[];this._initEvents(j)};f.augment(h,{_events:[],_eventMap:{},_bubblesEvents:[],_bubbleTarget:null,_getCallbacks:function(k){var j=this,l=j._eventMap;return l[k]},_initEvents:function(l){var j=this,m=null;if(!l){return}m=l.listeners||{};if(l.handler){m.click=l.handler}if(m){for(var k in m){if(m.hasOwnProperty(k)){j.on(k,m[k])}}}},_isBubbles:function(j){return g.indexOf(j,this._bubblesEvents)>=0},addTarget:function(j){this._bubbleTarget=j},addEvents:function(l){var k=this,j=k._events,n=k._eventMap;function m(o){if(g.indexOf(o,j)===-1){n[o]=b();j.push(o)}}if(f.isArray(l)){f.each(l,function(o){m(o)})}else{m(l)}},clearListeners:function(){var j=this,l=j._eventMap;for(var k in l){if(l.hasOwnProperty(k)){l[k].empty()}}},fire:function(n,p){var k=this,o=k._getCallbacks(n),m=e.makeArray(arguments),j;if(!p){p={};m.push(p)}if(!p.target){p.target=k}if(o){j=o.fireWith(k,Array.prototype.slice.call(m,1))}if(k._isBubbles(n)){var l=k._bubbleTarget;if(l&&l.fire){l.fire(n,p)}}return j},pauseEvent:function(k){var j=this,l=j._getCallbacks(k);l&&l.pause()},resumeEvent:function(k){var j=this,l=j._getCallbacks(k);l&&l.resume()},on:function(l,m){var k=l.split(" "),j=this,n=null;if(k.length>1){f.each(k,function(o){j.on(o,m)})}else{n=j._getCallbacks(l);if(n){n.add(m)}else{j.addEvents(l);j.on(l,m)}}return j},off:function(k,l){if(!k&&!l){this.clearListeners();return this}var j=this,m=j._getCallbacks(k);if(m){if(l){m.remove(l)}else{m.empty()}}return j},publish:function(n,k){var j=this,m=j._bubblesEvents;if(k.bubbles){if(f.Array.indexOf(n,m)===-1){m.push(n)}}else{var l=f.Array.indexOf(n,m);if(l!==-1){m.splice(l,1)}}}});a.exports=h});define("bui/common/base",["jquery"],function(c,e,a){var f=c("jquery");var d={},j=c("bui/common/observable");function h(p,n,o){var m=p[n]||{};if(o){p[n]=m}return m}function l(m,n){if(BUI.isString(n)){return m[n]}return n}function i(n,m,p,r,o){var q=p;return n.fire(m+BUI.ucfirst(p)+"Change",{attrName:q,prevVal:r,newVal:o})}function k(m,q,s,r,p){r=r||{};var o,n,t;t=m.get(q);if(!f.isPlainObject(s)&&!BUI.isArray(s)&&t===s){return undefined}if(!r["silent"]){if(false===i(m,"before",q,t,s)){return false}}o=m._set(q,s,r);if(o===false){return o}if(!r["silent"]){s=m.__attrVals[q];i(m,"after",q,t,s)}return m}function b(n){if(n._attrs||n==g){return}var m=n.superclass.constructor;if(m&&!m._attrs){b(m)}n._attrs={};BUI.mixAttrs(n._attrs,m._attrs);BUI.mixAttrs(n._attrs,n.ATTRS)}var g=function(o){var m=this,q=m.constructor,p=[];this.__attrs={};this.__attrVals={};j.apply(this,arguments);while(q){p.push(q);if(q.extensions){BUI.mixin(q,q.extensions);delete q.extensions}q=q.superclass?q.superclass.constructor:null}var n=m.constructor;b(n);m._initStaticAttrs(n._attrs);m._initAttrs(o)};g.INVALID=d;BUI.extend(g,j);BUI.augment(g,{_initStaticAttrs:function(q){var n=this,o;o=n.__attrs={};for(var r in q){if(q.hasOwnProperty(r)){var m=q[r];if(m.shared===false||m.valueFn){o[r]={};BUI.mixAttr(o[r],q[r])}else{o[r]=q[r]}}}},addAttr:function(q,r,t){var n=this,o=n.__attrs,m=o[q];if(!m){m=o[q]={}}for(var s in r){if(r.hasOwnProperty(s)){if(s=="value"){if(BUI.isObject(r[s])){m[s]=m[s]||{};BUI.mix(m[s],r[s])}else{if(BUI.isArray(r[s])){m[s]=m[s]||[];BUI.mix(m[s],r[s])}else{m[s]=r[s]}}}else{m[s]=r[s]}}}return n},addAttrs:function(n,o,p){var m=this;if(!n){return m}if(typeof(o)==="boolean"){p=o;o=null}BUI.each(n,function(r,q){m.addAttr(q,r,p)});if(o){m.set(o)}return m},hasAttr:function(m){return m&&this.__attrs.hasOwnProperty(m)},getAttrs:function(){return this.__attrs},getAttrVals:function(){return this.__attrVals},get:function(p){var n=this,r=n.__attrVals,q,m,o;q=h(n.__attrs,p);m=q["getter"];o=p in r?r[p]:n._getDefAttrVal(p);if(m&&(m=l(n,m))){o=m.call(n,o,p)}return o},clearAttrVals:function(){this.__attrVals={}},removeAttr:function(n){var m=this;if(m.hasAttr(n)){delete m.__attrs[n];delete m.__attrVals[n]}return m},set:function(o,r,q){var m=this;if(f.isPlainObject(o)){q=r;var p=Object(o),n=[];for(o in p){if(p.hasOwnProperty(o)){k(m,o,p[o],q)}}return m}return k(m,o,r,q)},setInternal:function(m,o,n){return this._set(m,o,n)},_getDefAttrVal:function(p){var m=this,o=m.__attrs,q=h(o,p),n=q.valueFn,r;if(n&&(n=l(m,n))){r=n.call(m);if(r!==undefined){q.value=r}delete q.valueFn;o[p]=q}return q.value},_set:function(n,q,p){var m=this,r,o=h(m.__attrs,n,true),s=o["setter"];if(s&&(s=l(m,s))){r=s.call(m,q,n)}if(r===d){return false}if(r!==undefined){q=r}m.__attrVals[n]=q;return m},_initAttrs:function(o){var n=this;if(o){for(var m in o){if(o.hasOwnProperty(m)){n._set(m,o[m])}}}}});a.exports=g});define("bui/common/component/component",["jquery"],function(c,a,e){var b={};BUI.mix(b,{Manager:c("bui/common/component/manage"),UIBase:c("bui/common/component/uibase/uibase"),View:c("bui/common/component/view"),Controller:c("bui/common/component/controller")});function d(g,f){var h,i;if(g&&(i=g.xclass)){if(f&&!g.prefixCls){g.prefixCls=f.get("prefixCls")}h=b.Manager.getConstructorByXClass(i);if(!h){BUI.error("can not find class by xclass desc : "+i)}g=new h(g)}return g}b.create=d;e.exports=b});define("bui/common/component/manage",["jquery"],function(d,e,b){var f=d("jquery");var i={};function h(l){var q=l.split(/\s+/),s=-1,n,r=null;for(var m=0;m<q.length;m++){var o=i[q[m]];if(o&&(n=o.priority)>s){s=n;r=o.constructor}}return r}function k(m){for(var l in i){var n=i[l];if(n.constructor==m){return l}}return 0}function g(l,m){if(BUI.isFunction(m)){i[l]={constructor:m,priority:0}}else{m.priority=m.priority||0;i[l]=m}}function c(l){var n=f.trim(l).split(/\s+/);for(var m=0;m<n.length;m++){if(n[m]){n[m]=this.get("prefixCls")+n[m]}}return n.join(" ")}var j={};var a={__instances:j,addComponent:function(m,l){j[m]=l},removeComponent:function(l){delete j[l]},eachComponent:function(l){BUI.each(j,l)},getComponent:function(l){return j[l]},getCssClassWithPrefix:c,getXClassByConstructor:k,getConstructorByXClass:h,setConstructorByXClass:g};b.exports=a});define("bui/common/component/uibase/uibase",["jquery"],function(b,a,c){var d=b("bui/common/component/uibase/base");BUI.mix(d,{Align:b("bui/common/component/uibase/align"),AutoShow:b("bui/common/component/uibase/autoshow"),AutoHide:b("bui/common/component/uibase/autohide"),Close:b("bui/common/component/uibase/close"),Collapsable:b("bui/common/component/uibase/collapsable"),Drag:b("bui/common/component/uibase/drag"),KeyNav:b("bui/common/component/uibase/keynav"),List:b("bui/common/component/uibase/list"),ListItem:b("bui/common/component/uibase/listitem"),Mask:b("bui/common/component/uibase/mask"),Position:b("bui/common/component/uibase/position"),Selection:b("bui/common/component/uibase/selection"),StdMod:b("bui/common/component/uibase/stdmod"),Decorate:b("bui/common/component/uibase/decorate"),Tpl:b("bui/common/component/uibase/tpl"),ChildCfg:b("bui/common/component/uibase/childCfg"),Bindable:b("bui/common/component/uibase/bindable"),Depends:b("bui/common/component/uibase/depends")});BUI.mix(d,{CloseView:d.Close.View,CollapsableView:d.Collapsable.View,ChildList:d.List.ChildList,ListItemView:d.ListItem.View,MaskView:d.Mask.View,PositionView:d.Position.View,StdModView:d.StdMod.View,TplView:d.Tpl.View});c.exports=d});define("bui/common/component/uibase/base",["jquery"],function(i,t,a){var g=i("jquery");var c=i("bui/common/component/manage"),b="_uiSet",f="ATTRS",q=BUI.ucfirst,e=g.noop,k=i("bui/common/base");function m(v,u){j(v,"initializer","constructor")}function j(D,A,v){var z=D.constructor,B=[],u,w,x,C;while(z){C=[];if(x=z.mixins){for(var y=0;y<x.length;y++){u=x[y];if(u){if(v!="constructor"){if(u.prototype.hasOwnProperty(v)){u=u.prototype[v]}else{u=null}}u&&C.push(u)}}}if(z.prototype.hasOwnProperty(A)&&(w=z.prototype[A])){C.push(w)}if(C.length){B.push.apply(B,C.reverse())}z=z.superclass&&z.superclass.constructor}for(y=B.length-1;y>=0;y--){B[y]&&B[y].call(D)}}function l(w){var y=w.constructor,v,x,u;while(y){if(y.prototype.hasOwnProperty("destructor")){y.prototype.destructor.apply(w)}if((v=y.mixins)){for(u=v.length-1;u>=0;u--){x=v[u]&&v[u].prototype.__destructor;x&&x.apply(w)}}y=y.superclass&&y.superclass.constructor}}function d(u){if(!u){return}BUI.each(u,function(w,v){if(BUI.isFunction(w)){u[v]=new w()}})}function r(v,u,w){if(!u){return}BUI.each(u,function(y,x){if(y[w]){y[w](v)}})}function o(u){}function h(y){var x,A,z=y.getAttrs();for(var w in z){if(z.hasOwnProperty(w)){var u=b+q(w);if((A=y[u])&&z[w].sync!==false&&(x=y.get(w))!==undefined){A.call(y,x)}}}}var n=function(w){var u=this,A;k.apply(u,arguments);u.setInternal("userConfig",w);m(u,w);var x,z,v=u.get("plugins");d(v);var y=u.get("xclass");if(y){u.__xclass=y}r(u,v,"initializer");w&&w.autoRender&&u.render()};n.ATTRS={userConfig:{},autoRender:{value:false},listeners:{value:{}},plugins:{},rendered:{value:false},xclass:{valueFn:function(){return c.getXClassByConstructor(this.constructor)}}};BUI.extend(n,k);BUI.augment(n,{create:function(){var u=this;if(!u.get("created")){u.fire("beforeCreateDom");j(u,"createDom","__createDom");u._set("created",true);u.fire("afterCreateDom");r(u,u.get("plugins"),"createDom")}return u},render:function(){var u=this;if(!u.get("rendered")){var v=u.get("plugins");u.create(undefined);u.set("created",true);u.fire("beforeRenderUI");j(u,"renderUI","__renderUI");u.fire("afterRenderUI");r(u,v,"renderUI");u.fire("beforeBindUI");o(u);j(u,"bindUI","__bindUI");u.set("binded",true);u.fire("afterBindUI");r(u,v,"bindUI");u.fire("beforeSyncUI");h(u);j(u,"syncUI","__syncUI");u.fire("afterSyncUI");r(u,v,"syncUI");u._set("rendered",true)}return u},createDom:e,renderUI:e,bindUI:e,syncUI:e,destroy:function(){var u=this;if(u.destroyed){return u}u.fire("beforeDestroy");r(u,u.get("plugins"),"destructor");l(u);u.fire("afterDestroy");u.off();u.clearAttrVals();u.destroyed=true;return u}});function s(x){var w=[];while(x.base){w.push(x);x=x.base}for(var u=w.length-1;u>=0;u--){var v=w[u];BUI.mix(v.prototype,v.px);BUI.mix(v,v.sx);v.base=null;v.px=null;v.sx=null}}BUI.mix(n,{define:function(w,v,u,y){if(g.isPlainObject(v)){y=u;u=v;v=[]}function x(){var z=this.constructor;if(z.base){s(z)}n.apply(this,arguments)}BUI.extend(x,w);x.base=w;x.px=u;x.sx=y;if(v.length){x.extensions=v}return x},extend:function p(y,x,A){var v=g.makeArray(arguments),u,z=v[v.length-1];v.unshift(this);if(z.xclass){v.pop();v.push(z.xclass)}u=n.define.apply(n,v);if(z.xclass){var w=z.priority||(this.priority?(this.priority+1):1);c.setConstructorByXClass(z.xclass,{constructor:u,priority:w});u.__xclass=z.xclass;u.priority=w;u.toString=function(){return z.xclass}}u.extend=p;return u}});a.exports=n});define("bui/common/component/uibase/align",["jquery"],function(i,r,a){var f=i("jquery"),m=i("bui/common/ua"),n="x-align-",e=window;function l(v){var y=v.ownerDocument,t=y.body,w,x=f(v).css("position"),u=x=="fixed"||x=="absolute";if(!u){return v.nodeName.toLowerCase()=="html"?null:v.parentNode}for(w=v.parentNode;w&&w!=t;w=w.parentNode){x=f(w).css("position");if(x!="static"){return w}}return null}function q(u){var C={left:0,right:Infinity,top:0,bottom:Infinity},t,B,z,v,A=u.ownerDocument,w=A.body,y=A.documentElement;for(t=u;t=l(t);){if((!m.ie||t.clientWidth!=0)&&(t!=w&&t!=y&&f(t).css("overflow")!="visible")){var x=f(t).offset();x.left+=t.clientLeft;x.top+=t.clientTop;C.top=Math.max(C.top,x.top);C.right=Math.min(C.right,x.left+t.clientWidth);C.bottom=Math.min(C.bottom,x.top+t.clientHeight);C.left=Math.max(C.left,x.left)}}B=f(e).scrollLeft();z=f(e).scrollTop();C.left=Math.max(C.left,B);C.top=Math.max(C.top,z);v={width:BUI.viewportWidth(),height:BUI.viewportHeight()};C.right=Math.min(C.right,B+v.width);C.bottom=Math.min(C.bottom,z+v.height);return C.top>=0&&C.left>=0&&C.bottom>C.top&&C.right>C.left?C:null}function g(A,t,u,z){var x,w,y,v;x={left:A.left,top:A.top};y=c(t,u[0]);v=c(A,u[1]);w=[v.left-y.left,v.top-y.top];return{left:x.left-w[0]+(+z[0]),top:x.top-w[1]+(+z[1])}}function k(v,u,t){return v.left<t.left||v.left+u.width>t.right}function j(v,u,t){return v.top<t.top||v.top+u.height>t.bottom}function p(w,v,u,y){var x=BUI.cloneObject(w),t={width:v.width,height:v.height};if(y.adjustX&&x.left<u.left){x.left=u.left}if(y["resizeWidth"]&&x.left>=u.left&&x.left+t.width>u.right){t.width-=(x.left+t.width)-u.right}if(y.adjustX&&x.left+t.width>u.right){x.left=Math.max(u.right-t.width,u.left)}if(y.adjustY&&x.top<u.top){x.top=u.top}if(y["resizeHeight"]&&x.top>=u.top&&x.top+t.height>u.bottom){t.height-=(x.top+t.height)-u.bottom}if(y.adjustY&&x.top+t.height>u.bottom){x.top=Math.max(u.bottom-t.height,u.top)}return BUI.mix(x,t)}function h(v,u,w){var t=[];f.each(v,function(x,y){t.push(y.replace(u,function(z){return w[z]}))});return t}function b(u,t){u[t]=-u[t];return u}function s(){}s.__getOffsetParent=l;s.__getVisibleRectForElement=q;s.ATTRS={align:{shared:false,value:{}}};function d(v){var x,t,u;if(v.length&&!f.isWindow(v[0])){x=v.offset();t=v.outerWidth();u=v.outerHeight()}else{x={left:BUI.scrollLeft(),top:BUI.scrollTop()};t=BUI.viewportWidth();u=BUI.viewportHeight()}x.width=t;x.height=u;return x}function c(B,D){var v=D.charAt(0),z=D.charAt(1),u=B.width,A=B.height,t,C;t=B.left;C=B.top;if(v==="c"){C+=A/2}else{if(v==="b"){C+=A}}if(z==="c"){t+=u/2}else{if(z==="r"){t+=u}}return{left:t,top:C}}function o(v){var u=v.attr("class"),w=new RegExp("s?"+n+"[a-z]{2}-[a-z]{2}","ig"),t=w.exec(u);if(t){v.removeClass(t.join(" "))}}s.prototype={_uiSetAlign:function(t,x){var y="",u,w;if(t&&t.points){this.align(t.node,t.points,t.offset,t.overflow);this.set("cachePosition",null);u=this.get("el");o(u);w=t.points.join("-");y=n+w;u.addClass(y)}},__bindUI:function(){var t=this;var u=BUI.wrapBehavior(t,"handleWindowResize");t.on("show",function(){f(window).on("resize",u)});t.on("hide",function(){f(window).off("resize",u)})},handleWindowResize:function(){var t=this,u=t.get("align");t.set("align",u)},align:function(z,D,y,w){z=f(z||e);y=y&&[].concat(y)||[0,0];w=w||{};var F=this,t=F.get("el"),u=0,C=q(t[0]),v=d(t),E=d(z),A=g(v,E,D,y),x=BUI.merge(v,A);if(C&&(w.adjustX||w.adjustY)){if(k(A,v,C)){u=1;D=h(D,/[lr]/ig,{l:"r",r:"l"});y=b(y,0)}if(j(A,v,C)){u=1;D=h(D,/[tb]/ig,{t:"b",b:"t"});y=b(y,1)}if(u){A=g(v,E,D,y);BUI.mix(x,A)}var B={};B.adjustX=w.adjustX&&k(A,v,C);B.adjustY=w.adjustY&&j(A,v,C);if(B.adjustX||B.adjustY){x=p(A,v,C,B)}}if(x.left!=v.left){F.setInternal("x",null);F.get("view").setInternal("x",null);F.set("x",x.left)}if(x.top!=v.top){F.setInternal("y",null);F.get("view").setInternal("y",null);F.set("y",x.top)}if(x.width!=v.width){t.width(t.width()+x.width-v.width)}if(x.height!=v.height){t.height(t.height()+x.height-v.height)}return F},center:function(u){var t=this;t.set("align",{node:u,points:["cc","cc"],offset:[0,0]});return t}};a.exports=s});define("bui/common/component/uibase/autoshow",["jquery"],function(b,a,c){var d=b("jquery");function e(){}e.ATTRS={trigger:{},delegateTigger:{getter:function(){this.get("delegateTrigger")},setter:function(f){this.set("delegateTrigger",f)}},delegateTrigger:{value:false},autoAlign:{value:true},autoFocused:{value:true},triggerActiveCls:{},curTrigger:{},triggerCallback:{},triggerEvent:{value:"click"},triggerHideEvent:{},events:{value:{"triggerchange":false}}};e.prototype={__createDom:function(){this._setTrigger()},__bindUI:function(){var f=this,g=f.get("triggerActiveCls");if(g){f.on("hide",function(){var h=f.get("curTrigger");if(h){h.removeClass(g)}})}},_setTrigger:function(){var l=this,m=l.get("triggerEvent"),o=l.get("triggerHideEvent"),f=l.get("triggerCallback"),h=l.get("triggerActiveCls")||"",g=l.get("trigger"),j=l.get("delegateTrigger"),n=d(g);function k(r){if(l.get("disabled")){return}var p=l.get("curTrigger"),q=j?d(r.currentTarget):d(this),s=l.get("align");if(!p||p[0]!=q[0]){if(p){p.removeClass(h)}l.set("curTrigger",q);l.fire("triggerchange",{prevTrigger:p,curTrigger:q})}q.addClass(h);if(l.get("autoAlign")){s.node=q}l.set("align",s);l.show();f&&f(r)}function i(q){var p=q.toElement||q.relatedTarget;if(!p||!l.containsElement(p)){l.hide()}}if(m){if(j&&BUI.isString(g)){d(document).delegate(g,m,k)}else{n.on(m,k)}}if(o){if(j&&BUI.isString(g)){d(document).delegate(g,o,i)}else{n.on(o,i)}}},__renderUI:function(){var f=this,g=f.get("align");if(g&&!g.node){g.node=f.get("render")||f.get("trigger")}}};c.exports=e});define("bui/common/component/uibase/autohide",["jquery"],function(f,e,g){var h=f("jquery"),c=BUI.wrapBehavior,b=BUI.getWrapBehavior;function d(i,k){var j=i.get("hideExceptNode");if(j&&j.length){return h.contains(j[0],k)}return false}function a(){}a.ATTRS={autoHideType:{value:"click"},autoHide:{value:false},hideExceptNode:{},events:{value:{autohide:false}}};a.prototype={__bindUI:function(){var i=this;i.on("afterVisibleChange",function(j){var k=j.newVal;if(i.get("autoHide")){if(k){i._bindHideEvent()}else{i._clearHideEvent()}}})},handleMoveOuter:function(j){var i=this,k=j.toElement||j.relatedTarget;if(!i.containsElement(k)&&!d(i,k)){if(i.fire("autohide")!==false){i.hide()}}},handleDocumentClick:function(j){var i=this,k=j.target;if(!i.containsElement(k)&&!d(i,k)){if(i.fire("autohide")!==false){i.hide()}}},_bindHideEvent:function(){var i=this,j=i.get("curTrigger"),k=i.get("autoHideType");if(k==="click"){h(document).on("mousedown",c(i,"handleDocumentClick"))}else{i.get("el").on("mouseleave",c(i,"handleMoveOuter"));if(j){h(j).on("mouseleave",c(i,"handleMoveOuter"))}}},_clearHideEvent:function(){var i=this,j=i.get("curTrigger"),k=i.get("autoHideType");if(k==="click"){h(document).off("mousedown",b(i,"handleDocumentClick"))}else{i.get("el").off("mouseleave",b(i,"handleMoveOuter"));if(j){h(j).off("mouseleave",b(i,"handleMoveOuter"))}}}};g.exports=a});define("bui/common/component/uibase/close",["jquery"],function(b,f,a){var h=b("jquery");var e=BUI.prefix+"ext-";function j(k){return h(k.get("closeTpl"))}function c(){}c.ATTRS={closeTpl:{value:"<a "+'tabindex="0" '+"href='javascript:void(\"关闭\")' "+'role="button" '+'class="'+e+"close"+'">'+'<span class="'+e+"close-x"+'">关闭<'+"/span>"+"<"+"/a>"},closeable:{value:true},closeBtn:{}};c.prototype={_uiSetCloseable:function(l){var k=this,m=k.get("closeBtn");if(l){if(!m){k.setInternal("closeBtn",m=j(k))}m.appendTo(k.get("el"),undefined)}else{if(m){m.remove()}}}};function i(){}var g="hide";i.ATTRS={closeTpl:{view:true},closeable:{view:1},closeBtn:{view:1},closeAction:{value:g}};var d={hide:g,destroy:"destroy",remove:"remove"};i.prototype={_uiSetCloseable:function(l){var k=this;if(l&&!k.__bindCloseEvent){k.__bindCloseEvent=1;k.get("closeBtn").on("click",function(m){if(k.fire("closeclick",{domTarget:m.target})!==false){k.close()}m.preventDefault()})}},__destructor:function(){var k=this.get("closeBtn");k&&k.detach()},close:function(){var k=this,l=d[k.get("closeAction")||g];if(k.fire("closing",{action:l})!==false){k.fire("beforeclosed",{action:l});if(l=="remove"){k[l](true)}else{k[l]()}k.fire("closed",{action:l})}}};i.View=c;a.exports=i});define("bui/common/component/uibase/collapsable",[],function(c,b,d){var a=function(){};a.ATTRS={collapsed:{}};a.prototype={_uiSetCollapsed:function(h){var f=this,g=f.getStatusCls("collapsed"),i=f.get("el");if(h){i.addClass(g)}else{i.removeClass(g)}}};var e=function(){};e.ATTRS={collapsable:{value:false},collapsed:{view:true,value:false},events:{value:{"expanded":true,"collapsed":true}}};e.prototype={_uiSetCollapsed:function(g){var f=this;if(g){f.fire("collapsed")}else{f.fire("expanded")}}};e.View=a;d.exports=e});define("bui/common/component/uibase/drag",["jquery"],function(c,b,d){var g=c("jquery"),h=BUI.guid("drag");var e=function(){};e.ATTRS={dragNode:{},draging:{setter:function(i){if(i===true){return{}}},value:null},constraint:{},dragBackEl:{getter:function(){return g("#"+h)}}};var a='<div id="'+h+'" style="background-color: red; position: fixed; left: 0px; width: 100%; height: 100%; top: 0px; cursor: move; z-index: 999999; display: none; "></div>';function f(){var i=g(a).css("opacity",0).prependTo("body");return i}e.prototype={__bindUI:function(){var k=this,o=k.get("constraint"),n=k.get("dragNode");if(!n){return}n.on("mousedown",function(p){if(p.which==1){p.preventDefault();k.set("draging",{elX:k.get("x"),elY:k.get("y"),startX:p.pageX,startY:p.pageY});l()}});function m(q){var p=k.get("draging");if(p){q.preventDefault();k._dragMoveTo(q.pageX,q.pageY,p,o)}}function j(q){if(q.which==1){k.set("draging",false);var p=k.get("dragBackEl");if(p){p.hide()}i()}}function l(){g(document).on("mousemove",m);g(document).on("mouseup",j)}function i(){g(document).off("mousemove",m);g(document).off("mouseup",j)}},_dragMoveTo:function(k,p,m,n){var j=this,l=j.get("dragBackEl"),m=m||j.get("draging"),i=m.startX-k,o=m.startY-p;if(!l.length){l=f()}l.css({cursor:"move",display:"block"});j.set("xy",[j._getConstrainX(m.elX-i,n),j._getConstrainY(m.elY-o,n)])},_getConstrainX:function(j,o){var i=this,m=i.get("el").outerWidth(),n=j+m,k=i.get("x");if(o){var l=o.offset();if(l.left>=j){return l.left}if(l.left+o.width()<n){return l.left+o.width()-m}return j}if(BUI.isInHorizontalView(j)&&BUI.isInHorizontalView(n)){return j}return k},_getConstrainY:function(o,n){var k=this,j=k.get("el").outerHeight(),m=o+j,i=k.get("y");if(n){var l=n.offset();if(l.top>o){return l.top}if(l.top+n.height()<m){return l.top+n.height()-j}return o}if(BUI.isInVerticalView(o)&&BUI.isInVerticalView(m)){return o}return i}};d.exports=e});define("bui/common/component/uibase/keynav",["jquery"],function(e,d,f){var h=e("jquery"),g=e("bui/common/keycode"),c=BUI.wrapBehavior,b=BUI.getWrapBehavior;var a=function(){};a.ATTRS={allowKeyNav:{value:true},navEvent:{value:"keydown"},ignoreInputFields:{value:true}};a.prototype={__bindUI:function(){},_uiSetAllowKeyNav:function(k){var i=this,j=i.get("navEvent"),l=i.get("el");if(k){l.on(j,c(i,"_handleKeyDown"))}else{l.off(j,b(i,"_handleKeyDown"))}},_handleKeyDown:function(l){var i=this,j=i.get("ignoreInputFields"),k=l.which;if(j&&h(l.target).is("input,select,textarea")){return}switch(k){case g.UP:i.handleNavUp(l);break;case g.DOWN:i.handleNavDown(l);break;case g.RIGHT:i.handleNavRight(l);break;case g.LEFT:i.handleNavLeft(l);break;case g.ENTER:i.handleNavEnter(l);break;case g.ESC:i.handleNavEsc(l);break;case g.TAB:i.handleNavTab(l);break;default:break}},handleNavUp:function(i){},handleNavDown:function(i){},handleNavLeft:function(i){},handleNavRight:function(i){},handleNavEnter:function(i){},handleNavEsc:function(i){},handleNavTab:function(i){}};f.exports=a});define("bui/common/component/uibase/list",["jquery"],function(b,e,a){var g=b("jquery"),j=b("bui/common/component/uibase/selection");var h=function(){};h.ATTRS={items:{shared:false,view:true},idField:{value:"id"},itemTpl:{view:true},itemTplRender:{view:true},itemStatusCls:{view:true,value:{}},events:{value:{"itemclick":true}}};h.prototype={getItemCount:function(){return this.getItems().length},getValueByField:function(k,l){},getItems:function(){},getFirstItem:function(){return this.getItemAt(0)},getLastItem:function(){return this.getItemAt(this.getItemCount()-1)},getItemAt:function(k){return this.getItems()[k]||null},getItem:function(l){var k=this.get("idField");return this.findItemByField(k,l)},indexOfItem:function(k){return BUI.Array.indexOf(k,this.getItems())},addItems:function(l){var k=this;BUI.each(l,function(m){k.addItem(m)})},addItemsAt:function(l,m){var k=this;BUI.each(l,function(o,n){k.addItemAt(o,m+n)})},updateItem:function(k){},addItem:function(k){return this.addItemAt(k,this.getItemCount())},addItemAt:function(l,k){},findItemByField:function(l,k){},getItemText:function(k){},clearItems:function(){var k=this,l=k.getItems();l.splice(0);k.clearControl()},removeItem:function(k){},removeItems:function(l){var k=this;BUI.each(l,function(m){k.removeItem(m)})},removeItemAt:function(k){this.removeItem(this.getItemAt(k))},clearControl:function(){}};function d(k){if(k.selected){k.selected=false}if(k.set){k.set("selected",false)}}function f(l,o){var q=o.isController?o.getAttrVals():o,m=l.get("itemTpl"),k=l.get("itemStatusCls"),n=l.get("itemTplRender");if(m&&!q.tpl){i(o,"tpl",m)}if(n&&!q.tplRender){i(o,"tplRender",n)}if(k){var p=q.statusCls||o.isController?o.get("statusCls"):{};BUI.each(k,function(s,r){if(s&&!p[r]){p[r]=s}});i(o,"statusCls",p)}}function i(l,k,m){if(l.isController){l.set(k,m)}else{l[k]=m}}var c=function(){this.__init()};c.ATTRS=BUI.merge(true,h.ATTRS,j.ATTRS,{items:{sync:false},autoInitItems:{value:true},isDecorateChild:{value:true},defaultLoaderCfg:{value:{property:"children",dataType:"json"}}});BUI.augment(c,h,j,{__init:function(){var k=this,l=k.get("items");if(l&&k.get("autoInitItems")){k.addItems(l)}k.on("beforeRenderUI",function(){k._beforeRenderUI()})},_uiSetItems:function(l){var k=this;k.clearControl();k.addItems(l)},_beforeRenderUI:function(){var k=this,m=k.get("children"),l=k.get("items");BUI.each(m,function(n){f(k,n)})},__bindUI:function(){var k=this,l=k.get("selectedEvent");k.on(l,function(n){var m=n.target;if(m.get("selectable")){if(!m.get("selected")){k.setSelected(m)}else{if(k.get("multipleSelect")){k.clearSelected(m)}}}});k.on("click",function(m){if(m.target!==k){k.fire("itemclick",{item:m.target,domTarget:m.domTarget,domEvent:m})}});k.on("beforeAddChild",function(m){f(k,m.child)});k.on("beforeRemoveChild",function(o){var n=o.child,m=n.get("selected");if(m){if(k.get("multipleSelect")){k.clearSelected(n)}else{k.setSelected(null)}}n.set("selected",false)})},clearControl:function(){this.removeChildren(true)},getItems:function(){return this.get("children")},updateItem:function(n){var k=this,l=k.get("idField"),m=k.findItemByField(l,n[l]);if(m){m.setTplContent()}return m},removeItem:function(m){var k=this,l=k.get("idField");if(!(m instanceof BUI.Component.Controller)){m=k.findItemByField(l,m[l])}this.removeChild(m,true)},addItemAt:function(l,k){return this.addChild(l,k)},findItemByField:function(p,o,m){m=m||this;var l=this,n=m.get("children"),k=null;g(n).each(function(q,r){if(r.get(p)==o){k=r}else{if(r.get("children").length){k=l.findItemByField(p,o,r)}}if(k){return false}});return k},getItemText:function(k){return k.get("el").text()},getValueByField:function(k,l){return k&&k.get(l)},setItemSelectedStatus:function(n,m){var k=this,o=m?"addClass":"removeClass",l=null;if(n){n.set("selected",m);l=n.get("el")}k.afterSelected(n,m,l)},isItemSelected:function(k){return k?k.get("selected"):false},setAllSelection:function(){var k=this,l=k.getItems();k.setSelection(l)},getSelection:function(){var k=this,l=k.getItems(),m=[];BUI.each(l,function(n){if(k.isItemSelected(n)){m.push(n)}});return m}});h.ChildList=c;a.exports=h});define("bui/common/component/uibase/selection",["jquery"],function(b,a,d){var f=b("jquery");var c="single";var e=function(){};e.ATTRS={selectedEvent:{value:"click"},events:{value:{"selectedchange":false,"beforeselectedchange":false,"itemselected":false,"itemunselected":false}},idField:{value:"id"},multipleSelect:{value:false}};e.prototype={clearSelection:function(){var g=this,h=g.getSelection();BUI.each(h,function(i){g.clearSelected(i)})},getSelection:function(){},getSelected:function(){return this.getSelection()[0]},getSelectedValue:function(){var g=this,i=g.get("idField"),h=g.getSelected();return g.getValueByField(h,i)},getSelectionValues:function(){var g=this,i=g.get("idField"),h=g.getSelection();return f.map(h,function(j){return g.getValueByField(j,i)})},getSelectionText:function(){var g=this,h=g.getSelection();return f.map(h,function(i){return g.getItemText(i)})},clearSelected:function(h){var g=this;h=h||g.getSelected();if(h){g.setItemSelected(h,false)}},getSelectedText:function(){var g=this,h=g.getSelected();return g.getItemText(h)},setSelection:function(h){var g=this;h=BUI.isArray(h)?h:[h];BUI.each(h,function(i){g.setSelected(i)})},setSelected:function(i){var g=this,h=g.get("multipleSelect");if(!g.isItemSelectable(i)){return}if(!h){var j=g.getSelected();if(i!=j){g.clearSelected(j)}}g.setItemSelected(i,true)},isItemSelected:function(g){},isItemSelectable:function(g){return true},setItemSelected:function(j,i){var g=this,h;if(j){h=g.isItemSelected(j);if(h==i){return}}if(g.fire("beforeselectedchange",{item:j,selected:i})!==false){g.setItemSelectedStatus(j,i)}},setItemSelectedStatus:function(h,g){},setAllSelection:function(){},setSelectedByField:function(j,i){if(!i){i=j;j=this.get("idField")}var g=this,h=g.findItemByField(j,i);g.setSelected(h)},setSelectionByField:function(i,h){if(!h){h=i;i=this.get("idField")}var g=this;BUI.each(h,function(j){g.setSelectedByField(i,j)})},afterSelected:function(j,i,h){var g=this;if(i){g.fire("itemselected",{item:j,domTarget:h});g.fire("selectedchange",{item:j,domTarget:h,selected:i})}else{g.fire("itemunselected",{item:j,domTarget:h});if(g.get("multipleSelect")){g.fire("selectedchange",{item:j,domTarget:h,selected:i})}}}};d.exports=e});define("bui/common/component/uibase/listitem",[],function(c,b,d){function a(){}a.ATTRS={selected:{}};a.prototype={_uiSetSelected:function(h){var f=this,g=f.getStatusCls("selected"),i=f.get("el");if(h){i.addClass(g)}else{i.removeClass(g)}}};function e(){}e.ATTRS={selectable:{value:true},selected:{view:true,sync:false,value:false}};e.prototype={};e.View=a;d.exports=e});define("bui/common/component/uibase/mask",["jquery"],function(c,g,b){var h=c("jquery"),j=c("bui/common/ua"),a={},e=j.ie==6;function k(n){return n.get("prefixCls")+"ext-mask"}function i(){return e?BUI.docWidth()+"px":"100%"}function m(){return e?BUI.docHeight()+"px":"100%"}function f(o){var n=h("<div "+' style="width:'+i()+";"+"left:0;"+"top:0;"+"height:"+m()+";"+"position:"+(e?"absolute":"fixed")+';"'+' class="'+o+'">'+(e?"<"+"iframe "+'style="position:absolute;'+"left:"+"0"+";"+"top:"+"0"+";"+"background:white;"+"width: expression(this.parentNode.offsetWidth);"+"height: expression(this.parentNode.offsetHeight);"+"filter:alpha(opacity=0);"+'z-index:-1;"></iframe>':"")+"</div>").prependTo("body");n.on("mousedown",function(p){p.preventDefault()});return n}function l(){}l.ATTRS={maskShared:{value:true}};l.prototype={_maskExtShow:function(){var o=this,s,q=k(o),r=a[q],p=o.get("maskShared"),n=o.get("maskNode");if(!n){if(p){if(r){n=r.node}else{n=f(q);r=a[q]={num:0,node:n}}}else{n=f(q)}o.setInternal("maskNode",n)}if(s=o.get("zIndex")){n.css("z-index",s-1)}if(p){r.num++}if(!p||r.num==1){n.show()}h("body").addClass("x-masked-relative")},_maskExtHide:function(){var o=this,q=k(o),r=a[q],p=o.get("maskShared"),n=o.get("maskNode");if(p&&r){r.num=Math.max(r.num-1,0);if(r.num==0){n.hide()}}else{if(n){n.hide()}}h("body").removeClass("x-masked-relative")},__destructor:function(){var o=this,p=o.get("maskShared"),n=o.get("maskNode");if(o.get("maskNode")){if(p){if(o.get("visible")){o._maskExtHide()}}else{n.remove()}}}};function d(){}d.ATTRS={mask:{value:false},maskNode:{view:1},maskShared:{view:1}};d.prototype={__bindUI:function(){var p=this,o=p.get("view"),n=o._maskExtShow,q=o._maskExtHide;if(p.get("mask")){p.on("show",function(){o._maskExtShow()});p.on("hide",function(){o._maskExtHide()})}}};d=d;d.View=l;b.exports=d});define("bui/common/component/uibase/position",["jquery"],function(c,b,d){var f=c("jquery");function e(){}e.ATTRS={x:{valueFn:function(){var g=this;return g.get("el")&&g.get("el").offset().left}},y:{valueFn:function(){var g=this;return g.get("el")&&g.get("el").offset().top}},zIndex:{},visibleMode:{value:"visibility"}};e.prototype={__createDom:function(){this.get("el").addClass(BUI.prefix+"ext-position")},_uiSetZIndex:function(g){this.get("el").css("z-index",g)},_uiSetX:function(g){if(g!=null){this.get("el").offset({left:g})}},_uiSetY:function(g){if(g!=null){this.get("el").offset({top:g})}},_uiSetLeft:function(g){if(g!=null){this.get("el").css({left:g})}},_uiSetTop:function(g){if(g!=null){this.get("el").css({top:g})}}};function a(){}a.ATTRS={x:{view:1},y:{view:1},left:{view:1},top:{view:1},xy:{setter:function(h){var g=this,i=f.makeArray(h);if(i.length){i[0]&&g.set("x",i[0]);i[1]&&g.set("y",i[1])}return h},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{view:true,value:true}};a.prototype={move:function(g,i){var h=this;if(BUI.isArray(g)){i=g[1];g=g[0]}h.set("xy",[g,i]);return h},_uiSetX:function(h){if(h!=null){var g=this,i=g.get("el");g.setInternal("left",i.position().left);if(h!=-999){this.set("cachePosition",null)}}},_uiSetY:function(h){if(h!=null){var g=this,i=g.get("el");g.setInternal("top",i.position().top);if(h!=-999){this.set("cachePosition",null)}}},_uiSetLeft:function(h){var g=this,i=g.get("el");if(h!=null){g.setInternal("x",i.offset().left)}},_uiSetTop:function(h){var g=this,i=g.get("el");if(h!=null){g.setInternal("y",i.offset().top)}}};a.View=e;d.exports=a});define("bui/common/component/uibase/stdmod",["jquery"],function(c,e,b){var g=c("jquery"),d=BUI.prefix+"stdmod-";function i(){}i.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}};i.PARSER={header:function(j){return j.one("."+d+"header")},body:function(j){return j.one("."+d+"body")},footer:function(j){return j.one("."+d+"footer")}};function h(j,l){var m=j.get("contentEl"),k=j.get(l);if(!k){k=g('<div class="'+d+l+'"'+" "+" >"+"</div>");k.appendTo(m);j.setInternal(l,k)}}function f(k,l,j){l=k.get(l);if(BUI.isString(j)){l.html(j)}else{l.html("").append(j)}}i.prototype={__renderUI:function(){h(this,"header");h(this,"body");h(this,"footer")},_uiSetBodyStyle:function(j){this.get("body").css(j)},_uiSetHeaderStyle:function(j){this.get("header").css(j)},_uiSetFooterStyle:function(j){this.get("footer").css(j)},_uiSetBodyContent:function(j){f(this,"body",j)},_uiSetHeaderContent:function(j){f(this,"header",j)},_uiSetFooterContent:function(j){f(this,"footer",j)}};function a(){}a.ATTRS={header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{view:1},footerStyle:{view:1},headerStyle:{view:1},headerContent:{view:1},bodyContent:{view:1},footerContent:{view:1}};a.View=i;b.exports=a});define("bui/common/component/uibase/decorate",["jquery"],function(i,u,a){var e=i("jquery"),n=i("bui/common/array"),d=i("bui/common/json"),q=BUI.prefix,t="data-",r=t+"cfg",o="PARSER",c=i("bui/common/component/manage"),j=/-([a-z])/g,f=/^[\{\[]/;function v(w,y){if(y[w]){return true}var x=new RegExp("^"+t);if(w!==r&&x.test(w)){return true}return false}function m(w){var x=[],y=w.constructor;while(y){x.push(y);y=y.superclass&&y.superclass.constructor}return x}function p(w){return w.toLowerCase().replace(j,function(x,y){return(y+"").toUpperCase()})}function k(x){x=e.trim(x);if(x.toLowerCase()==="false"){x=false}else{if(x.toLowerCase()==="true"){x=true}else{if(f.test(x)){x=d.looseParse(x)}else{if(/\d/.test(x)&&/[^a-z]/i.test(x)){var w=parseFloat(x);if(w+""===x){x=w}}}}}return x}function h(x,w){var y=x.userConfig||{};for(var z in w){if(!(z in y)){x.setInternal(z,w[z])}}}function b(A,B){var x=this,z,w,y=x.userConfig||{};for(z in B){if(!(z in y)){w=B[z];if(BUI.isFunction(w)){x.setInternal(z,w.call(x,A))}else{if(typeof w=="string"){x.setInternal(z,A.find(w))}else{if(BUI.isArray(w)&&w[0]){x.setInternal(z,A.find(w[0]))}}}}}}function s(x,A){var B=x.constructor,w,z,y;y=m(x);for(w=y.length-1;w>=0;w--){B=y[w];if(z=B[o]){b.call(x,A,z)}}}function g(x){var w=x,z=w.get("srcNode"),y,A;if(z){z=e(z);w.setInternal("el",z);w.setInternal("srcNode",z);y=w.get("userConfig");A=w.getDecorateConfig(z);h(x,A);if(w.get("isDecorateChild")&&w.decorateInternal){w.decorateInternal(z)}s(x,z)}}function l(){g(this)}l.ATTRS={srcNode:{view:true},isDecorateChild:{value:false},decorateCfgFields:{value:{"id":true,"name":true,"value":true,"title":true}}};l.prototype={getDecorateConfig:function(z){if(!z.length){return null}var w=this,C=z[0],x=C.attributes,B=w.get("decorateCfgFields"),y={},A=w._getStautsCfg(z);BUI.each(x,function(D){var F=D.nodeName;try{if(F===r){var E=k(D.nodeValue);BUI.mix(y,E)}else{if(v(F,B)){var G=D.nodeValue;if(F.indexOf(t)!==-1){F=F.replace(t,"");F=p(F);G=k(G)}if(y[F]&&BUI.isObject(G)){BUI.mix(y[F],G)}else{y[F]=G}}}}catch(H){BUI.log("parse field error,the attribute is:"+F)}});return BUI.mix(y,A)},_getStautsCfg:function(x){var w=this,z={},y=w.get("statusCls");BUI.each(y,function(B,A){if(x.hasClass(B)){z[A]=true}});return z},getDecorateElments:function(){var w=this,y=w.get("el"),x=w.get("childContainer");if(x){return y.find(x).children()}else{return y.children()}},decorateInternal:function(x){var w=this;w.decorateChildren(x)},findXClassByNode:function(z,B){var w=this,x=z.attr("class")||"",y=w.get("defaultChildClass");x=x.replace(new RegExp("\\b"+q,"ig"),"");var A=c.getConstructorByXClass(x)||c.getConstructorByXClass(y);if(!A&&!B){BUI.log(z);BUI.error("can not find ui "+x+" from this markup")}return c.getXClassByConstructor(A)},decorateChildrenInternal:function(z,y){var w=this,x=w.get("children");x.push({xclass:z,srcNode:y})},decorateChildren:function(y){var w=this,x=w.getDecorateElments();BUI.each(x,function(A){var z=w.findXClassByNode(e(A));w.decorateChildrenInternal(z,e(A))})}};a.exports=l});define("bui/common/component/uibase/tpl",["jquery"],function(c,a,d){var f=c("jquery");function e(){}e.ATTRS={tpl:{},tplEl:{}};e.prototype={__renderUI:function(){var g=this,i=g.get("childContainer"),h;if(i){h=g.get("el").find(i);if(h.length){g.set("contentEl",h)}}},getTpl:function(j){var g=this,i=g.get("tpl"),h=g.get("tplRender");j=j||g.getAttrVals();if(h){return h(j)}if(i){return BUI.substitute(i,j)}return""},setTplContent:function(j){var g=this,k=g.get("el"),l=g.get("content"),h=g.get("tplEl"),i=g.getTpl(j);if(!l&&i){k.empty();k.html(i)}}};function b(){}b.ATTRS={tpl:{view:true,sync:false},tplRender:{view:true,value:null},childContainer:{view:true}};b.prototype={__renderUI:function(){if(!this.get("srcNode")){this.setTplContent()}},updateContent:function(){this.setTplContent()},setTplContent:function(){var g=this,h=g.getAttrVals();g.get("view").setTplContent(h)},_uiSetTpl:function(){this.setTplContent()}};b.View=e;d.exports=b});define("bui/common/component/uibase/childCfg",["jquery"],function(c,a,d){var e=c("jquery");var b=function(f){this._init()};b.ATTRS={defaultChildCfg:{}};b.prototype={_init:function(){var f=this,g=f.get("defaultChildCfg");if(g){f.on("beforeAddChild",function(h){var i=h.child;if(e.isPlainObject(i)){BUI.each(g,function(l,j){if(i[j]==null){i[j]=l}})}})}}};d.exports=b});define("bui/common/component/uibase/bindable",[],function(b,a,c){function d(){}d.ATTRS={store:{},loadMask:{value:false}};BUI.augment(d,{__bindUI:function(){var e=this,f=e.get("store"),g=e.get("loadMask");if(!f){return}f.on("beforeload",function(h){e.onBeforeLoad(h);if(g&&g.show){g.show()}});f.on("load",function(h){e.onLoad(h);if(g&&g.hide){g.hide()}});f.on("exception",function(h){e.onException(h);if(g&&g.hide){g.hide()}});f.on("add",function(h){e.onAdd(h)});f.on("remove",function(h){e.onRemove(h)});f.on("update",function(h){e.onUpdate(h)});f.on("localsort",function(h){e.onLocalSort(h)});f.on("filtered",function(h){e.onFiltered(h)})},__syncUI:function(){var e=this,f=e.get("store");if(!f){return}if(f.hasData()){e.onLoad()}},onBeforeLoad:function(f){},onLoad:function(f){},onException:function(f){},onAdd:function(f){},onRemove:function(f){},onUpdate:function(f){},onLocalSort:function(f){},onFiltered:function(f){}});c.exports=d});define("bui/common/component/uibase/depends",["jquery"],function(d,e,b){var f=d("jquery"),j=/^#(.*):(.*)$/,a=d("bui/common/component/manage");function i(m){var l=j.exec(m),p=l[1],n=l[2],o=h(p);return{source:o,eventType:n}}function g(l,m,q){var r=i(m),p=r.source,n=r.eventType,o;if(p&&q&&n){if(BUI.isFunction(q)){o=q}else{if(BUI.isArray(q)){o=function(){BUI.each(q,function(s){if(l[s]){l[s]()}})}}}}if(o){r.callbak=o;p.on(n,o);return r}return null}function c(o){var n=o.source,l=o.eventType,m=o.callbak;n.off(l,m)}function h(m){var l=a.getComponent(m);if(!l){l=f("#"+m);if(!l.length){l=null}}return l}function k(){}k.ATTRS={depends:{},dependencesMap:{shared:false,value:{}}};k.prototype={__syncUI:function(){this.initDependences()},initDependences:function(){var l=this,m=l.get("depends");BUI.each(m,function(o,n){l.addDependence(n,o)})},addDependence:function(n,o){var m=this,l=m.get("dependencesMap"),p;m.removeDependence(n);p=g(m,n,o);if(p){l[n]=p}},removeDependence:function(n){var m=this,l=m.get("dependencesMap"),o=l[n];if(o){c(o);delete l[n]}},clearDependences:function(){var l=this,m=l.get("dependencesMap");BUI.each(m,function(o,n){c(o)});l.set("dependencesMap",{})},__destructor:function(){this.clearDependences()}};b.exports=k});define("bui/common/component/view",["jquery"],function(e,f,c){var g=e("jquery"),h=window,a=e("bui/common/component/manage"),d=e("bui/common/component/uibase/uibase"),i=document;var b=d.extend([d.TplView],{getComponentCssClassWithState:function(l){var j=this,k=j.get("ksComponentCss");l=l||"";return j.getCssClassWithPrefix(k.split(/\s+/).join(l+" ")+l)},getCssClassWithPrefix:a.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},getStatusCls:function(l){var k=this,m=k.get("statusCls"),j=m[l];if(!j){j=k.getComponentCssClassWithState("-"+l)}return j},renderUI:function(){var j=this;if(!j.get("srcNode")){var l=j.get("render"),k=j.get("el"),m=j.get("elBefore");if(m){k.insertBefore(m,undefined)}else{if(l){k.appendTo(l,undefined)}else{k.appendTo(i.body,undefined)}}}},createDom:function(){var j=this,l=j.get("contentEl"),k=j.get("el");if(!j.get("srcNode")){k=g("<"+j.get("elTagName")+">");if(l){k.append(l)}j.setInternal("el",k)}k.addClass(j.getComponentCssClassWithState());if(!l){j.setInternal("contentEl",k)}},_uiSetHighlighted:function(k){var j=this,l=j.getStatusCls("hover"),m=j.get("el");m[k?"addClass":"removeClass"](l)},_uiSetDisabled:function(k){var j=this,l=j.getStatusCls("disabled"),m=j.get("el");m[k?"addClass":"removeClass"](l).attr("aria-disabled",k);if(k&&j.get("highlighted")){j.set("highlighted",false)}if(j.get("focusable")){j.getKeyEventTarget().attr("tabIndex",k?-1:0)}},_uiSetActive:function(k){var j=this,l=j.getStatusCls("active");j.get("el")[k?"addClass":"removeClass"](l).attr("aria-pressed",!!k)},_uiSetFocused:function(k){var j=this,m=j.get("el"),l=j.getStatusCls("focused");m[k?"addClass":"removeClass"](l)},_uiSetElAttrs:function(j){this.get("el").attr(j)},_uiSetElCls:function(j){this.get("el").addClass(j)},_uiSetElStyle:function(j){this.get("el").css(j)},_uiSetRole:function(j){if(j){this.get("el").attr("role",j)}},_uiSetWidth:function(j){this.get("el").width(j)},_uiSetHeight:function(k){var j=this;j.get("el").height(k)},_uiSetContent:function(l){var j=this,k;if(j.get("srcNode")&&!j.get("rendered")){}else{k=j.get("contentEl");if(typeof l=="string"){k.html(l)}else{if(l){k.empty().append(l)}}}},_uiSetVisible:function(k){var l=this,m=l.get("el"),j=l.get("visibleMode");if(j==="visibility"){m.css("visibility",k?"visible":"hidden")}else{m.css("display",k?"":"none")}},set:function(n,q){var l=this,k=l.__attrs[n],p,o,j;if(!k||!l.get("binded")){b.superclass.set.call(this,n,q);return l}var r=b.superclass.get.call(this,n);if(!g.isPlainObject(q)&&!BUI.isArray(q)&&r===q){return l}b.superclass.set.call(this,n,q);q=l.__attrVals[n];p={attrName:n,prevVal:r,newVal:q};o=BUI.ucfirst(n);j="_uiSet"+o;if(l[j]){l[j](q,p)}return l},destructor:function(){var j=this.get("el");if(j){j.remove()}}},{xclass:"view",priority:0});b.ATTRS={el:{setter:function(j){return g(j)}},elCls:{},elStyle:{},role:{},width:{},height:{},statusCls:{value:{}},elTagName:{value:"div"},elAttrs:{},content:{},elBefore:{},render:{},visible:{value:true},visibleMode:{value:"display"},cachePosition:{},contentEl:{valueFn:function(){return this.get("el")}},prefixCls:{value:BUI.prefix},focusable:{value:true},focused:{},active:{},disabled:{},highlighted:{}};c.exports=b});define("bui/common/component/controller",["jquery"],function(h,j,f){var l=h("jquery"),g=h("bui/common/component/uibase/uibase"),a=h("bui/common/component/manage"),d=h("bui/common/component/view"),c=h("bui/common/component/loader"),o=BUI.wrapBehavior,k=BUI.getWrapBehavior;function m(r){return function(u){var t=this;if(t===u.target){var v=u.newVal,s=t.get("view");if(s){s.set(r,v)}}}}function n(r){return function(u){var t=this,s=t.get("view");return u===undefined?s.get(r):u}}function b(s,v,u){s.create();var t=s.getContentElement(),r=s.get("defaultChildClass");if(!v.xclass&&!(v instanceof i)){if(!v.xtype){v.xclass=r}else{v.xclass=r+"-"+v.xtype}}v=BUI.Component.create(v,s);v.setInternal("parent",s);v.set("render",t);v.set("elBefore",u);v.create(undefined);return v}function e(t){var u,y,x,r={},s,w=t.get("xview");u=t.getAttrs();for(x in u){if(u.hasOwnProperty(x)){y=u[x];if(y.view){if((s=t.get(x))!==undefined){r[x]=s}}}}delete r.autoRender;r.ksComponentCss=p(t);return new w(r)}function p(s){var u=s.constructor,r,t=[];while(u&&u!==i){r=a.getXClassByConstructor(u);if(r){t.push(r)}u=u.superclass&&u.superclass.constructor}return t.join(" ")}function q(t,s){var r=t.relatedTarget;return r&&(r===s[0]||l.contains(s,r))}var i=g.extend([g.Decorate,g.Tpl,g.ChildCfg,g.KeyNav,g.Depends],{isController:true,getCssClassWithPrefix:a.getCssClassWithPrefix,initializer:function(){var s=this;if(!s.get("id")){s.set("id",s.getNextUniqueId())}a.addComponent(s.get("id"),s);var r=e(s);s.setInternal("view",r);s.__view=r},getNextUniqueId:function(){var r=this,s=a.getXClassByConstructor(r.constructor);return BUI.guid(s)},createDom:function(){var s=this,r=s.get("view");r.create(undefined)},renderUI:function(){var s=this,r=s.get("loader");s.get("view").render();s._initChildren();if(r){s.setInternal("loader",r)}},_initChildren:function(t){var r=this,s,t,u;t=t||r.get("children").concat();r.get("children").length=0;for(s=0;s<t.length;s++){u=r.addChild(t[s]);u.render()}},bindUI:function(){var r=this,s=r.get("events");this.on("afterVisibleChange",function(t){this.fire(t.newVal?"show":"hide")});BUI.each(s,function(u,t){r.publish(t,{bubbles:u})})},containsElement:function(v){var s=this,u=s.get("el"),t=s.get("children"),r=false;if(!s.get("rendered")){return false}if(l.contains(u[0],v)||u[0]===v){r=true}else{BUI.each(t,function(w){if(w.containsElement(v)){r=true;return false}})}return r},isChildrenElement:function(t){var r=this,s=r.get("children"),u=false;BUI.each(s,function(v){if(v.containsElement(t)){u=true;return false}});return u},show:function(){var r=this;r.render();r.set("visible",true);return r},hide:function(){var r=this;r.set("visible",false);return r},toggle:function(){this.set("visible",!this.get("visible"));return this},_uiSetFocusable:function(v){var r=this,s,u=r.getKeyEventTarget();if(v){u.attr("tabIndex",0).attr("hideFocus",true).on("focus",o(r,"handleFocus")).on("blur",o(r,"handleBlur")).on("keydown",o(r,"handleKeydown")).on("keyup",o(r,"handleKeyUp"))}else{u.removeAttr("tabIndex");if(s=k(r,"handleFocus")){u.off("focus",s)}if(s=k(r,"handleBlur")){u.off("blur",s)}if(s=k(r,"handleKeydown")){u.off("keydown",s)}if(s=k(r,"handleKeyUp")){u.off("keyup",s)}}},_uiSetHandleMouseEvents:function(v){var r=this,u=r.get("el"),s;if(v){u.on("mouseenter",o(r,"handleMouseEnter")).on("mouseleave",o(r,"handleMouseLeave")).on("contextmenu",o(r,"handleContextMenu")).on("mousedown",o(r,"handleMouseDown")).on("mouseup",o(r,"handleMouseUp")).on("dblclick",o(r,"handleDblClick"))}else{s=k(r,"handleMouseEnter")&&u.off("mouseenter",s);s=k(r,"handleMouseLeave")&&u.off("mouseleave",s);s=k(r,"handleContextMenu")&&u.off("contextmenu",s);s=k(r,"handleMouseDown")&&u.off("mousedown",s);s=k(r,"handleMouseUp")&&u.off("mouseup",s);s=k(r,"handleDblClick")&&u.off("dblclick",s)}},_uiSetFocused:function(r){if(r){this.getKeyEventTarget()[0].focus()}},_uiSetVisible:function(t){var u=this,v=u.get("el"),s=u.get("visibleMode");if(s==="visibility"){if(t){var r=u.get("cachePosition");if(r){u.set("xy",r)}}if(!t){var r=[u.get("x"),u.get("y")];u.set("cachePosition",r);u.set("xy",[-999,-999])}}},_uiSetChildren:function(s){var r=this,t=BUI.cloneObject(s);r._initChildren(t)},enable:function(){this.set("disabled",false);return this},disable:function(){this.set("disabled",true);return this},focus:function(){if(this.get("focusable")){this.set("focused",true)}},getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(v,s){var r=this,t=r.get("children"),u;if(s===undefined){s=t.length}r.fire("beforeAddChild",{child:v,index:s});u=t[s]&&t[s].get("el")||null;v=b(r,v,u);t.splice(s,0,v);if(r.get("rendered")){v.render()}r.fire("afterAddChild",{child:v,index:s});return v},remove:function(s){var r=this,t=r.get("parent");if(t){t.removeChild(r,s)}else{if(s){r.destroy()}}return r},removeChild:function(v,u){var r=this,t=r.get("children"),s=BUI.Array.indexOf(v,t);if(s===-1){return}r.fire("beforeRemoveChild",{child:v,destroy:u});if(s!==-1){t.splice(s,1)}if(u&&v.destroy){v.destroy()}r.fire("afterRemoveChild",{child:v,destroy:u});return v},removeChildren:function(v){var r=this,u,s=[].concat(r.get("children"));for(u=0;u<s.length;u++){r.removeChild(s[u],v)}},getChildAt:function(r){var s=this.get("children");return s[r]||null},getChild:function(s,r){return this.getChildBy(function(t){return t.get("id")===s},r)},getChildBy:function(s,r){return this.getChildrenBy(s,r)[0]||null},getAppendHeight:function(){var r=this.get("el");return r.outerHeight()-r.height()},getAppendWidth:function(){var r=this.get("el");return r.outerWidth()-r.width()},getChildrenBy:function(u,r){var s=this,t=[];if(!u){return t}s.eachChild(function(v){if(u(v)){t.push(v)}else{if(r){t=t.concat(v.getChildrenBy(u,r))}}});return t},eachChild:function(r){BUI.each(this.get("children"),r)},handleDblClick:function(r){this.performActionInternal(r);if(!this.isChildrenElement(r.target)){this.fire("dblclick",{domTarget:r.target,domEvent:r})}},handleMouseOver:function(t){var r=this,s=r.get("el");if(!q(t,s)){r.handleMouseEnter(t)}},handleMouseOut:function(t){var r=this,s=r.get("el");if(!q(t,s)){r.handleMouseLeave(t)}},handleMouseEnter:function(s){var r=this;this.set("highlighted",!!s);r.fire("mouseenter",{domTarget:s.target,domEvent:s})},handleMouseLeave:function(s){var r=this;r.set("active",false);r.set("highlighted",!s);r.fire("mouseleave",{domTarget:s.target,domEvent:s})},handleMouseDown:function(t){var r=this,w,u=l(t.target),v=t["which"]===1,s;if(v){s=r.getKeyEventTarget();if(r.get("activeable")){r.set("active",true)}if(r.get("focusable")){r.setInternal("focused",true)}if(!r.get("allowTextSelection")){w=t.target.nodeName;w=w&&w.toLowerCase();if(w!=="input"&&w!=="textarea"){t.preventDefault()}}if(!r.isChildrenElement(t.target)){r.fire("mousedown",{domTarget:t.target,domEvent:t})}}},handleMouseUp:function(t){var s=this,r=s.isChildrenElement(t.target);if(s.get("active")&&t.which===1){s.performActionInternal(t);s.set("active",false);if(!r){s.fire("click",{domTarget:t.target,domEvent:t})}}if(!r){s.fire("mouseup",{domTarget:t.target,domEvent:t})}},handleContextMenu:function(r){},handleFocus:function(r){this.set("focused",!!r);this.fire("focus",{domEvent:r,domTarget:r.target})},handleBlur:function(r){this.set("focused",!r);this.fire("blur",{domEvent:r,domTarget:r.target})},handleKeyEventInternal:function(t){var s=this,r=s.isChildrenElement(t.target);if(t.which===13){if(!r){s.fire("click",{domTarget:t.target,domEvent:t})}return this.performActionInternal(t)}if(!r){s.fire("keydown",{domTarget:t.target,domEvent:t})}},handleKeydown:function(s){var r=this;if(r.handleKeyEventInternal(s)){s.halt();return true}},handleKeyUp:function(s){var r=this;if(!r.isChildrenElement(s.target)){r.fire("keyup",{domTarget:s.target,domEvent:s})}},performActionInternal:function(r){},destructor:function(){var s=this,v,u,r,t=s.get("children");v=s.get("id");for(u=0;u<t.length;u++){t[u].destroy&&t[u].destroy()}s.get("view").destroy();a.removeComponent(v)},set:function(r,A,s){var x=this,z=x.__view,v=x.__attrs[r],w,y,t;if(BUI.isObject(r)){s=A;BUI.each(r,function(C,B){x.set(B,C,s)})}if(!z||!v||(s&&s.silent)){i.superclass.set.call(this,r,A,s);return x}var u=i.superclass.get.call(this,r);if(!l.isPlainObject(A)&&!BUI.isArray(A)&&u===A){return x}w=BUI.ucfirst(r);t="_uiSet"+w;x.fire("before"+w+"Change",{attrName:r,prevVal:u,newVal:A});x.setInternal(r,A);A=x.__attrVals[r];if(z&&v.view){z.set(r,A)}y={attrName:r,prevVal:u,newVal:A};x.fire("after"+w+"Change",y);if(x.get("binded")&&x[t]){x[t](A,y)}return x},get:function(u){var s=this,t=s.__view,r=s.__attrs[u],v=i.superclass.get.call(this,u);if(v!==undefined){return v}if(t&&r&&r.view){return t.get(u)}return v}},{ATTRS:{content:{view:1},elTagName:{view:true,value:"div"},defaultChildClass:{},xtype:{},id:{view:true},width:{view:1},height:{view:1},elCls:{view:1},elStyle:{view:1},elAttrs:{view:1},elBefore:{view:1},el:{view:1},events:{value:{"click":true,"dblclick":true,"mouseenter":true,"mouseleave":true,"keydown":true,"keyup":true,"focus":false,"blur":false,"mousedown":true,"mouseup":true,"show":false,"hide":false}},render:{view:1},role:{view:1},statusCls:{view:true,value:{}},visibleMode:{view:1,value:"display"},visible:{value:true,view:1},handleMouseEvents:{value:true},focusable:{value:false,view:1},defaultLoaderCfg:{value:{property:"content",autoLoad:true}},loader:{getter:function(t){var r=this,s;if(t&&!t.isLoader){t.target=r;s=r.get("defaultLoaderCfg");t=new c(BUI.merge(s,t));r.setInternal("loader",t)}return t}},allowTextSelection:{value:true},activeable:{value:true},focused:{view:1},active:{view:1},highlighted:{view:1},children:{sync:false,shared:false,value:[]},prefixCls:{value:BUI.prefix,view:1},parent:{setter:function(r){this.addTarget(r)}},disabled:{view:1,value:false},xview:{value:d}},PARSER:{visible:function(u){var s=this,v=u.css("display"),t=u.css("visibility"),r=s.get("visibleMode");if((v=="none"&&r=="display")||(t=="hidden"&&r=="visibility")){return false}return true},disabled:function(t){var r=this,s=r.get("prefixCls")+r.get("xclass")+"-disabled";return t.hasClass(s)}}},{xclass:"controller",priority:0});f.exports=i});define("bui/common/component/loader",["jquery"],function(b,a,d){var e=b("jquery"),f=b("bui/common/util"),c=b("bui/common/base"),g=function(h){g.superclass.constructor.call(this,h);this._init()};g.ATTRS={url:{},target:{},hasLoad:{value:false},autoLoad:{},lazyLoad:{},property:{},renderer:{value:function(h){return h}},loadMask:{value:false},dataType:{value:"text"},ajaxOptions:{value:{type:"get",cache:false}},params:{},appendParams:{},lastParams:{shared:false,value:{}},callback:{},failure:{}};f.extend(g,c);f.augment(g,{isLoader:true,_init:function(){var h=this,i=h.get("autoLoad"),j=h.get("params");h._initMask();if(i){h.load(j)}else{h._initParams();h._initLazyLoad()}},_initLazyLoad:function(){var h=this,j=h.get("target"),i=h.get("lazyLoad");if(j&&i&&i.event){j.on(i.event,function(){if(!h.get("hasLoad")||i.repeat){h.load()}})}},_initMask:function(){var h=this,j=h.get("target"),i=h.get("loadMask");if(j&&i){b.async("bui/mask",function(l){var k=e.isPlainObject(i)?i:{};i=new l.LoadMask(f.mix({el:j.get("el")},k));h.set("loadMask",i)})}},_initParams:function(){var h=this,i=h.get("lastParams"),j=h.get("params");f.mix(i,j)},load:function(m){var h=this,j=h.get("url"),i=h.get("ajaxOptions"),k=h.get("lastParams"),l=h.get("appendParams");m=m||k;m=f.merge(l,m);h.set("lastParams",m);if(!j){return}h.onBeforeLoad();h.set("hasLoad",true);e.ajax(f.mix({dataType:h.get("dataType"),data:m,url:j,success:function(n){h.onload(n,m)},error:function(n,p,o){h.onException({jqXHR:n,textStatus:p,errorThrown:o},m)}},i))},onBeforeLoad:function(){var h=this,i=h.get("loadMask");if(i&&i.show){i.show()}},onload:function(l,n){var h=this,i=h.get("loadMask"),k=h.get("property"),o=h.get("callback"),j=h.get("renderer"),m=h.get("target");if(f.isString(l)){m.set(k,"")}m.set(k,j.call(h,l));if(i&&i.hide){i.hide()}if(o){o.call(this,l,n)}},onException:function(i,k){var h=this,j=h.get("failure");if(j){j.call(this,i,k)}}});d.exports=g});define("bui/data",["bui/common","jquery"],function(b,a,d){var e=b("bui/common"),c=e.namespace("Data");e.mix(c,{Sortable:b("bui/data/sortable"),Proxy:b("bui/data/proxy"),AbstractStore:b("bui/data/abstractstore"),Store:b("bui/data/store"),Node:b("bui/data/node"),TreeStore:b("bui/data/treestore")});d.exports=c});define("bui/data/sortable",[],function(d,a,e){var c="ASC",b="DESC";var f=function(){};f.ATTRS={compareFunction:{value:function(h,g){if(h===undefined){h=""}if(g===undefined){g=""}if(BUI.isString(h)){return h.localeCompare(g)}if(h>g){return 1}else{if(h===g){return 0}else{return -1}}}},sortField:{},sortDirection:{value:"ASC"},sortInfo:{getter:function(){var g=this,h=g.get("sortField");return{field:h,direction:g.get("sortDirection")}},setter:function(h){var g=this;g.set("sortField",h.field);g.set("sortDirection",h.direction)}}};BUI.augment(f,{compare:function(l,k,j,i){var g=this,h;j=j||g.get("sortField");i=i||g.get("sortDirection");if(!j||!i){return 1}h=i===c?1:-1;return g.get("compareFunction")(l[j],k[j])*h},getSortData:function(){},sortData:function(j,i,h){var g=this,h=h||g.getSortData();if(BUI.isArray(j)){h=j;j=null}j=j||g.get("sortField");i=i||g.get("sortDirection");g.set("sortField",j);g.set("sortDirection",i);if(!j||!i){return h}h.sort(function(l,k){return g.compare(l,k,j,i)});return h}});e.exports=f});define("bui/data/proxy",["jquery"],function(c,f,a){var g=c("jquery"),b=c("bui/data/sortable");var h=function(j){h.superclass.constructor.call(this,j)};h.ATTRS={};BUI.extend(h,BUI.Base);BUI.augment(h,{_read:function(j,k){},read:function(l,m,k){var j=this;k=k||j;j._read(l,function(n){m.call(k,n)})},_save:function(j,k,l){},save:function(m,k,n,l){var j=this;l=l||j;j._save(m,k,function(o){n.call(l,o)})}});var d={READ:"read",ADD:"add",UPDATE:"update",REMOVE:"remove",SAVE_ALL:"all"};var i=function(j){i.superclass.constructor.call(this,j)};i.ATTRS=BUI.mix(true,h.ATTRS,{limitParam:{value:"limit"},startParam:{value:"start"},pageIndexParam:{value:"pageIndex"},saveTypeParam:{value:"saveType"},saveDataParam:{},pageStart:{value:0},dataType:{value:"json"},method:{value:"GET"},ajaxOptions:{value:{}},cache:{value:false},save:{},url:{}});BUI.extend(i,h);BUI.augment(i,{_processParams:function(m){var k=this,l=k.get("pageStart"),j=["start","limit","pageIndex"];if(m.pageIndex!=null){m.pageIndex=m.pageIndex+l}BUI.each(j,function(n){var o=k.get(n+"Param");if(o!==n){m[o]=m[n];delete m[n]}})},_getUrl:function(l){var j=this,m=j.get("save"),k;if(l===d.READ){return j.get("url")}if(!m){return j.get("url")}if(BUI.isString(m)){return m}k=m[l+"Url"];if(!k){k=j.get("url")}return k},_getAppendParams:function(k){var j=this,l,m,n=null;if(k==d.READ){return n}l=j.get("save");m=j.get("saveTypeParam");if(l&&!l[k+"Url"]){n={};n[m]=k}return n},_read:function(l,m){var j=this,k;l=BUI.cloneObject(l);j._processParams(l);k=j._getAjaxOptions(d.READ,l);j._ajax(k,m)},_getAjaxOptions:function(n,o){var j=this,l=j.get("ajaxOptions"),m=j._getUrl(n),k;BUI.mix(o,j._getAppendParams(n));k=BUI.merge({url:m,type:j.get("method"),dataType:j.get("dataType"),data:o,cache:j.get("cache")},l);return k},_ajax:function(k,n){var j=this,m=k.success,l=k.error;k.success=function(o){m&&m(o);n(o)};k.error=function(p,r,q){l&&l(p,r,q);var o={exception:{status:r,errorThrown:q,jqXHR:p}};n(o)};g.ajax(k)},_save:function(l,m,n){var j=this,k;k=j._getAjaxOptions(l,m);j._ajax(k,n)}});var e=function(j){e.superclass.constructor.call(this,j)};e.ATTRS={matchFields:{value:[]}};BUI.extend(e,h);BUI.mixin(e,[b]);BUI.augment(e,{_read:function(k,q){var p=this,m=k.pageable,j=k.start,o=k.sortField,r=k.sortDirection,l=k.limit,n=p.get("data"),s=[];n=p._getMatches(k);p.sortData(o,r);if(l){s=n.slice(j,j+l);q({rows:s,results:n.length})}else{s=n.slice(j);q(s)}},_getMatchFn:function(l,k){var j=this;return function(n){var m=true;BUI.each(k,function(o){if(l[o]!=null&&!(l[o]===n[o])){m=false;return false}});return m}},_getMatches:function(n){var j=this,k=j.get("matchFields"),l,m=j.get("data")||[];if(n&&k.length){l=j._getMatchFn(n,k);m=BUI.Array.filter(m,l)}return m},_save:function(l,k,n){var j=this,m=j.get("data");if(l==d.ADD){m.push(k)}else{if(l==d.REMOVE){BUI.Array.remove(m,k)}else{if(l==d.SAVE_ALL){BUI.each(k.add,function(o){m.push(o)});BUI.each(k.remove,function(o){BUI.Array.remove(m,o)})}}}}});h.Ajax=i;h.Memery=e;a.exports=h});define("bui/data/abstractstore",["bui/common","jquery"],function(c,a,d){var e=c("bui/common"),f=c("bui/data/proxy");function b(g){b.superclass.constructor.call(this,g);this._init()}b.ATTRS={autoLoad:{value:false},remoteFilter:{value:false},lastParams:{shared:false,value:{}},params:{},errorProperty:{value:"error"},hasErrorProperty:{value:"hasError"},proxy:{shared:false,value:{}},url:{},events:{value:["acceptchanges","load","beforeload","beforeprocessload","add","exception","remove","update","localsort","filtered"]},data:{setter:function(i){var g=this,h=g.get("proxy");if(h.set){h.set("data",i)}else{h.data=i}g.set("autoLoad",true)}}};e.extend(b,e.Base);e.augment(b,{isStore:true,_init:function(){var g=this;g.beforeInit();g._initParams();g._initProxy();g._initData()},beforeInit:function(){},_initData:function(){var g=this,h=g.get("autoLoad");if(h){g.load()}},_initParams:function(){var g=this,h=g.get("lastParams"),i=g.get("params");e.mix(h,i)},_initProxy:function(){var g=this,h=g.get("url"),i=g.get("proxy");if(!(i instanceof f)){if(h){i.url=h}if(i.type==="ajax"||i.url){i=new f.Ajax(i)}else{i=new f.Memery(i)}g.set("proxy",i)}},load:function(j,k){var g=this,h=g.get("proxy"),i=g.get("lastParams");e.mix(i,g.getAppendParams(),j);g.fire("beforeload",{params:i});j=e.cloneObject(i);h.read(i,function(l){g.onLoad(l,j);if(k){k(l,j)}},g)},onFiltered:function(i,h){var g=this;g.fire("filtered",{data:i,filter:h})},onLoad:function(i,j){var g=this;var h=g.processLoad(i,j);if(h){g.afterProcessLoad(i,j)}},getResult:function(){},filter:function(i){var h=this,j=h.get("remoteFilter"),g;i=i||h.get("filter");if(j){h.load({filter:i})}else{if(i){h.set("filter",i);if(h.getResult().length>0){g=h._filterLocal(i);h.onFiltered(g,i)}}}},_filterLocal:function(g){},getFilterResult:function(){var g=this.get("filter");if(g){return this._filterLocal(g)}else{return this.getResult()}},_clearLocalFilter:function(){this.set("filter",null)},clearFilter:function(){var h=this,i=h.get("remoteFilter"),g;if(i){h.load({filter:""})}else{h._clearLocalFilter();g=h.getFilterResult();h.onFiltered(g,null)}},processLoad:function(i,j){var g=this,h=g.get("hasErrorProperty");g.fire("beforeprocessload",{data:i});g.fire("beforeProcessLoad",i);if(e.getValue(i,h)||i.exception){g.onException(i);return false}return true},afterProcessLoad:function(g,h){},onException:function(h){var g=this,j=g.get("errorProperty"),i={};if(h.exception){i.type="exception";i.error=h.exception}else{i.type="error";i.error=e.getValue(h,j)}g.fire("exception",i)},hasData:function(){},getAppendParams:function(){return{}}});d.exports=b});define("bui/data/store",["jquery","bui/common"],function(c,e,a){var g=c("jquery"),f=c("bui/data/proxy"),k=c("bui/data/abstractstore"),b=c("bui/data/sortable");function h(n,o){if(n<0){return}var m=o,l=m[n];m.splice(n,1);return l}function i(l,n){var m=BUI.Array.indexOf(l,n);if(m>=0){h(m,n)}}function d(l,m){return BUI.Array.indexOf(l,m)!==-1}var j=function(l){j.superclass.constructor.call(this,l)};j.ATTRS={autoSync:{value:false},currentPage:{value:0},deletedRecords:{shared:false,value:[]},matchFunction:{value:function(m,l){return m==l}},modifiedRecords:{shared:false,value:[]},newRecords:{shared:false,value:[]},remoteSort:{value:false},resultMap:{shared:false,value:{}},root:{value:"rows"},rowCount:{value:0},totalProperty:{value:"results"},start:{value:0},pageSize:{}};BUI.extend(j,k);BUI.mixin(j,[b]);BUI.augment(j,{add:function(p,n,m){var l=this,o=l.getCount();l.addAt(p,o,n,m)},addAt:function(p,o,n,m){var l=this;m=m||l._getDefaultMatch();if(!BUI.isArray(p)){p=[p]}g.each(p,function(r,q){if(!n||!l.contains(q,m)){l._addRecord(q,r+o);l.get("newRecords").push(q);i(q,l.get("deletedRecords"));i(q,l.get("modifiedRecords"))}})},contains:function(l,m){return this.findIndexBy(l,m)!==-1},find:function(p,o){var m=this,l=null,n=m.getResult();g.each(n,function(r,q){if(q[p]===o){l=q;return false}});return l},findAll:function(p,o){var m=this,l=[],n=m.getResult();g.each(n,function(r,q){if(q[p]===o){l.push(q)}});return l},findByIndex:function(l){return this.getResult()[l]},findIndexBy:function(p,o){var m=this,l=-1,n=m.getResult();o=o||m._getDefaultMatch();if(p===null||p===undefined){return -1}g.each(n,function(r,q){if(o(p,q)){l=r;return false}});return l},findNextRecord:function(m){var l=this,n=l.findIndexBy(m);if(n>=0){return l.findByIndex(n+1)}return},getCount:function(){return this.getResult().length},getTotalCount:function(){var l=this,n=l.get("resultMap"),o=l.get("totalProperty"),m=BUI.getValue(n,o);return parseInt(m,10)||0},getResult:function(){var l=this,n=l.get("resultMap"),m=l.get("root");return BUI.getValue(n,m)},hasData:function(){return this.getCount()!==0},setResult:function(n){var l=this,m=l.get("proxy");if(m instanceof f.Memery){l.set("data",n);l.load({start:0})}else{l._setResult(n);if(l.get("filter")){l.filter()}}},remove:function(n,m){var l=this,o=[];m=m||l._getDefaultMatch();if(!BUI.isArray(n)){n=[n]}g.each(n,function(q,r){var q=l.findIndexBy(r,m),p=h(q,l.getResult());if(!d(p,l.get("newRecords"))&&!d(p,l.get("deletedRecords"))){l.get("deletedRecords").push(p)}i(p,l.get("newRecords"));i(p,l.get("modifiedRecords"));l.fire("remove",{record:p})})},save:function(o,m,p){var l=this,n=l.get("proxy");if(BUI.isFunction(o)){p=o;o=undefined}if(BUI.isObject(o)){p=m;m=o;o=undefined}if(!o){o=l._getSaveType(m)}if(o=="all"&&!m){m=l._getDirtyData()}l.fire("beforesave",{type:o,saveData:m});n.save(o,m,function(q){l.onSave(o,m,q);if(p){p(q,m)}},l)},_getSaveType:function(m){var l=this;if(!m){return"all"}if(BUI.Array.contains(m,l.get("newRecords"))){return"add"}if(BUI.Array.contains(m,l.get("modifiedRecords"))){return"update"}if(BUI.Array.contains(m,l.get("deletedRecords"))){return"remove"}return"custom"},_getDirtyData:function(){var l=this,m=l.get("proxy");if(m.get("url")){return{add:BUI.JSON.stringify(l.get("newRecords")),update:BUI.JSON.stringify(l.get("modifiedRecords")),remove:BUI.JSON.stringify(l.get("deletedRecords"))}}else{return{add:l.get("newRecords"),update:l.get("modifiedRecords"),remove:l.get("deletedRecords")}}},onSave:function(n,m,p){var l=this,o=l.get("hasErrorProperty");if(BUI.getValue(p,o)||p.exception){l.onException(p);return}l._clearDirty(n,m);l.fire("saved",{type:n,saveData:m,data:p});if(l.get("autoSync")){l.load()}},_clearDirty:function(o,m){var l=this;switch(o){case"all":l._clearChanges();break;case"add":n(m,"newRecords");break;case"update":n(m,"modifiedRecords");break;case"remove":n(m,"deletedRecords");break;default:break}function n(q,p){BUI.Array.remove(l.get(p),q)}},sort:function(n,m){var l=this,o=l.get("remoteSort");if(!o){l._localSort(n,m)}else{l.set("sortField",n);l.set("sortDirection",m);l.load(l.get("sortInfo"))}},sum:function(p,o){var l=this,m=o||l.getResult(),n=0;BUI.each(m,function(q){var r=q[p];if(!isNaN(r)){n+=parseFloat(r)}});return n},setValue:function(p,o,n){var m=p,l=this;m[o]=n;if(!d(m,l.get("newRecords"))&&!d(m,l.get("modifiedRecords"))){l.get("modifiedRecords").push(m)}l.fire("update",{record:m,field:o,value:n})},update:function(q,p,o){var m=q,l=this,o=null,n=null;if(p){o=o||l._getDefaultMatch();n=l.findIndexBy(q,o);if(n>=0){m=l.getResult()[n]}}m=BUI.mix(m,q);if(!d(m,l.get("newRecords"))&&!d(m,l.get("modifiedRecords"))){l.get("modifiedRecords").push(m)}l.fire("update",{record:m})},_addRecord:function(l,n){var m=this.getResult();if(n==undefined){n=m.length}m.splice(n,0,l);this.fire("add",{record:l,index:n})},_clearChanges:function(){var l=this;BUI.Array.empty(l.get("newRecords"));BUI.Array.empty(l.get("modifiedRecords"));BUI.Array.empty(l.get("deletedRecords"))},_filterLocal:function(m,n){var l=this,o=[];n=n||l.getResult();if(!m){return n}BUI.each(n,function(p){if(m(p)){o.push(p)}});return o},_getDefaultMatch:function(){return this.get("matchFunction")},_getPageParams:function(){var m=this,o=m.get("sortInfo"),p=m.get("start"),n=m.get("pageSize"),l=m.get("pageIndex")||(n?p/n:0);params={start:p,limit:n,pageIndex:l};if(m.get("remoteSort")){BUI.mix(params,o)}return params},getAppendParams:function(){return this._getPageParams()},beforeInit:function(){this._setResult([])},_localSort:function(n,m){var l=this;l._sortData(n,m);l.fire("localsort",{field:n,direction:m})},_sortData:function(o,n,m){var l=this;m=m||l.getResult();l.sortData(o,n,m)},afterProcessLoad:function(o,q){var l=this,n=l.get("root"),r=q.start,m=q.limit,p=l.get("totalProperty");if(BUI.isArray(o)){l._setResult(o)}else{l._setResult(BUI.getValue(o,n),BUI.getValue(o,p))}l.set("start",r);if(m){l.set("pageIndex",r/m)}if(!l.get("remoteSort")){l._sortData()}l.fire("load",{params:q});if(!l.get("remoteFilter")&&l.get("filter")){l.filter(l.get("filter"))}},_setResult:function(o,m){var l=this,n=l.get("resultMap");m=m||o.length;BUI.setValue(n,l.get("root"),o);BUI.setValue(n,l.get("totalProperty"),m);l._clearChanges()}});a.exports=j});define("bui/data/node",["bui/common","jquery"],function(c,a,d){var f=c("bui/common");function e(g,h){var i={};if(h){f.each(g,function(l,j){var m=h[j]||j;i[m]=l});i.record=g}else{i=g}return i}function b(h,i){var g=this;h=e(h,i);f.mix(this,h)}f.augment(b,{root:false,leaf:null,text:"",id:null,loaded:false,path:null,parent:null,level:0,record:null,children:null,isNode:true});d.exports=b});define("bui/data/treestore",["bui/common","jquery"],function(d,a,e){var g=d("bui/common"),c=d("bui/data/node"),h=d("bui/data/proxy"),b=d("bui/data/abstractstore");function f(i){f.superclass.constructor.call(this,i)}f.ATTRS={root:{},map:{},pidField:{},dataProperty:{value:"nodes"},events:{value:["add","update","remove","load"]}};g.extend(f,b);g.augment(f,{beforeInit:function(){this.initRoot()},_initData:function(){var i=this,k=i.get("autoLoad"),m=i.get("pidField"),l=i.get("proxy"),j=i.get("root");if(!l.get("url")&&m){l.get("matchFields").push(m)}if(k&&!j.children){i.loadNode(j)}},initRoot:function(){var i=this,k=i.get("map"),j=i.get("root");if(!j){j={}}if(!j.isNode){j=new c(j,k)}j.path=[j.id];j.level=0;if(j.children){i.setChildren(j,j.children)}i.set("root",j)},add:function(l,k,j){var i=this;l=i._add(l,k,j);i.fire("add",{node:l,record:l,index:j});return l},_add:function(n,m,k){m=m||this.get("root");var i=this,o=i.get("map"),j=m.children,l;if(!n.isNode){n=new c(n,o)}l=n.children||[];if(l.length==0&&n.leaf==null){n.leaf=true}if(m){m.leaf=false}n.parent=m;n.level=m.level+1;n.path=m.path.concat(n.id);k=k==null?m.children.length:k;g.Array.addAt(j,n,k);i.setChildren(n,l);return n},remove:function(k){var j=k.parent||_self.get("root"),i=g.Array.indexOf(k,j.children);g.Array.remove(j.children,k);if(j.children.length===0){j.leaf=true}this.fire("remove",{node:k,record:k,index:i});k.parent=null;return k},setValue:function(j,l,k){var i=this;j[l]=k;i.fire("update",{node:j,record:j,field:l,value:k})},update:function(i){this.fire("update",{node:i,record:i})},getResult:function(){return this.get("root").children},setResult:function(l){var i=this,k=i.get("proxy"),j=i.get("root");if(k instanceof h.Memery){i.set("data",l);i.load({id:j.id})}else{i.setChildren(j,l)}},setChildren:function(k,j){var i=this;k.children=[];if(!j.length){return}g.each(j,function(l){i._add(l,k)})},findNode:function(k,j,i){return this.findNodeBy(function(l){return l.id===k},j,i)},findNodeBy:function(n,m,k){var i=this;k=k==null?true:k;if(!m){var j=i.get("root");if(n(j)){return j}return i.findNodeBy(n,j)}var l=m.children,o=null;g.each(l,function(p){if(n(p)){o=p}else{if(k){o=i.findNodeBy(n,p)}}if(o){return false}});return o},findNodesBy:function(l,k){var i=this,j,m=[];if(!k){k=i.get("root")}g.each(k.children,function(n){if(l(n)){m.push(n)}m=m.concat(i.findNodesBy(l,n))});return m},findNodeByPath:function(p){if(!p){return null}var j=this,k=j.get("root"),o=p.split(","),n,m,l=o[0];if(!l){return null}if(k.id==l){n=k}else{n=j.findNode(l,k,false)}if(!n){return}for(m=1;m<o.length;m=m+1){var l=o[m];n=j.findNode(l,n,false);if(!n){break}}return n},contains:function(l,k){var i=this,j=i.findNode(l.id,k);return !!j},afterProcessLoad:function(m,n){var i=this,k=i.get("pidField"),o=n.id||n[k],j=i.get("dataProperty"),l=i.findNode(o)||i.get("root");if(g.isArray(m)){i.setChildren(l,m)}else{i.setChildren(l,g.getValue(m,j))}l.loaded=true;i.fire("load",{node:l,params:n})},hasData:function(){return this.get("root").children&&this.get("root").children.length!==0},isLoaded:function(j){var i=this.get("root");if(j==i&&!i.children){return false}if(!this.get("url")&&!this.get("pidField")){return true}return j.loaded||j.leaf||!!(j.children&&j.children.length)},loadNode:function(k,l){var i=this,j=i.get("pidField"),m;if(!l&&i.isLoaded(k)){return}m={id:k.id};if(j){m[j]=k.id}i.load(m)},reloadNode:function(j){var i=this;j=j||i.get("root");j.loaded=false;i.loadNode(j,true)},loadPath:function(k){var j=this,i=k.split(","),l=i[0];if(j.findNodeByPath(k)){return}j.load({id:l,path:k})}});e.exports=f});define("bui/list",["bui/common","jquery","bui/data"],function(b,a,d){var e=b("bui/common"),c=e.namespace("List");e.mix(c,{List:b("bui/list/list"),ListItem:b("bui/list/listitem"),SimpleList:b("bui/list/simplelist"),Listbox:b("bui/list/listbox")});e.mix(c,{ListItemView:c.ListItem.View,SimpleListView:c.SimpleList.View});d.exports=c});define("bui/list/list",["jquery","bui/common"],function(c,a,d){var g=c("jquery"),h=c("bui/common"),b=h.Component,f=b.UIBase;var e=b.Controller.extend([f.ChildList],{},{ATTRS:{elTagName:{view:true,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"list-item"}}},{xclass:"list"});d.exports=e});define("bui/list/listitem",["jquery","bui/common"],function(c,d,a){var e=c("jquery"),f=c("bui/common"),h=f.Component,b=h.UIBase;var g=h.View.extend([b.ListItemView],{});var i=h.Controller.extend([b.ListItem],{},{ATTRS:{elTagName:{view:true,value:"li"},xview:{value:g},tpl:{view:true,value:"<span>{text}</span>"}}},{xclass:"list-item"});i.View=g;a.exports=i});define("bui/list/simplelist",["jquery","bui/common","bui/data"],function(f,i,c){var j=f("jquery"),k=f("bui/common"),e=k.Component.UIBase,l=k.UA,h=f("bui/list/domlist"),m=f("bui/list/keynav"),b=f("bui/list/sortable"),a=k.prefix+"list-item";var g=k.Component.View.extend([h.View],{setElementHover:function(o,p){var n=this;n.setItemStatusCls("hover",o,p)}},{ATTRS:{itemContainer:{valueFn:function(){return this.get("el").find(this.get("listSelector"))}}}},{xclass:"simple-list-view"});var d=k.Component.Controller.extend([h,e.Bindable,m,b],{bindUI:function(){var n=this,p=n.get("itemCls"),o=n.get("view").getItemContainer();o.delegate("."+p,"mouseover",function(s){if(n.get("disabled")){return}var q=s.currentTarget,r=n.getItemByElement(q);if(n.isItemDisabled(s.item,s.currentTarget)){return}if(!(l.ie&&l.ie<8)&&n.get("focusable")&&n.get("highlightedStatus")==="hover"){n.setHighlighted(r,q)}else{n.setItemStatus(r,"hover",true,q)}}).delegate("."+p,"mouseout",function(r){if(n.get("disabled")){return}var q=j(r.currentTarget);n.get("view").setElementHover(q,false)})},onAdd:function(q){var n=this,o=n.get("store"),p=q.record;if(n.getCount()==0){n.setItems(o.getResult())}else{n.addItemToView(p,q.index)}},handleContextMenu:function(r){var o=this,t=r.target,s=o.get("itemCls"),p=j(t).closest("."+s),q=o.getItemByElement(p);var n=o.fire("itemcontextmenu",{element:p,item:q,pageX:r.pageX,pageY:r.pageY,domTarget:r.target,domEvent:r});if(n===false){r.preventDefault()}},onRemove:function(p){var n=this,o=p.record;n.removeItem(o)},onUpdate:function(n){this.updateItem(n.record)},onLocalSort:function(n){if(this.get("frontSortable")){this.sort(n.field,n.direction)}else{this.onLoad(n)}},onLoad:function(){var n=this,p=n.get("store"),o=p.getResult();n.set("items",o)},onFiltered:function(p){var n=this,o=p.data;n.set("items",o)}},{ATTRS:{frontSortable:{value:false},focusable:{value:false},items:{view:true,value:[]},itemCls:{view:true,value:a},idField:{value:"value"},listSelector:{view:true,value:"ul"},itemTpl:{view:true,value:'<li role="option" class="'+a+'">{text}</li>'},tpl:{value:"<ul></ul>"},xview:{value:g}}},{xclass:"simple-list",prority:0});d.View=g;c.exports=d});define("bui/list/domlist",["jquery","bui/common"],function(c,e,a){var f=c("jquery"),g=c("bui/common"),l=g.Component.UIBase.Selection,j="data-",k=g.Component.UIBase.List;function b(p,o){var n=o,q=n.get("itemCls"),m=n.get("itemStatusCls");if(m&&m[p]){return m[p]}return q+"-"+p}var d=function(){};d.ATTRS={items:{}};d.prototype={clearControl:function(){var m=this,o=m.getItemContainer(),n=m.get("itemCls");o.find("."+n).remove()},addItem:function(n,m){return this._createItem(n,m)},getItems:function(){var m=this,n=m.getAllElements(),o=[];g.each(n,function(p){o.push(m.getItemByElement(p))});return o},updateItem:function(r){var m=this,n=m.getItems(),p=g.Array.indexOf(r,n),q=null,o;if(p>=0){q=m.findElement(r);o=m.getItemTpl(r,p);if(q){f(q).html(f(o).html())}}return q},removeItem:function(n,m){m=m||this.findElement(n);f(m).remove()},getItemContainer:function(){var m=this.get("itemContainer");if(m.length){return m}return this.get("el")},getItemTpl:function(p,n){var m=this,o=m.get("itemTplRender"),q=m.get("itemTpl");if(o){return o(p,n)}return g.substitute(q,p)},_createItem:function(t,p){var s=this,o=s.getItemContainer(),m=s.get("itemCls"),u=s.get("dataField"),q=s.getItemTpl(t,p),n=f(q);if(p!==undefined){var r=o.find("."+m)[p];if(r){n.insertBefore(r)}else{n.appendTo(o)}}else{n.appendTo(o)}n.addClass(m);n.data(u,t);return n},getItemStatusCls:function(m){return b(m,this)},setItemStatusCls:function(o,p,q){var m=this,n=m.getItemStatusCls(o),r=q?"addClass":"removeClass";if(p){f(p)[r](n)}},hasStatus:function(o,p){var m=this,n=m.getItemStatusCls(o);return f(p).hasClass(n)},setItemSelected:function(p,o,n){var m=this;n=n||m.findElement(p);m.setItemStatusCls("selected",n,o)},getAllElements:function(){var m=this,o=m.get("itemCls"),n=m.get("el");return n.find("."+o)},getItemByElement:function(n){var m=this,o=m.get("dataField");return f(n).data(o)},getFirstElementByStatus:function(o){var m=this,n=m.getItemStatusCls(o),p=m.get("el");return p.find("."+n)[0]},getElementsByStatus:function(o){var m=this,n=m.getItemStatusCls(o),p=m.get("el");return p.find("."+n)},getSelectedElements:function(){var m=this,n=m.getItemStatusCls("selected"),o=m.get("el");return o.find("."+n)},findElement:function(o){var n=this,p=n.getAllElements(),m=null;g.each(p,function(q){if(n.getItemByElement(q)==o){m=q;return false}});return m},isElementSelected:function(o){var m=this,n=m.getItemStatusCls("selected");return o&&f(o).hasClass(n)}};function i(o,m){var n=o.attributes,q=m.get("itemStatusFields"),p={};g.each(n,function(r){var s=r.nodeName;if(s.indexOf(j)!==-1){s=s.replace(j,"");p[s]=r.nodeValue}});p.text=f(o).text();g.each(q,function(t,s){var r=b(s,m);if(f(o).hasClass(r)){p[t]=true}});return p}var h=function(){};h.ATTRS=g.merge(true,k.ATTRS,l.ATTRS,{dataField:{view:true,value:"data-item"},itemContainer:{view:true},itemStatusFields:{value:{}},itemCls:{view:true},cancelSelected:{value:false},textGetter:{},defaultLoaderCfg:{value:{property:"items",dataType:"json"}},events:{value:{"itemrendered":true,"itemremoved":true,"itemupdated":true,"itemsshow":false,"beforeitemsshow":false,"itemsclear":false,"itemdblclick":false,"beforeitemsclear":false}}});h.PARSER={items:function(n){var m=this,r=[],p=m.get("itemCls"),q=m.get("dataField"),o=n.find("."+p);if(!o.length){o=n.children();o.addClass(p)}g.each(o,function(s){var t=i(s,m);r.push(t);f(s).data(q,t)});return r}};g.augment(h,k,l,{_uiSetItems:function(n){var m=this;if(m.get("srcNode")&&!m.get("rendered")){return}this.setItems(n)},__bindUI:function(){var m=this,n=m.get("selectedEvent"),q=m.get("itemCls"),p=m.get("view").getItemContainer();p.delegate("."+q,"click",function(t){if(m.get("disabled")){return}var r=f(t.currentTarget),s=m.getItemByElement(r);if(m.isItemDisabled(s,r)){return}var u=m.fire("itemclick",{item:s,element:r[0],domTarget:t.target,domEvent:t});if(u!==false&&n=="click"&&m.isItemSelectable(s)){o(s,r)}});if(n!=="click"){p.delegate("."+q,n,function(t){if(m.get("disabled")){return}var r=f(t.currentTarget),s=m.getItemByElement(r);if(m.isItemDisabled(s,r)){return}if(m.isItemSelectable(s)){o(s,r)}})}p.delegate("."+q,"dblclick",function(t){if(m.get("disabled")){return}var r=f(t.currentTarget),s=m.getItemByElement(r);if(m.isItemDisabled(s,r)){return}m.fire("itemdblclick",{item:s,element:r[0],domTarget:t.target})});function o(u,t){var s=m.get("multipleSelect"),r;r=m.isItemSelected(u,t);if(!r){if(!s){m.clearSelected()}m.setItemSelected(u,true,t)}else{if(s){m.setItemSelected(u,false,t)}else{if(m.get("cancelSelected")){m.setSelected(null)}}}}m.on("itemrendered itemupdated",function(t){var s=t.item,r=t.element;m._syncItemStatus(s,r)})},getValueByField:function(m,n){return m&&m[n]},_syncItemStatus:function(o,n){var m=this,p=m.get("itemStatusFields");g.each(p,function(r,q){if(o[r]!=null){m.get("view").setItemStatusCls(q,n,o[r])}})},getStatusValue:function(o,n){var m=this,q=m.get("itemStatusFields"),p=q[n];return o[p]},getCount:function(){var m=this.getItems();return m?m.length:0},getStatusField:function(n){var m=this,o=m.get("itemStatusFields");return o[n]},setStatusValue:function(o,n,p){var m=this,r=m.get("itemStatusFields"),q=r[n];if(q){o[q]=p}},getItemText:function(n){var m=this,o=m.get("textGetter");if(!n){return""}if(o){return o(n)}else{return f(m.findElement(n)).text()}},removeItem:function(q){var m=this,n=m.get("items"),p=m.findElement(q),o;o=g.Array.indexOf(q,n);if(o!==-1){n.splice(o,1)}m.get("view").removeItem(q,p);m.fire("itemremoved",{item:q,domTarget:f(p)[0],element:p})},addItemAt:function(p,o){var m=this,n=m.get("items");if(o===undefined){o=n.length}n.splice(o,0,p);m.addItemToView(p,o);return p},addItemToView:function(p,n){var m=this,o=m.get("view").addItem(p,n);m.fire("itemrendered",{item:p,domTarget:f(o)[0],element:o});return o},updateItem:function(o){var m=this,n=m.get("view").updateItem(o);m.fire("itemupdated",{item:o,domTarget:f(n)[0],element:n})},setItems:function(n){var m=this;if(n!=m.getItems()){m.setInternal("items",n)}m.clearControl();m.fire("beforeitemsshow");g.each(n,function(p,o){m.addItemToView(p,o)});m.fire("itemsshow")},getItems:function(){return this.get("items")},getItemByElement:function(m){return this.get("view").getItemByElement(m)},getSelected:function(){var m=this,n=m.get("view").getFirstElementByStatus("selected");return m.getItemByElement(n)||null},getItemsByStatus:function(n){var m=this,o=m.get("view").getElementsByStatus(n),p=[];g.each(o,function(q){p.push(m.getItemByElement(q))});return p},findElement:function(n){var m=this;if(g.isString(n)){n=m.getItem(n)}return this.get("view").findElement(n)},findItemByField:function(q,p){var n=this,o=n.get("items"),m=null;g.each(o,function(r){if(r[q]!=null&&r[q]==p){m=r;return false}});return m},setItemSelectedStatus:function(p,o,n){var m=this;n=n||m.findElement(p);m.setItemStatus(p,"selected",o,n)},setAllSelection:function(){var m=this,n=m.getItems();m.setSelection(n)},isItemSelected:function(o,n){var m=this;n=n||m.findElement(o);return m.get("view").isElementSelected(n)},isItemDisabled:function(n,m){return this.hasStatus(n,"disabled",m)},setItemDisabled:function(o,n){var m=this;m.setItemStatus(o,"disabled",n)},getSelection:function(){var m=this,n=m.get("view").getSelectedElements(),o=[];g.each(n,function(p){o.push(m.getItemByElement(p))});return o},clearControl:function(){this.fire("beforeitemsclear");this.get("view").clearControl();this.fire("itemsclear")},hasStatus:function(p,n,o){if(!p){return false}var m=this,q=m.getStatusField(n);o=o||m.findElement(p);return m.get("view").hasStatus(n,o)},setItemStatus:function(p,n,q,o){var m=this;if(p){o=o||m.findElement(p)}if(!m.isItemDisabled(p,o)||n==="disabled"){if(p){if(n==="disabled"&&q){m.clearItemStatus(p)}m.setStatusValue(p,n,q);m.get("view").setItemStatusCls(n,o,q);m.fire("itemstatuschange",{item:p,status:n,value:q,element:o})}if(n==="selected"){m.afterSelected(p,q,o)}}},clearItemStatus:function(p,n,o){var m=this,q=m.get("itemStatusFields");o=o||m.findElement(p);if(n){m.setItemStatus(p,n,false,o)}else{g.each(q,function(s,r){m.setItemStatus(p,r,false,o)});if(!q["selected"]){m.setItemSelected(p,false)}m.setItemStatus(p,"hover",false)}}});h.View=d;a.exports=h});define("bui/list/keynav",["jquery","bui/common"],function(b,a,c){var d=b("jquery"),e=b("bui/common"),f=function(){};f.ATTRS={highlightedStatus:{value:"hover"}};e.augment(f,{setHighlighted:function(k,i){if(this.hasStatus(k,"hover",i)){return}var g=this,l=g.get("highlightedStatus"),j=g._getHighLightedElement(),h=j?g.getItemByElement(j):null;if(h!==k){if(h){this.setItemStatus(h,l,false,j)}this.setItemStatus(k,l,true,i);g._scrollToItem(k,i)}},_getHighLightedElement:function(){var g=this,i=g.get("highlightedStatus"),h=g.get("view").getFirstElementByStatus(i);return h},getHighlighted:function(){var g=this,i=g.get("highlightedStatus"),h=g.get("view").getFirstElementByStatus(i);return g.getItemByElement(h)||null},getColumnCount:function(){var g=this,j=g.getFirstItem(),h=g.findElement(j),i=d(h);if(h){return parseInt(i.parent().width()/i.outerWidth(),10)}return 1},getRowCount:function(h){var g=this;h=h||g.getColumnCount();return(this.getCount()+h-1)/h},_getNextItem:function(i,m,l){var h=this,k=h._getCurrentIndex(),n=h.getCount(),j=i?1:-1,g;if(k===-1){return i?h.getFirstItem():h.getLastItem()}if(!i){m=m*j}g=(k+m+l)%l;if(g>n-1){if(i){g=g-(n-1)}else{g=g+m}}return h.getItemAt(g)},_getLeftItem:function(){var g=this,i=g.getCount(),h=g.getColumnCount();if(!i||h<=1){return null}return g._getNextItem(false,1,i)},_getCurrentItem:function(){return this.getHighlighted()},_getCurrentIndex:function(){var g=this,h=g._getCurrentItem();return this.indexOfItem(h)},_getRightItem:function(){var g=this,i=g.getCount(),h=g.getColumnCount();if(!i||h<=1){return null}return this._getNextItem(true,1,i)},_getDownItem:function(){var g=this,h=g.getColumnCount(),i=g.getRowCount(h);if(i<=1){return null}return this._getNextItem(true,h,h*i)},getScrollContainer:function(){return this.get("el")},isScrollVertical:function(){var g=this,i=g.get("el"),h=g.get("view").getItemContainer();return i.height()<h.height()},_scrollToItem:function(p,j){var l=this;if(l.isScrollVertical()){j=j||l.findElement(p);var h=l.getScrollContainer(),m=d(j).position().top,o=h.position().top,k=h.height(),g=m-o,n=d(j).height(),i=h.scrollTop();if(g<0||g>k-n){h.scrollTop(i+g)}}},_getUpperItem:function(){var g=this,h=g.getColumnCount(),i=g.getRowCount(h);if(i<=1){return null}return this._getNextItem(false,h,h*i)},handleNavUp:function(i){var g=this,h=g._getUpperItem();g.setHighlighted(h)},handleNavDown:function(g){this.setHighlighted(this._getDownItem())},handleNavLeft:function(g){this.setHighlighted(this._getLeftItem())},handleNavRight:function(g){this.setHighlighted(this._getRightItem())},handleNavEnter:function(i){var g=this,j=g._getCurrentItem(),h;if(j){h=g.findElement(j);d(h).trigger("click")}},handleNavEsc:function(g){this.setHighlighted(null)},handleNavTab:function(g){this.setHighlighted(this._getRightItem())}});c.exports=f});define("bui/list/sortable",["jquery","bui/common","bui/data"],function(c,b,d){var f=c("jquery"),g=c("bui/common"),e=c("bui/data").Sortable;var a=function(){};a.ATTRS=g.merge(true,e.ATTRS,{});g.augment(a,e,{compare:function(m,l,k,j){var h=this,i;k=k||h.get("sortField");j=j||h.get("sortDirection");if(!k||!j){return 1}i=j==="ASC"?1:-1;if(!f.isPlainObject(m)){m=h.getItemByElement(m)}if(!f.isPlainObject(l)){l=h.getItemByElement(l)}return h.get("compareFunction")(m[k],l[k])*i},getSortData:function(){return f.makeArray(this.get("view").getAllElements())},sort:function(k,j){var h=this,l=h.sortData(k,j),i=h.get("view").getItemContainer();if(!h.get("store")){h.sortData(k,j,h.get("items"))}g.each(l,function(m){f(m).appendTo(i)})}});d.exports=a});define("bui/list/listbox",["jquery","bui/common","bui/data"],function(c,b,d){var f=c("jquery"),e=c("bui/list/simplelist");var a=e.extend({bindUI:function(){var g=this;g.on("selectedchange",function(k){var i=k.item,h=f(k.domTarget),j=h.find("input");if(i){j.attr("checked",k.selected)}})}},{ATTRS:{itemTpl:{value:'<li><span class="x-checkbox"></span>{text}</li>'},multipleSelect:{value:true}}},{xclass:"listbox"});d.exports=a});define("bui/menu",["bui/common","jquery"],function(b,a,c){var e=b("bui/common"),d=e.namespace("Menu");e.mix(d,{Menu:b("bui/menu/menu"),MenuItem:b("bui/menu/menuitem"),ContextMenu:b("bui/menu/contextmenu"),PopMenu:b("bui/menu/popmenu"),SideMenu:b("bui/menu/sidemenu")});d.ContextMenuItem=d.ContextMenu.Item;c.exports=d});define("bui/menu/menu",["bui/common","jquery"],function(c,a,d){var g=c("bui/common"),b=g.Component,f=b.UIBase;var e=b.Controller.extend([f.ChildList],{bindUI:function(){var h=this;h.on("click",function(k){var j=k.target,i=h.get("multipleSelect");if(h!=j){if(!i&&h.get("clickHide")&&!j.get("subMenu")){h.getTopAutoHideMenu().hide()}}});h.on("afterOpenChange",function(j){var k=j.target,l=j.newVal,i=h.get("children");if(l){g.each(i,function(m){if(m!==k&&m.get("open")){m.set("open",false)}})}});h.on("afterVisibleChange",function(j){var k=j.newVal,i=h.get("parentMenu");h._clearOpen()})},getTopAutoHideMenu:function(){var h=this,i=h.get("parentMenu"),j;if(i&&i.get("autoHide")){return i.getTopAutoHideMenu()}if(h.get("autoHide")){return h}return null},_clearOpen:function(){var h=this,i=h.get("children");g.each(i,function(j){if(j.set){j.set("open",false)}})},findItemById:function(h){return this.findItemByField("id",h)},_uiSetSelectedItem:function(h){if(h){_self.setSelected(h)}}},{ATTRS:{elTagName:{view:true,value:"ul"},idField:{value:"id"},isDecorateChild:{value:true},defaultChildClass:{value:"menu-item"},selectedItem:{},parentMenu:{}}},{xclass:"menu",priority:0});d.exports=e});define("bui/menu/menuitem",["jquery","bui/common"],function(d,f,b){var g=d("jquery"),k=d("bui/common"),n=k.Component,c=n.UIBase,i=k.prefix,l=i+"menu-item-open",m="x-caret",j=i+"menu-item-collapsed",o="data-id";var e=n.View.extend([c.ListItemView,c.CollapsableView],{_uiSetOpen:function(r){var p=this,q=p.getStatusCls("open");if(r){p.get("el").addClass(q)}else{p.get("el").removeClass(q)}}},{ATTRS:{}},{xclass:"menu-item-view"});var a=n.Controller.extend([c.ListItem,c.Collapsable],{renderUI:function(){var p=this,r=p.get("el"),s=p.get("id"),q=null;if(!s){s=k.guid("menu-item");p.set("id",s)}r.attr(o,s)},handleMouseEnter:function(q){var p=this;if(this.get("subMenu")&&this.get("openable")){this.set("open",true)}a.superclass.handleMouseEnter.call(this,q)},handleMouseLeave:function(s){if(this.get("openable")){var p=this,r=p.get("subMenu"),q=s.toElement||s.relatedTarget;if(q&&r&&r.containsElement(q)){p.set("open",true)}else{p.set("open",false)}}a.superclass.handleMouseLeave.call(this,s)},containsElement:function(s){var p=this,q,r=a.superclass.containsElement.call(p,s);if(!r){q=p.get("subMenu");r=q&&q.containsElement(s)}return r},_uiSetOpen:function(s){if(this.get("openable")){var p=this,r=p.get("subMenu"),t=p.get("subMenuAlign");if(r){if(s){t.node=p.get("el");r.set("align",t);r.show()}else{var q=r.get("align");if(!q||q.node==p.get("el")){r.hide()}}}}},_uiSetSubMenu:function(q){if(q){var p=this,s=p.get("el"),r=p.get("parent");if(!q.get("parentMenu")){q.set("parentMenu",r);if(r.get("autoHide")){if(r.get("autoHideType")=="click"){q.set("autoHide",false)}else{q.set("autoHideType","leave")}}}g(p.get("arrowTpl")).appendTo(s)}},destructor:function(){var p=this,q=p.get("subMenu");if(q){q.destroy()}}},{ATTRS:{elTagName:{value:"li"},xview:{value:e},open:{view:true,value:false},openable:{value:true},subMenu:{view:true},subMenuAlign:{valueFn:function(p){return{points:["tr","tl"],offset:[-5,0]}}},arrowTpl:{value:'<span class="'+m+" "+m+'-left"></span>'},events:{value:{"afterOpenChange":true}},subMenuType:{value:"pop-menu"}},PARSER:{subMenu:function(s){var p=s.find("ul"),r=this.get("subMenuType"),q;if(p&&p.length){q=k.Component.create({srcNode:p,xclass:r});if(r=="pop-menu"){p.appendTo("body");q.setInternal({autoHide:true,autoHideType:"leave"})}else{this.get("children").push(q)}}return q}}},{xclass:"menu-item",priority:0});var h=a.extend({},{ATTRS:{focusable:{value:false},selectable:{value:false},handleMouseEvents:{value:false}}},{xclass:"menu-item-sparator"});a.View=e;a.Separator=h;b.exports=a});define("bui/menu/contextmenu",["bui/common","jquery"],function(e,h,b){var k=e("bui/common"),l=e("bui/menu/menuitem"),c=e("bui/menu/popmenu"),i=k.prefix,f=i+"menu-item-link",a=i+"menu-item-icon",m=k.Component,d=m.UIBase;var j=l.extend({bindUI:function(){var n=this;n.get("el").delegate("."+f,"click",function(o){o.preventDefault()})},_uiSetIconCls:function(p,r){var o=this,q=r.prevVal,n=o.get("el").find("."+a);n.removeClass(q);n.addClass(p)}},{ATTRS:{text:{veiw:true,value:""},iconCls:{sync:false,value:""},tpl:{value:'<a class="'+f+'" href="#">      <span class="'+a+' {iconCls}"></span><span class="'+i+'menu-item-text">{text}</span></a>'}}},{xclass:"context-menu-item"});var g=c.extend({},{ATTRS:{defaultChildClass:{value:"context-menu-item"},align:{value:null}}},{xclass:"context-menu"});g.Item=j;b.exports=g});define("bui/menu/popmenu",["bui/common","jquery"],function(c,a,d){var h=c("bui/common"),g=h.Component.UIBase,f=c("bui/menu/menu");var b=h.Component.View.extend([g.PositionView],{});var e=f.extend([g.Position,g.Align,g.AutoShow,g.AutoHide],{},{ATTRS:{clickHide:{value:true},align:{value:{points:["bl","tl"],offset:[0,0]}},visibleMode:{value:"visibility"},autoHide:{value:true},visible:{value:false},xview:{value:b}}},{xclass:"pop-menu"});d.exports=e});define("bui/menu/sidemenu",["jquery","bui/common"],function(b,c,a){var d=b("jquery"),f=b("bui/common"),e=b("bui/menu/menu"),j=f.Component,g=f.prefix+"menu-title",h="menu-leaf";var i=e.extend({initializer:function(){var k=this,l=k.get("items"),m=k.get("children");f.each(l,function(n){var o=k._initMenuCfg(n);m.push(o)})},bindUI:function(){var k=this,l=k.get("children");f.each(l,function(m){var n=m.get("children")[0];if(n){n.publish("click",{bubbles:1})}});k.get("el").delegate("a","click",function(m){m.preventDefault()});k.on("itemclick",function(o){var n=o.item,m=d(o.domTarget).closest("."+k.get("collapsedCls"));if(m.length){var p=n.get("collapsed");n.set("collapsed",!p)}else{if(n.get("el").hasClass(h)){k.fire("menuclick",{item:n});k.clearSelection();k.setSelected(n)}}})},getItems:function(){var k=this,l=[],m=k.get("children");f.each(m,function(n){var o=n.get("children")[0];l=l.concat(o.get("children"))});return l},_initMenuCfg:function(o){var k=this,n=o.items,m=[],l={selectable:false,children:[{xclass:"menu",children:m}]};f.mix(l,{xclass:"menu-item",elCls:"menu-second"},o);f.each(n,function(q){var p=k._initSubMenuCfg(q);m.push(p)});return l},_initSubMenuCfg:function(m){var k=this,l={xclass:"menu-item",elCls:"menu-leaf",tpl:k.get("subMenuItemTpl")};return f.mix(l,m)}},{ATTRS:{defaultChildCfg:{value:{subMenuType:"menu",openable:false,arrowTpl:""}},autoInitItems:{value:false},itemTpl:{value:'<div class="'+g+'"><s></s><span class="'+g+'-text">{text}</span></div>'},subMenuItemTpl:{value:'<a href="{href}"><em>{text}</em></a>'},collapsedCls:{value:g},events:{value:{"menuclick":false}}}},{xclass:"side-menu"});a.exports=i});define("bui/tab",["bui/common","jquery","bui/menu"],function(c,b,d){var e=c("bui/common"),a=e.namespace("Tab");e.mix(a,{Tab:c("bui/tab/tab"),TabItem:c("bui/tab/tabitem"),NavTabItem:c("bui/tab/navtabitem"),NavTab:c("bui/tab/navtab"),TabPanel:c("bui/tab/tabpanel"),TabPanelItem:c("bui/tab/tabpanelitem")});d.exports=a});define("bui/tab/tab",["bui/common","jquery"],function(c,a,d){var g=c("bui/common"),b=g.Component,f=b.UIBase;var e=b.Controller.extend([f.ChildList],{},{ATTRS:{elTagName:{view:true,value:"ul"},defaultChildClass:{value:"tab-item"}}},{xclass:"tab"});d.exports=e});define("bui/tab/tabitem",["bui/common","jquery"],function(c,a,d){var h=c("bui/common"),b=h.Component,g=b.UIBase;var e=b.View.extend([g.ListItemView],{},{xclass:"tab-item-view"});var f=b.Controller.extend([g.ListItem],{},{ATTRS:{elTagName:{view:true,value:"li"},xview:{value:e},tpl:{view:true,value:'<span class="bui-tab-item-text">{text}</span>'}}},{xclass:"tab-item"});f.View=e;d.exports=f});define("bui/tab/navtabitem",["jquery","bui/common"],function(f,h,d){var i=f("jquery"),k=f("bui/common"),l=k.Component,m="tab-item-title",c="tab-item-close",e="tab-item-inner",a="tab-nav-actived",j="tab-content";var g=l.View.extend({renderUI:function(){var n=this,o=n.get("tabContentContainer"),q=n.get("tabContentTpl");if(o){var p=i(q).appendTo(o);n.set("tabContentEl",p)}},_uiSetHref:function(n){this._setHref(n)},_setHref:function(o){var n=this,p=n.get("tabContentEl");o=o||n.get("href");if(p){i("iframe",p).attr("src",o)}},resetHref:function(){this._setHref()},_uiSetTitle:function(o){var n=this,p=n.get("el");i("."+m,p).html(o)},_uiSetActived:function(o){var n=this,p=n.get("el");n.setTabContentVisible(o);if(o){p.addClass(a)}else{p.removeClass(a)}},destructor:function(){var n=this,o=n.get("tabContentEl");if(o){o.remove()}},setTabContentVisible:function(o){var n=this,p=n.get("tabContentEl");if(p){if(o){p.show()}else{p.hide()}}}},{ATTRS:{tabContentContainer:{},tabContentEl:{},title:{},href:{}}});var b=l.Controller.extend({createDom:function(){var n=this,o=n.get("parent");if(o){n.set("tabContentContainer",o.getTabContentContainer())}},bindUI:function(){var n=this,p=n.get("el"),o=n.get("events");p.on("click",function(r){var q=i(r.target);if(q.hasClass(c)){if(n.fire("closing")!==false){n.close()}}})},handleDblClick:function(o){var n=this;if(n.get("closeable")&&n.fire("closing")!==false){n.close()}n.fire("dblclick",{domTarget:o.target,domEvent:o})},handleContextMenu:function(n){n.preventDefault();this.fire("showmenu",{position:{x:n.pageX,y:n.pageY}})},setTitle:function(n){this.set("title",n)},close:function(){this.fire("closed")},reload:function(){this.get("view").resetHref()},show:function(){var n=this;n.get("el").show(500,function(){n.set("visible",true)})},hide:function(o){var n=this;this.get("el").hide(500,function(){n.set("visible",false);o&&o()})},_uiSetActived:function(o){var n=this,p=n.get("parent");if(p&&o){p._setItemActived(n)}},_uiSetCloseable:function(o){var n=this,p=n.get("el"),q=p.find("."+c);if(o){q.show()}else{q.hide()}}},{ATTRS:{elTagName:{value:"li"},actived:{view:true,value:false},closeable:{value:true},allowTextSelection:{view:false,value:false},events:{value:{"click":true,"closing":true,"closed":true,"showmenu":true,"afterVisibleChange":true}},tabContentContainer:{view:true},tabContentTpl:{view:true,value:'<div class="'+j+'" style="display:none;"><iframe src="" width="100%" height="100%" frameborder="0"></iframe></div>'},href:{view:true,value:""},visible:{view:true,value:true},title:{view:true,value:""},tpl:{view:true,value:'<s class="l"></s><div class="'+e+'">{icon}<span class="'+m+'"></span><s class="'+c+'"></s></div><s class="r"></s>'},xview:{value:g}}},{xclass:"nav-tab-item",priority:0});b.View=g;d.exports=b});define("bui/tab/navtab",["bui/common","jquery","bui/menu"],function(b,e,a){var j=b("bui/common"),g=b("bui/menu"),m=j.Component,h="tab-nav-list",d="arrow-left",c="arrow-right",l=j.prefix+"tab-force",f="m_close",i=140;var n=m.View.extend({renderUI:function(){var o=this,p=o.get("el"),q=null;q=p.find("."+h);o.setInternal("listEl",q)},getContentElement:function(){return this.get("listEl")},getTabContentContainer:function(){return this.get("el").find(".tab-content-container")},_uiSetHeight:function(q){var o=this,r=o.get("el"),p=r.find(".tab-nav-bar"),s=o.getTabContentContainer();if(q){s.height(q-p.height())}r.height(q)},_uiSetForceFit:function(p){var o=this,q=o.get("el");if(p){q.addClass(l)}else{q.removeClass(l)}}},{ATTRS:{forceFit:{}}},{xclass:"nav-tab-view",priority:0});var k=m.Controller.extend({addTab:function(p,s){var o=this,u=p.id||j.guid("tab-item"),q=o.get("forceFit"),r=o.getItemById(u);if(r){var t=false;if(p.href&&r.get("href")!=p.href){r.set("href",p.href);t=true}o._setItemActived(r);if(s&&!t){r.reload()}}else{p=j.mix({id:u,visible:false,actived:true,xclass:"nav-tab-item"},p);r=o.addChild(p);if(q){o.forceFit()}r.show();o._resetItemList()}return r},getTabContentContainer:function(){return this.get("view").getTabContentContainer()},bindUI:function(){var o=this,p=o.get("forceFit");if(!p){o._bindScrollEvent();o.on("afterVisibleChange",function(r){var q=r.target;if(q.get("actived")){o._scrollToItem(q)}})}o.on("click",function(r){var q=r.target;if(q!=o){o._setItemActived(q);o.fire("itemclick",{item:q})}});o.on("closed",function(r){var q=r.target;o._closeItem(q)});o.on("showmenu",function(q){o._showMenu(q.target,q.position)})},_bindScrollEvent:function(){var o=this,p=o.get("el");p.find(".arrow-left").on("click",function(){if(p.hasClass(d+"-active")){o._scrollLeft()}});p.find(".arrow-right").on("click",function(){if(p.hasClass(c+"-active")){o._scrllRight()}})},_showMenu:function(q,p){var o=this,t=o._getMenu(),s=q.get("closeable"),r;o.set("showMenuItem",q);t.set("xy",[p.x,p.y]);t.show();r=t.getItem(f);if(r){r.set("disabled",!s)}},setActived:function(q){var o=this,p=o.getItemById(q);o._setItemActived(p)},getActivedItem:function(){var p=this,q=p.get("children"),o=null;j.each(q,function(r){if(r.get("actived")){o=r;return false}});return o},getItemById:function(r){var p=this,q=p.get("children"),o=null;j.each(q,function(s){if(s.get("id")===r){o=s;return false}});return o},_getMenu:function(){var o=this;return o.get("menu")||o._initMenu()},_initMenu:function(){var o=this,p=new g.ContextMenu({children:[{xclass:"context-menu-item",iconCls:"icon icon-refresh",text:"刷新",listeners:{"click":function(){var q=o.get("showMenuItem");if(q){q.reload()}}}},{id:f,xclass:"context-menu-item",iconCls:"icon icon-remove",text:"关闭",listeners:{"click":function(){var q=o.get("showMenuItem");if(q){q.close()}}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"关闭其他",listeners:{"click":function(){var q=o.get("showMenuItem");if(q){o.closeOther(q)}}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"关闭所有",listeners:{"click":function(){o.closeAll()}}}]});o.set("menu",p);return p},_closeItem:function(s){var q=this,r=q._getIndex(s),p=q.getActivedItem(),t=q.get("preItem")||q._getItemByIndex(r-1),o=q._getItemByIndex(r+1);s.hide(function(){q.removeChild(s,true);q._resetItemList();if(p===s){if(t){q._setItemActived(t)}else{q._setItemActived(o)}}else{q._scrollToItem(p)}q.forceFit()})},closeAll:function(){var o=this,p=o.get("children");j.each(p,function(q){if(q.get("closeable")){q.close()}})},closeOther:function(q){var o=this,p=o.get("children");j.each(p,function(r){if(q!==r){r.close()}})},_getItemByIndex:function(p){var o=this,q=o.get("children");return q[p]},_getIndex:function(q){var o=this,p=o.get("children");return j.Array.indexOf(q,p)},_resetItemList:function(){if(this.get("forceFit")){return}var o=this,p=o.getContentElement();p.width(o._getTotalWidth())},_getTotalWidth:function(){var o=this,p=o.get("children");return p.length*o.get("itemWidth")+p.length*6},_getForceItemWidth:function(){var p=this,r=p.getContentElement().width(),q=p.get("children"),o=p._getTotalWidth(),s=p.get(s);if(o>r){s=r/q.length}return s},forceFit:function(){var o=this;o._forceItemWidth(o._getForceItemWidth())},_forceItemWidth:function(q){q=q||this.get("itemWidth");var o=this,p=o.get("children");j.each(p,function(r){r.set("width",q)})},_scrollToItem:function(u){if(this.get("forceFit")){return}var p=this,r=p.getContentElement(),o=r.position(),t=p._getDistanceToEnd(u,r,o),s=p._getDistanceToBegin(u,o);if(r.width()<r.parent().width()){p._scrollTo(r,0)}else{if(s<0){p._scrollTo(r,o.left-(s))}else{if(t>0){p._scrollTo(r,o.left+(t)*-1)}else{if(o.left<0){var q=p._getLastDistance(r,o),v=0;if(q<0){v=o.left-q;v=v<0?v:0;p._scrollTo(r,v)}}}}}},_getDistanceToBegin:function(q,p){var o=q.get("el").position();return o.left+p.left},_getDistanceToEnd:function(t,q,p){var o=this,q=q||o.getContentElement(),s=q.parent().width(),p=p||q.position(),u=o._getDistanceToBegin(t,p),r=u+o.get("itemWidth")-s;return r},_getLastDistance:function(q,p){var o=this,r=o.get("children"),s=r[r.length-1];if(s){return o._getDistanceToEnd(s,q,p)}return 0},_scrollTo:function(p,q,r){var o=this;p.animate({left:q},500,function(){o._setArrowStatus(p)})},_scrollLeft:function(){var p=this,q=p.getContentElement(),o=q.position(),r=p._getLastDistance(q,o),s;if(r>0){s=r>p.get("itemWidth")?p.get("itemWidth"):r;p._scrollTo(q,o.left-s)}},_scrllRight:function(){var p=this,q=p.getContentElement(),o=q.position(),r;if(o.left<0){r=o.left+p.get("itemWidth");r=r<0?r:0;p._scrollTo(q,r)}},_setArrowStatus:function(r,q){r=r||this.getContentElement();var p=this,t=p.get("el"),o=q||r.position(),s=p._getLastDistance(r,q);if(o.left<0){t.addClass(c+"-active")}else{t.removeClass(c+"-active")}if(s>0){t.addClass(d+"-active")}else{t.removeClass(d+"-active")}},_setItemActived:function(q){var o=this,p=o.getActivedItem();if(q===p){return}if(p){p.set("actived",false)}o.set("preItem",p);if(q){if(!q.get("actived")){q.set("actived",true)}if(q.get("visible")){o._scrollToItem(q)}o.fire("activeChange",{item:q});o.fire("activedchange",{item:q})}}},{ATTRS:{defaultChildClass:{value:"nav-tab-item"},menu:{},forceFit:{view:true,value:false},itemWidth:{value:i},tpl:{view:true,value:'<div class="tab-nav-bar">'+'<s class="tab-nav-arrow arrow-left"></s><div class="tab-nav-wrapper"><div class="tab-nav-inner"><ul class="'+h+'"></ul></div></div><s class="tab-nav-arrow arrow-right"></s>'+"</div>"+'<div class="tab-content-container"></div>'},xview:{value:n},events:{value:{"itemclick":false,activedchange:false}}}},{xclass:"nav-tab",priority:0});a.exports=k});define("bui/tab/tabpanel",["bui/common","jquery"],function(d,c,e){var f=d("bui/common"),a=d("bui/tab/tab"),b=d("bui/tab/panels");var g=a.extend([b],{bindUI:function(){var h=this;h.on("beforeclosed",function(j){var i=j.target;h._beforeClosedItem(i)})},_beforeClosedItem:function(l){if(!l.get("selected")){return}var i=this,j=i.indexOfItem(l),k=i.getItemCount(),m,h;if(j!==k-1){h=i.getItemAt(j+1);i.setSelected(h)}else{if(j!==0){m=i.getItemAt(j-1);i.setSelected(m)}}}},{ATTRS:{elTagName:{value:"div"},childContainer:{value:"ul"},tpl:{value:'<div class="tab-panel-inner"><ul></ul><div class="tab-panels"></div></div>'},panelTpl:{value:"<div></div>"},panelContainer:{value:".tab-panels"},defaultChildClass:{value:"tab-panel-item"}}},{xclass:"tab-panel"});e.exports=g});define("bui/tab/panels",["jquery"],function(c,b,d){var e=c("jquery");var a=function(){};a.ATTRS={panelTpl:{},panelContainer:{},panelCls:{}};BUI.augment(a,{__renderUI:function(){var f=this,h=f.get("children"),i=f._initPanelContainer(),j=f.get("panelCls"),g=j?i.find("."+g):i.children();BUI.each(h,function(m,l){var k=g[l];f._initPanelItem(m,k)})},__bindUI:function(){var f=this;f.on("beforeAddChild",function(h){var g=h.child;f._initPanelItem(g)})},_initPanelContainer:function(){var f=this,g=f.get("panelContainer");if(g&&BUI.isString(g)){if(g.indexOf("#")==0){g=e(g)}else{g=f.get("el").find(g)}f.setInternal("panelContainer",g)}return g},_initPanelItem:function(h,g){var f=this;if(h.set){if(!h.get("panel")){g=g||f._getPanel(h.get("userConfig"));h.set("panel",g)}}else{if(!h.panel){g=g||f._getPanel(h);h.panel=g}}},_getPanel:function(h){var f=this,g=f.get("panelContainer"),i=BUI.substitute(f.get("panelTpl"),h);return e(i).appendTo(g)}});d.exports=a});define("bui/tab/tabpanelitem",["bui/common","jquery"],function(c,d,a){var e=c("bui/common"),b=c("bui/tab/tabitem"),g=c("bui/tab/panelitem"),h="bui-tab-item-text",i=e.Component;var f=b.View.extend([i.UIBase.Close.View],{_uiSetTitle:function(m){var k=this,n=k.get("el"),l=n.find("."+h);l.text(m)}},{xclass:"tab-panel-item-view"});var j=b.extend([g,i.UIBase.Close],{},{ATTRS:{closeAction:{value:"remove"},title:{view:true,sync:false},tpl:{value:'<span class="'+h+'">{text}{title}</span>'},closeable:{value:false},events:{value:{beforeclosed:true}},xview:{value:f}}},{xclass:"tab-panel-item"});j.View=f;a.exports=j});define("bui/tab/panelitem",["jquery"],function(c,b,d){var e=c("jquery");var a=function(){};a.ATTRS={panel:{},panelContent:{},panelVisibleStatus:{value:"selected"},defaultLoaderCfg:{valueFn:function(){var f=this,g=f._getVisibleEvent();return{property:"panelContent",autoLoad:false,lazyLoad:{event:g},loadMask:{el:f.get("panel")}}}},panelDestroyable:{value:true}};BUI.augment(a,{__renderUI:function(){this._resetPanelVisible()},__bindUI:function(){var f=this,g=f._getVisibleEvent();f.on(g,function(h){f._setPanelVisible(h.newVal)})},_resetPanelVisible:function(){var f=this,g=f.get("panelVisibleStatus"),h=f.get(g);f._setPanelVisible(h)},_getVisibleEvent:function(){var f=this,g=f.get("panelVisibleStatus");return"after"+BUI.ucfirst(g)+"Change"},_setPanelVisible:function(h){var f=this,g=f.get("panel"),i=h?"show":"hide";if(g){e(g)[i]()}},__destructor:function(){var f=this,g=f.get("panel");if(g&&f.get("panelDestroyable")){e(g).remove()}},_setPanelContent:function(f,g){var h=e(f);e(f).html(g)},_uiSetPanelContent:function(h){var f=this,g=f.get("panel");f._setPanelContent(g,h)},_uiSetPanel:function(g){var f=this,h=f.get("panelContent");if(h){f._setPanelContent(g,h)}f._resetPanelVisible()}});d.exports=a});define("bui/mask",["bui/common","jquery"],function(b,a,c){var d=b("bui/common"),e=b("bui/mask/mask");e.LoadMask=b("bui/mask/loadMask");c.exports=e});define("bui/mask/mask",["jquery","bui/common"],function(c,e,a){var f=c("jquery"),g=c("bui/common"),d=g.namespace("Mask"),h=g.UA,b=g.prefix+"ext-mask",i=b+"-msg";g.mix(d,{maskElement:function(m,k,n){var s=f(m),j=s.children("."+b),o=null,q=null,r=null,l=null;if(!j.length){j=f('<div class="'+b+'"></div>').appendTo(s);s.addClass("x-masked-relative x-masked");if(m=="body"){if(h.ie==6){j.height(g.docHeight())}else{j.css("position","fixed")}}else{if(h.ie===6){j.height(s.height())}}if(k){o=['<div class="'+i+'"><div>',k,"</div></div>"].join("");q=f(o).appendTo(s);if(n){q.addClass(n)}try{if(m=="body"&&h.ie!=6){r="50%",l="50%";q.css("position","fixed")}else{r=(j.height()-q.height())/2;l=(j.width()-q.width())/2}q.css({left:l,top:r})}catch(p){g.log("mask error occurred")}}}return j},unmaskElement:function(l){var j=f(l),k=j.children("."+i),m=j.children("."+b);if(k){k.remove()}if(m){m.remove()}j.removeClass("x-masked-relative x-masked")}});a.exports=d});define("bui/mask/loadMask",["jquery","bui/common"],function(b,a,c){var e=b("jquery"),f=b("bui/mask/mask");function d(h){var g=this;d.superclass.constructor.call(g,h)}BUI.extend(d,BUI.Base);d.ATTRS={el:{},msg:{value:"Loading..."},msgCls:{value:"x-mask-loading"},disabled:{value:false}};BUI.augment(d,{disable:function(){this.set("disabled",true)},onLoad:function(){f.unmaskElement(this.get("el"))},onBeforeLoad:function(){var g=this;if(!g.get("disabled")){f.maskElement(g.get("el"),g.get("msg"),this.get("msgCls"))}},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){this.hide();this.clearAttrVals();this.off()}});c.exports=d});define("bui/overlay",["bui/common","jquery"],function(c,b,d){var e=c("bui/common"),a=e.namespace("Overlay");e.mix(a,{Overlay:c("bui/overlay/overlay"),Dialog:c("bui/overlay/dialog"),Message:c("bui/overlay/message")});e.mix(a,{OverlayView:a.Overlay.View,DialogView:a.Dialog.View});e.Message=e.Overlay.Message;d.exports=a});define("bui/overlay/overlay",["jquery","bui/common"],function(c,e,a){var f=c("jquery"),h=c("bui/common"),j=h.Component,i="x-align-arrow",b=j.UIBase;var g=j.View.extend([b.PositionView,b.CloseView]);var d=j.Controller.extend([b.Position,b.Align,b.Close,b.AutoShow,b.AutoHide],{renderUI:function(){var k=this,m=k.get("el"),n=k.get("arrowContainer"),l=n?m.one(n):m;if(k.get("showArrow")){f(k.get("arrowTpl")).appendTo(l)}},show:function(){var l=this,o=l.get("effect"),n=l.get("el"),k=l.get("visibleMode"),m=o.effect,p=o.duration;if(!l.get("rendered")){l.set("visible",true);l.render();l.set("visible",false);n=l.get("el")}if(k==="visibility"){l.set("visible",true);n.css({display:"none"})}switch(m){case"linear":n.show(p,q);break;case"fade":n.fadeIn(p,q);break;case"slide":n.slideDown(p,q);break;default:q();break}function q(){if(k==="visibility"){n.css({display:"block"})}else{l.set("visible",true)}if(o.callback){o.callback.call(l)}var s=l.get("autoHideDelay"),r=l.get("delayHandler");if(s){r&&clearTimeout(r);r=setTimeout(function(){l.hide();l.set("delayHandler",null)},s);l.set("delayHandler",r)}}},hide:function(){var k=this,n=k.get("effect"),m=k.get("el"),l=n.effect,o=n.duration;switch(l){case"linear":m.hide(o,p);break;case"fade":m.fadeOut(o,p);break;case"slide":m.slideUp(o,p);break;default:p();break}function p(){if(k.get("visibleMode")==="visibility"){m.css({display:"block"})}k.set("visible",false);if(n.callback){n.callback.call(k)}}}},{ATTRS:{effect:{value:{effect:"none",duration:0,callback:null}},autoHideDelay:{},closeable:{value:false},showArrow:{value:false},arrowContainer:{view:true},arrowTpl:{value:'<s class="'+i+'"><s class="'+i+'-inner"></s></s>'},visibleMode:{value:"visibility"},visible:{value:false},xview:{value:g}}},{xclass:"overlay"});d.View=g;a.exports=d});define("bui/overlay/dialog",["jquery","bui/common"],function(d,e,b){var f=d("jquery"),a=d("bui/overlay/overlay"),c=BUI.Component.UIBase,j="header-title",g=BUI.prefix,i=20;var k=a.View.extend([c.StdModView,c.MaskView],{getContentElement:function(){return this.get("body")},_uiSetTitle:function(m){var l=this,n=l.get("el");n.find("."+j).html(m)},_uiSetContentId:function(n){var m=this,l=m.get("body"),o=f("#"+n).children();o.appendTo(l)},_uiSetHeight:function(n){var m=this,o=n,q=m.get("header"),l=m.get("body"),p=m.get("footer");o-=q.outerHeight()+p.outerHeight();o-=i*2;l.height(o)},_removeContent:function(){var m=this,l=m.get("body"),n=m.get("contentId");if(n){l.children().appendTo(f("#"+n))}else{l.children().remove()}}},{xclass:"dialog-view"});var h=a.extend([c.StdMod,c.Mask,c.Drag],{show:function(){var l=this;align=l.get("align");h.superclass.show.call(this);l.set("align",align)},bindUI:function(){var l=this;l.on("closeclick",function(){return l.onCancel()})},onCancel:function(){var l=this,m=l.get("cancel");return m.call(this)},_uiSetButtons:function(m){var l=this,n=l.get("footer");n.children().remove();BUI.each(m,function(o){l._createButton(o,n)})},_createButton:function(n,p){var l=this,m='<button class="'+n.elCls+'">'+n.text+"</button>",o=f(m).appendTo(p);o.on("click",function(){n.handler.call(l,l,this)})},destructor:function(){var m=this,o=m.get("contentId"),l=m.get("body"),n=m.get("closeAction");if(n=="destroy"){m.hide();if(o){l.children().appendTo("#"+o)}}}},{ATTRS:{closeTpl:{view:true,value:'<a tabindex="0" href=javascript:void("关闭") role="button" class="'+g+'ext-close" style=""><span class="'+g+'ext-close-x x-icon x-icon-normal">×</span></a>'},buttons:{value:[{text:"确定",elCls:"button button-primary",handler:function(){var l=this,m=l.get("success");if(m){m.call(l)}}},{text:"取消",elCls:"button button-primary",handler:function(m,l){if(this.onCancel()!==false){this.close()}}}]},contentId:{view:true},success:{value:function(){this.close()}},cancel:{value:function(){}},dragNode:{valueFn:function(){return this.get("header")}},defaultLoaderCfg:{valueFn:function(){var l=this;return{property:"bodyContent",autoLoad:false,lazyLoad:{event:"show"},loadMask:{el:l.get("body")}}}},title:{view:true,value:""},align:{value:{node:window,points:["cc","cc"]}},mask:{value:true},maskShared:{value:false},headerContent:{value:'<div class="'+j+'">标题</div>'},footerContent:{},closeable:{value:true},xview:{value:k}}},{xclass:"dialog"});h.View=k;b.exports=h});define("bui/overlay/message",["jquery","bui/common"],function(b,c,a){var e=b("jquery"),k=b("bui/overlay/dialog"),g=BUI.prefix,j={info:"i",error:"×",success:'<i class="icon-ok icon-white"></i>',question:"?",warning:"!"};var o=k.extend({renderUI:function(){this._setContent()},bindUI:function(){var q=this,p=q.get("body");q.on("afterVisibleChange",function(r){if(r.newVal){if(BUI.UA.ie<8){var s=p.outerWidth();if(BUI.UA.ie==6){s=s>350?350:s}q.get("header").width(s-20);q.get("footer").width(s)}}})},_setContent:function(){var q=this,p=q.get("body"),r=BUI.substitute(q.get("contentTpl"),{msg:q.get("msg"),iconTpl:q.get("iconTpl")});p.empty();e(r).appendTo(p)},_uiSetIcon:function(p){if(!this.get("rendered")){return}this._setContent()},_uiSetMsg:function(p){if(!this.get("rendered")){return}this._setContent()}},{ATTRS:{icon:{},msg:{},iconTpl:{getter:function(){var p=this,q=p.get("icon");return'<div class="x-icon x-icon-'+q+'">'+j[q]+"</div>"}},contentTpl:{value:'{iconTpl}<div class="'+g+'message-content">{msg}</div>'}}},{xclass:"message",priority:0});var i;function f(p,q){return function(s,t,r){if(BUI.isString(t)){r=t;t=null}r=r||q;t=t||h;m({"buttons":p,"icon":r,"msg":s,"success":t});return i}}function m(p){if(!i){i=new o({icon:"info",title:""})}i.set(p);i.show()}function n(){var p=this,q=p.get("success");if(q){q.call(p);p.hide()}}function h(){this.hide()}var d=f([{text:"确定",elCls:"button button-primary",handler:n}],"info"),l=f([{text:"确定",elCls:"button button-primary",handler:n},{text:"取消",elCls:"button",handler:h}],"question");o.Alert=d;o.Confirm=l;o.Show=m;a.exports=o});define("bui/picker",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(c,b,d){var e=c("bui/common"),a=e.namespace("Picker");e.mix(a,{Mixin:c("bui/picker/mixin"),Picker:c("bui/picker/picker"),ListPicker:c("bui/picker/listpicker")});d.exports=a});define("bui/picker/mixin",["jquery"],function(b,a,c){var d=b("jquery");var e=function(){};e.ATTRS={innerControl:{getter:function(){return this.get("children")[0]}},triggerEvent:{value:"click"},autoSetValue:{value:true},changeEvent:{value:"selectedchange"},autoHide:{value:true},hideEvent:{value:"itemclick"},textField:{},align:{value:{points:["bl","tl"],offset:[0,0]}},valueField:{}};e.prototype={__bindUI:function(){var f=this,h=f.get("hideEvent"),g=d(f.get("trigger"));f.on("show",function(j){if(!f.get("isInit")){f._initControl()}if(f.get("autoSetValue")){var i=f.get("valueField")||f.get("textField")||f.get("curTrigger"),k=d(i).val();f.setSelectedValue(k)}})},_initControl:function(){var f=this;if(f.get("isInit")){return}if(!f.get("innerControl")){var g=f.createControl();f.get("children").push(g)}f.initControlEvent();f.set("isInit",true)},initControl:function(){this._initControl()},createControl:function(){},initControlEvent:function(){var g=this,f=g.get("innerControl"),h=d(g.get("trigger")),i=g.get("hideEvent");f.on(g.get("changeEvent"),function(o){var p=g.get("curTrigger"),l=g.get("textField")||p||h,r=g.get("valueField"),q=g.getSelectedValue(),n=false;if(l){var j=g.getSelectedText(),k=d(l).val();if(j!=k){d(l).val(j);n=true;d(l).trigger("change")}}if(r&&g.get("autoSetValue")){var m=d(r).val();if(r!=m){d(r).val(q);n=true;d(r).trigger("change")}}if(n){g.onChange(j,q,o)}});if(i){f.on(g.get("hideEvent"),function(){var j=g.get("curTrigger");try{if(j){j.focus()}}catch(k){BUI.log(k)}g.hide()})}},setSelectedValue:function(f){},getSelectedValue:function(){},getSelectedText:function(){},focus:function(){this.get("innerControl").focus()},onChange:function(j,i,h){var f=this,g=f.get("curTrigger");f.fire("selectedchange",{value:i,text:j,curTrigger:g})},handleNavEsc:function(f){this.hide()},_uiSetValueField:function(g){var f=this;if(g!=null&&g!==""&&f.get("autoSetValue")){f.setSelectedValue(d(g).val())}},_getTextField:function(){var f=this;return f.get("textField")||f.get("curTrigger")}};c.exports=e});define("bui/picker/picker",["jquery","bui/overlay","bui/common"],function(d,b,e){var f=d("jquery"),a=d("bui/overlay").Overlay,g=d("bui/picker/mixin");var c=a.extend([g],{},{ATTRS:{}},{xclass:"picker"});e.exports=c});define("bui/picker/listpicker",["jquery","bui/list","bui/common","bui/data","bui/overlay"],function(c,b,e){var g=c("jquery"),d=c("bui/list"),a=c("bui/picker/picker"),f=a.extend({initializer:function(){var h=this,i=h.get("children"),j=h.get("list");if(!j){i.push({})}},setSelectedValue:function(k){k=(k||k==0)?k.toString():"";if(!this.get("isInit")){this._initControl()}var h=this,j=h.get("list"),i=h.getSelectedValue();if(k!==i&&j.getCount()){if(j.get("multipleSelect")){j.clearSelection()}j.setSelectionByField(k.split(","))}},onChange:function(l,k,j){var h=this,i=h.get("curTrigger");h.fire("selectedchange",{value:k,text:l,curTrigger:i,item:j.item})},getSelectedValue:function(){if(!this.get("isInit")){this._initControl()}return this.get("list").getSelectionValues().join(",")},getSelectedText:function(){if(!this.get("isInit")){this._initControl()}return this.get("list").getSelectionText().join(",")}},{ATTRS:{defaultChildClass:{value:"simple-list"},list:{getter:function(){return this.get("children")[0]}}}},{xclass:"list-picker"});e.exports=f});define("bui/toolbar",["bui/common","jquery"],function(b,a,d){var e=b("bui/common"),c=e.namespace("Toolbar");e.mix(c,{BarItem:b("bui/toolbar/baritem"),Bar:b("bui/toolbar/bar"),PagingBar:b("bui/toolbar/pagingbar"),NumberPagingBar:b("bui/toolbar/numberpagingbar")});d.exports=c});define("bui/toolbar/baritem",["jquery","bui/common"],function(e,h,b){var i=e("jquery"),l=e("bui/common"),j=l.prefix,n=l.Component,d=n.UIBase;var f=n.View.extend([d.ListItemView]);var m=n.Controller.extend([d.ListItem],{renderUI:function(){var o=this.get("el");o.addClass(j+"inline-block");if(!o.attr("id")){o.attr("id",this.get("id"))}}},{ATTRS:{elTagName:{view:true,value:"li"},selectable:{value:false},focusable:{value:false},xview:{value:f}}},{xclass:"bar-item",priority:1});var c=m.extend({_uiSetDisabled:function(q){var o=this,p=o.get("el"),r=q?"addClass":"removeClass";p.find("button").attr("disabled",q)[r](j+"button-disabled")},_uiSetChecked:function(q){var o=this,p=o.get("el"),r=q?"addClass":"removeClass";p.find("button")[r](j+"button-checked")},_uiSetText:function(p){var o=this,q=o.get("el");q.find("button").text(p)},_uiSetbtnCls:function(p){var o=this,q=o.get("el");q.find("button").addClass(p)}},{ATTRS:{checked:{value:false},tpl:{view:true,value:'<button type="button" class="{btnCls}">{text}</button>'},btnCls:{sync:false},text:{sync:false,value:""}}},{xclass:"bar-item-button",priority:2});var a=m.extend({renderUI:function(){var o=this.get("el");o.attr("role","separator")}},{xclass:"bar-item-separator",priority:2});var g=m.extend({},{ATTRS:{width:{view:true,value:2}}},{xclass:"bar-item-spacer",priority:2});var k=m.extend({_uiSetText:function(q){var o=this,p=o.get("el");p.html(q)}},{ATTRS:{text:{value:""}}},{xclass:"bar-item-text",priority:2});m.types={"button":c,"separator":a,"spacer":g,"text":k};b.exports=m});define("bui/toolbar/bar",["jquery","bui/common"],function(c,d,a){var e=c("jquery"),f=c("bui/common"),h=f.Component,b=h.UIBase;var i=h.View.extend({renderUI:function(){var j=this.get("el");j.attr("role","toolbar");if(!j.attr("id")){j.attr("id",f.guid("bar"))}}});var g=h.Controller.extend([b.ChildList],{getItem:function(j){return this.getChild(j)}},{ATTRS:{elTagName:{view:true,value:"ul"},defaultChildClass:{value:"bar-item"},focusable:{value:false},xview:{value:i}}},{xclass:"bar",priority:1});a.exports=g});define("bui/toolbar/pagingbar",["jquery","bui/common"],function(i,t,b){var f=i("jquery"),q=i("bui/common"),c=i("bui/toolbar/bar"),l=q.Component,d=l.UIBase.Bindable;var e=q.prefix,k="first",s="prev",u="next",p="last",a="skip",h="refresh",m="totalPage",o="curPage",n="totalCount",j=[k,s,u,p,a,h],g=[m,o,n];var r=c.extend([d],{initializer:function(){var v=this,y=v.get("children"),x=v.get("items"),w=v.get("store");if(!x){x=v._getItems();q.each(x,function(z){y.push(z)})}else{q.each(x,function(A,z){if(q.isString(A)){if(q.Array.contains(A,j)){A=v._getButtonItem(A)}else{if(q.Array.contains(A,g)){A=v._getTextItem(A)}else{A={xtype:A}}}}y.push(A)})}if(w&&w.get("pageSize")){v.set("pageSize",w.get("pageSize"))}},bindUI:function(){var v=this;v._bindButtonEvent()},jumpToPage:function(A){if(A<=0||A>this.get("totalPage")){return}var w=this,y=w.get("store"),x=w.get("pageSize"),z=A-1,B=z*x;var v=w.fire("beforepagechange",{from:w.get("curPage"),to:A});if(y&&v!==false){y.load({start:B,limit:x,pageIndex:z})}},_afterStoreLoad:function(C,w){var B=this,A=B.get("pageSize"),v=0,x,D,z,y;v=C.get("start");D=C.getTotalCount();x=D-v>A?v+C.getCount()-1:D;y=parseInt((D+A-1)/A,10);y=y>0?y:1;z=parseInt(v/A,10)+1;B.set("start",v);B.set("end",x);B.set("totalCount",D);B.set("curPage",z);B.set("totalPage",y);B._setAllButtonsState();B._setNumberPages()},_bindButtonEvent:function(){var v=this;v._bindButtonItemEvent(k,function(){v.jumpToPage(1)});v._bindButtonItemEvent(s,function(){v.jumpToPage(v.get("curPage")-1)});v._bindButtonItemEvent(u,function(){v.jumpToPage(v.get("curPage")+1)});v._bindButtonItemEvent(p,function(){v.jumpToPage(v.get("totalPage"))});v._bindButtonItemEvent(a,function(){w()});v._bindButtonItemEvent(h,function(){v.jumpToPage(v.get("curPage"))});var x=v.getItem(o);if(x){x.get("el").on("keyup",function(y){y.stopPropagation();if(y.keyCode===13){w()}})}function w(){var y=parseInt(v._getCurrentPageValue(),10);if(v._isPageAllowRedirect(y)){v.jumpToPage(y)}else{v._setCurrentPageValue(v.get("curPage"))}}},_bindButtonItemEvent:function(y,x){var v=this,w=v.getItem(y);if(w){w.on("click",x)}},onLoad:function(x){var v=this,w=v.get("store");v._afterStoreLoad(w,x)},_getItems:function(){var v=this,w=v.get("items");if(w&&w.length){return w}w=[];w.push(v._getButtonItem(k));w.push(v._getButtonItem(s));w.push(v._getSeparator());w.push(v._getTextItem(m));w.push(v._getTextItem(o));w.push(v._getButtonItem(a));w.push(v._getSeparator());w.push(v._getButtonItem(u));w.push(v._getButtonItem(p));w.push(v._getSeparator());w.push(v._getTextItem(n));return w},_getButtonItem:function(w){var v=this;return{id:w,xclass:"bar-item-button",text:v.get(w+"Text"),disabled:true,elCls:v.get(w+"Cls")}},_getSeparator:function(){return{xclass:"bar-item-separator"}},_getTextItem:function(w){var v=this;return{id:w,xclass:"bar-item-text",text:v._getTextItemTpl(w)}},_getTextItemTpl:function(x){var v=this,w=v.getAttrVals();return q.substitute(this.get(x+"Tpl"),w)},_isPageAllowRedirect:function(w){var v=this;return w&&w>0&&w<=v.get("totalPage")&&w!==v.get("curPage")},_setAllButtonsState:function(){var v=this,w=v.get("store");if(w){v._setButtonsState([s,u,k,p,a],true)}if(v.get("curPage")===1){v._setButtonsState([s,k],false)}if(v.get("curPage")===v.get("totalPage")){v._setButtonsState([u,p],false)}},_setButtonsState:function(y,w){var v=this,x=v.get("children");q.each(x,function(z){if(q.Array.indexOf(z.get("id"),y)!==-1){z.set("disabled",!w)}})},_setNumberPages:function(){var v=this,w=v.getItems();q.each(w,function(x){if(x.__xclass==="bar-item-text"){x.set("content",v._getTextItemTpl(x.get("id")))}})},_getCurrentPageValue:function(x){var v=this;x=x||v.getItem(o);if(x){var w=x.get("el").find("input");return w.val()}},_setCurrentPageValue:function(y,x){var v=this;x=x||v.getItem(o);if(x){var w=x.get("el").find("input");w.val(y)}}},{ATTRS:{firstText:{value:"首 页"},firstCls:{value:e+"pb-first"},prevText:{value:"上一页"},prevCls:{value:e+"pb-prev"},nextText:{value:"下一页"},nextCls:{value:e+"pb-next"},lastText:{value:"末 页"},lastCls:{value:e+"pb-last"},skipText:{value:"确定"},skipCls:{value:e+"pb-skip"},refreshText:{value:"刷新"},refreshCls:{value:e+"pb-refresh"},totalPageTpl:{value:"共 {totalPage} 页"},curPageTpl:{value:'第 <input type="text" '+'autocomplete="off" class="'+e+'pb-page" size="20" value="{curPage}" name="inputItem"> 页'},totalCountTpl:{value:"共{totalCount}条记录"},autoInitItems:{value:false},curPage:{value:0},totalPage:{value:0},totalCount:{value:0},pageSize:{value:30},store:{}},ID_FIRST:k,ID_PREV:s,ID_NEXT:u,ID_LAST:p,ID_SKIP:a,ID_REFRESH:h,ID_TOTAL_PAGE:m,ID_CURRENT_PAGE:o,ID_TOTAL_COUNT:n},{xclass:"pagingbar",priority:2});b.exports=r});define("bui/toolbar/numberpagingbar",["jquery","bui/common"],function(d,e,c){var f=d("jquery"),i=d("bui/common"),k=i.Component,j=d("bui/toolbar/pagingbar");var g=i.prefix,h="numberContainer",b=g+"button-number";var a=j.extend({_getItems:function(){var l=this,m=l.get("items");if(m){return m}m=[];m.push(l._getButtonItem(j.ID_PREV));m.push(l._getButtonItem(j.ID_NEXT));return m},_getButtonItem:function(m){var l=this;return{id:m,content:'<a href="javascript:;">'+l.get(m+"Text")+"</a>",disabled:true}},_bindButtonEvent:function(){var l=this,m=l.get("numberButtonCls");a.superclass._bindButtonEvent.call(this);l.get("el").delegate("a","click",function(n){n.preventDefault()});l.on("click",function(o){var n=o.target;if(n&&n.get("el").hasClass(m)){var p=n.get("id");l.jumpToPage(p)}})},_setNumberPages:function(){var l=this;l._setNumberButtons()},_setNumberButtons:function(){var l=this,p=l.get("curPage"),n=l.get("totalPage"),m=l._getNumberItems(p,n),o;l._clearNumberButtons();i.each(m,function(q){l._appendNumberButton(q)});o=l.getItem(p);if(o){o.set("selected",true)}},_appendNumberButton:function(m){var l=this,o=l.getItemCount();var n=l.addItemAt(m,o-1)},_clearNumberButtons:function(){var l=this,m=l.getItems(),n=l.getItemCount();while(n>2){l.removeItemAt(n-2);n=l.getItemCount()}},_getNumberItems:function(s,p){var t=this,w=[],r=t.get("maxLimitCount"),l=t.get("showRangeCount"),q;function u(z,y){for(var x=z;x<=y;x++){w.push(t._getNumberItem(x))}}function o(){w.push(t._getEllipsisItem())}if(p<r){q=p;u(1,p)}else{var n=(s<=r)?1:(s-l),m=s+l,v=m<p?(m>r?m:r):p;if(n>1){u(1,1);if(n>2){o()}}q=v;u(n,v)}if(q<p){if(q<p-1){o()}u(p,p)}return w},_getEllipsisItem:function(){var l=this;return{disabled:true,content:l.get("ellipsisTpl")}},_getNumberItem:function(m){var l=this;return{id:m,elCls:l.get("numberButtonCls")}}},{ATTRS:{itemStatusCls:{value:{selected:"active",disabled:"disabled"}},itemTpl:{value:'<a href="">{id}</a>'},prevText:{value:"<<"},nextText:{value:">>"},maxLimitCount:{value:4},showRangeCount:{value:1},numberButtonCls:{value:b},ellipsisTpl:{value:'<a href="#">...</a>'}}},{xclass:"pagingbar-number",priority:3});c.exports=a});define("bui/calendar",["bui/common","jquery","bui/picker","bui/overlay","bui/list","bui/data","bui/toolbar"],function(b,a,c){var d=b("bui/common"),e=d.namespace("Calendar");d.mix(e,{Calendar:b("bui/calendar/calendar"),MonthPicker:b("bui/calendar/monthpicker"),DatePicker:b("bui/calendar/datepicker")});c.exports=e});define("bui/calendar/calendar",["bui/common","jquery","bui/picker","bui/overlay","bui/list","bui/data","bui/toolbar"],function(j,v,c){var u=j("bui/common"),e=u.prefix,m="x-datepicker-time",l="x-datepicker-hour",w="x-datepicker-minute",h="x-datepicker-second",d="x-timepicker",i=j("bui/picker").ListPicker,k=j("bui/calendar/monthpicker"),q=j("bui/calendar/header"),r=j("bui/calendar/panel"),b=j("bui/toolbar"),p=u.Component,a=u.Date;function t(){var x=new Date();return new Date(x.getFullYear(),x.getMonth(),x.getDate())}function g(x){if(x<10){return"0"+x}return x.toString()}function s(x){var y=[];for(var z=0;z<x;z++){y.push({text:g(z),value:g(z)})}return y}function o(y,x){var z=y.get("el").find("."+x);return parseInt(z.val(),10)}function f(y,x,A){var z=y.get("el").find("."+x);if(u.isNumber(A)){A=g(A)}z.val(A)}var n=p.Controller.extend({initializer:function(){var x=this,z=x.get("children"),B=new q(),y=new r(),A=x.get("footer")||x._createFooter();z.push(B);z.push(y);z.push(A);x.set("header",B);x.set("panel",y);x.set("footer",A)},renderUI:function(){var x=this,y=x.get("children");if(x.get("showTime")){var z=x.get("timepicker")||x._initTimePicker();y.push(z);x.set("timepicker",z)}},bindUI:function(){var x=this,z=x.get("header"),y=x.get("panel");y.on("selectedchange",function(B){var A=B.date;if(!a.isDateEquals(A,x.get("selectedDate"))){x.set("selectedDate",A)}});if(!x.get("showTime")){y.on("click",function(){x.fire("accept")})}else{x._initTimePickerEvent()}z.on("monthchange",function(A){x._setYearMonth(A.year,A.month)});z.on("headerclick",function(){var A=x.get("monthpicker")||x._createMonthPicker();A.set("year",z.get("year"));A.set("month",z.get("month"));A.show()})},_initTimePicker:function(){var x=this,C=x.get("lockTime"),B={hour:l,minute:w,second:h};if(C){for(var z in C){var A=B[z.toLowerCase()];x.set(z,C[z]);if(!C.editable){x.get("el").find("."+A).attr("disabled","")}}}var y=new i({elCls:d,children:[{itemTpl:'<li><a href="#">{text}</a></li>'}],autoAlign:false,align:{node:x.get("el").find(".bui-calendar-footer"),points:["tl","bl"],offset:[-1,1]},trigger:x.get("el").find("."+m)});y.render();x._initTimePickerEvent(y);return y},_initTimePickerEvent:function(y){var x=this,y=x.get("timepicker");if(!y){return}y.get("el").delegate("a","click",function(z){z.preventDefault()});y.on("triggerchange",function(A){var z=A.curTrigger;if(z.hasClass(l)){y.get("list").set("items",s(24))}else{y.get("list").set("items",s(60))}});y.on("selectedchange",function(A){var z=A.curTrigger,B=A.value;if(z.hasClass(l)){x.setInternal("hour",B)}else{if(z.hasClass(w)){x.setInternal("minute",B)}else{x.setInternal("second",B)}}})},_setYearMonth:function(B,C){var x=this,A=x.get("selectedDate"),z=A.getDate();if(B!==A.getFullYear()||C!==A.getMonth()){var y=new Date(B,C,z);if(y.getMonth()!=C){y=a.addDay(-1,new Date(B,C+1))}x.set("selectedDate",y)}},_createMonthPicker:function(){var x=this,y;y=new k({render:x.get("el"),effect:{effect:"slide",duration:300},visibleMode:"display",success:function(){var z=this;x._setYearMonth(z.get("year"),z.get("month"));z.hide()},cancel:function(){this.hide()}});x.set("monthpicker",y);x.get("children").push(y);return y},_createFooter:function(){var x=this,z=this.get("showTime"),y=[];if(z){y.push({content:x.get("timeTpl")});y.push({xclass:"bar-item-button",text:"确定",btnCls:"button button-small button-primary",listeners:{click:function(){x.fire("accept")}}})}else{y.push({xclass:"bar-item-button",text:"今天",btnCls:"button button-small",id:"todayBtn",listeners:{click:function(){var A=t();x.set("selectedDate",A);x.fire("accept")}}});y.push({xclass:"bar-item-button",text:"清除",btnCls:"button button-small",id:"clsBtn",listeners:{click:function(){x.fire("clear")}}})}return new b.Bar({elCls:e+"calendar-footer",children:y})},_updateTodayBtnAble:function(){var x=this;if(!x.get("showTime")){var B=x.get("footer"),A=x.get("panel").get("view"),y=t(),z=B.getItem("todayBtn");A._isInRange(y)?z.enable():z.disable()}},_uiSetSelectedDate:function(y){var x=this,z=y.getFullYear(),A=y.getMonth();x.get("header").setMonth(z,A);x.get("panel").set("selected",y);x.fire("datechange",{date:y})},_uiSetHour:function(x){f(this,l,x)},_uiSetMinute:function(x){f(this,w,x)},_uiSetSecond:function(x){f(this,h,x)},_uiSetMaxDate:function(y){var x=this;x.get("panel").set("maxDate",y);x._updateTodayBtnAble()},_uiSetMinDate:function(y){var x=this;x.get("panel").set("minDate",y);x._updateTodayBtnAble()}},{ATTRS:{header:{},panel:{},maxDate:{},minDate:{},monthPicker:{},timepicker:{},width:{value:180},events:{value:{"click":false,"accept":false,"datechange":false,"monthchange":false}},showTime:{value:false},lockTime:{},timeTpl:{value:'<input type="text" readonly class="'+m+" "+l+'" />:<input type="text" readonly class="'+m+" "+w+'" />:<input type="text" readonly class="'+m+" "+h+'" />'},selectedDate:{value:t()},hour:{value:new Date().getHours()},minute:{value:new Date().getMinutes()},second:{value:0}}},{xclass:"calendar",priority:0});c.exports=n});define("bui/calendar/monthpicker",["jquery","bui/common","bui/overlay","bui/list","bui/data","bui/toolbar"],function(k,u,d){var h=k("jquery"),s=k("bui/common"),p=s.Component,l=k("bui/overlay").Overlay,c=k("bui/list").SimpleList,b=k("bui/toolbar"),g=s.prefix,t="x-monthpicker-month",m="data-month",n="data-year",a="x-monthpicker-year",e="x-monthpicker-yearnav",v="x-monthpicker-selected",o="x-monthpicker-item",j=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"];function i(){return h.map(j,function(x,w){return{text:x,value:w}})}var q=c.extend({bindUI:function(){var w=this;w.get("el").delegate("a","click",function(x){x.preventDefault()}).delegate("."+t,"dblclick",function(){w.fire("monthdblclick")})}},{ATTRS:{itemTpl:{view:true,value:'<li class="'+o+' x-monthpicker-month"><a href="#" hidefocus="on">{text}</a></li>'},itemCls:{value:o},items:{view:true,value:i()},elCls:{view:true,value:"x-monthpicker-months"}}},{xclass:"calendar-month-panel"});var f=c.extend({bindUI:function(){var w=this,x=w.get("el");x.delegate("a","click",function(y){y.preventDefault()});x.delegate("."+a,"dblclick",function(){w.fire("yeardblclick")});x.delegate(".x-icon","click",function(z){var y=h(z.currentTarget);if(y.hasClass(e+"-prev")){w._prevPage()}else{if(y.hasClass(e+"-next")){w._nextPage()}}});w.on("itemselected",function(y){if(y.item){w.setInternal("year",y.item.value)}})},_prevPage:function(){var w=this,y=w.get("start"),x=w.get("yearCount");w.set("start",y-x)},_nextPage:function(){var w=this,y=w.get("start"),x=w.get("yearCount");w.set("start",y+x)},_uiSetStart:function(){var w=this;w._setYearsContent()},_uiSetYear:function(x){var w=this,y=w.findItemByField("value",x);if(y){w.setSelectedByField(x)}else{w.set("start",x)}},_setYearsContent:function(){var w=this,z=w.get("year"),C=w.get("start"),B=w.get("yearCount"),x=[];for(var y=C;y<C+B;y++){var A=y.toString();x.push({text:A,value:y})}w.set("items",x);w.setSelectedByField(z)}},{ATTRS:{items:{view:true,value:[]},elCls:{view:true,value:"x-monthpicker-years"},itemCls:{value:o},year:{},start:{value:new Date().getFullYear()},yearCount:{value:10},itemTpl:{view:true,value:'<li class="'+o+" "+a+'"><a href="#" hidefocus="on">{text}</a></li>'},tpl:{view:true,value:'<div class="'+e+'">'+'<span class="'+e+'-prev x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-left"></span></span>'+'<span class="'+e+'-next x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-right"></span></span>'+"</div>"+"<ul></ul>"}}},{xclass:"calendar-year-panel"});var r=l.extend({initializer:function(){var w=this,y=w.get("children"),z=new q(),x=new f(),A=w._createFooter();y.push(z);y.push(x);y.push(A);w.set("yearPanel",x);w.set("monthPanel",z)},bindUI:function(){var w=this;w.get("monthPanel").on("itemselected",function(x){if(x.item){w.setInternal("month",x.item.value)}}).on("monthdblclick",function(){w._successCall()});w.get("yearPanel").on("itemselected",function(x){if(x.item){w.setInternal("year",x.item.value)}}).on("yeardblclick",function(){w._successCall()})},_successCall:function(){var w=this,x=w.get("success");if(x){x.call(w)}},_createFooter:function(){var w=this;return new b.Bar({elCls:g+"clear x-monthpicker-footer",children:[{xclass:"bar-item-button",text:"确定",btnCls:"button button-small button-primary",handler:function(){w._successCall()}},{xclass:"bar-item-button",text:"取消",btnCls:"button button-small last",handler:function(){var x=w.get("cancel");if(x){x.call(w)}}}]})},_uiSetYear:function(w){this.get("yearPanel").set("year",w)},_uiSetMonth:function(w){this.get("monthPanel").setSelectedByField(w)}},{ATTRS:{footer:{},align:{value:{}},year:{},success:{value:function(){}},cancel:{value:function(){}},width:{value:180},month:{},yearPanel:{},monthPanel:{}}},{xclass:"monthpicker"});d.exports=r});define("bui/calendar/header",["jquery","bui/common"],function(d,e,b){var f=d("jquery"),j=d("bui/common"),i=j.prefix,m=j.Component,a="year-text",c="month-text",l="x-datepicker-arrow",h="x-datepicker-prev",k="x-datepicker-next";var g=m.Controller.extend({bindUI:function(){var n=this,o=n.get("el");o.delegate("."+l,"click",function(q){q.preventDefault();var p=f(q.currentTarget);if(p.hasClass(k)){n.nextMonth()}else{if(p.hasClass(h)){n.prevMonth()}}});o.delegate(".x-datepicker-month","click",function(){n.fire("headerclick")})},setMonth:function(p,q){var n=this,o=n.get("year"),r=n.get("month");if(p!==o||q!==r){n.set("year",p);n.set("month",q);n.fire("monthchange",{year:p,month:q})}},nextMonth:function(){var n=this,o=new Date(n.get("year"),n.get("month")+1);n.setMonth(o.getFullYear(),o.getMonth())},prevMonth:function(){var n=this,o=new Date(n.get("year"),n.get("month")-1);n.setMonth(o.getFullYear(),o.getMonth())},_uiSetYear:function(o){var n=this;n.get("el").find("."+a).text(o)},_uiSetMonth:function(o){var n=this;n.get("el").find("."+c).text(o+1)}},{ATTRS:{year:{sync:false},month:{sync:false,setter:function(n){this.set("monthText",n+1)}},monthText:{},tpl:{view:true,value:'<div class="'+l+" "+h+'"><span class="icon icon-white icon-caret  icon-caret-left"></span></div>'+'<div class="x-datepicker-month">'+'<div class="month-text-container">'+'<span><span class="year-text">{year}</span>年 <span class="month-text">{monthText}</span>月</span>'+'<span class="'+i+"caret "+i+'caret-down"></span>'+"</div>"+"</div>"+'<div class="'+l+" "+k+'"><span class="icon icon-white icon-caret  icon-caret-right"></span></div>'},elCls:{view:true,value:"x-datepicker-header"},events:{value:{"monthchange":true}}}},{xclass:"calendar-header"});b.exports=g});define("bui/calendar/panel",["jquery","bui/common"],function(f,r,b){var d=f("jquery"),q=f("bui/common"),l=q.Component,a=q.Date,i="x-datepicker-date",p="x-datepicker-today",k="x-datepicker-disabled",m="x-datepicker-active",o="data-date",c="isoDate",s="x-datepicker-selected",g=6,n={deactive:"prevday",active:"active",disabled:"disabled"},e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var h=l.View.extend({renderUI:function(){this.updatePanel()},updatePanel:function(){var t=this,v=t.get("el"),u=v.find("tbody"),w=t._getPanelInnerTpl();u.empty();d(w).appendTo(u)},_getPanelInnerTpl:function(){var u=this,t=u._getFirstDate(),x=[];for(var w=0;w<g;w++){var v=a.addWeek(w,t);x.push(u._getWeekTpl(v))}return x.join("")},_getWeekTpl:function(u){var t=this,x=t.get("weekTpl"),y=[];for(var w=0;w<e.length;w++){var v=a.addDay(w,u);y.push(t._getDayTpl(v))}return q.substitute(x,{daysTpl:y.join("")})},_getDayTpl:function(x){var t=this,A=t.get("dayTpl"),v=x.getDay(),w=t._isToday(x)?p:"",u=e[v],z=x.getDate(),y=t._isInRange(x)?(t._isCurrentMonth(x)?n.active:n.deactive):n.disabled;return q.substitute(A,{dayOfWeek:u,dateType:y,dateNumber:z,todayCls:w,date:a.format(x,c)})},_getFirstDate:function(v,x){var t=this,w=t._getMonthFirstDate(v,x),u=w.getDay();return a.addDay(u*-1,w)},_getMonthFirstDate:function(u,v){var t=this,u=u||t.get("year"),v=v||t.get("month");return new Date(u,v)},_isCurrentMonth:function(t){return t.getMonth()===this.get("month")},_isToday:function(u){var t=new Date();return t.getFullYear()===u.getFullYear()&&t.getMonth()===u.getMonth()&&t.getDate()===u.getDate()},_isInRange:function(u){var t=this,w=t.get("maxDate"),v=t.get("minDate");if(v&&u<v){return false}if(w&&u>w){return false}return true},_clearSelectedDate:function(){var t=this;t.get("el").find("."+s).removeClass(s)},_findDateElement:function(w){var u=this,v=a.format(w,c),x=u.get("el").find("."+i),t=null;if(v){x.each(function(y,z){if(d(z).attr("title")===v){t=d(z);return false}})}return t},_setSelectedDate:function(v){var t=this,u=t._findDateElement(v);t._clearSelectedDate();if(u){u.addClass(s)}}},{ATTRS:{}});var j=l.Controller.extend({initializer:function(){var t=this,u=new Date();if(!t.get("year")){t.set("year",u.getFullYear())}if(!t.get("month")){t.set("month",u.getMonth())}},bindUI:function(){var t=this,u=t.get("el");u.delegate("."+i,"click",function(v){v.preventDefault()});u.delegate("."+k,"mouseup",function(v){v.stopPropagation()})},performActionInternal:function(w){var t=this,v=d(w.target).closest("."+i);if(v){var u=v.attr("title");if(u){u=a.parse(u);if(t.get("view")._isInRange(u)){t.set("selected",u)}}}},setMonth:function(v,w){var t=this,u=t.get("year"),x=t.get("month");if(v!==u||w!==x){t.set("year",v);t.set("month",w);t.get("view").updatePanel()}},_uiSetSelected:function(u,v){var t=this;if(!(v&&v.prevVal&&a.isDateEquals(u,v.prevVal))){t.setMonth(u.getFullYear(),u.getMonth());t.get("view")._setSelectedDate(u);t.fire("selectedchange",{date:u})}},_uiSetMaxDate:function(t){if(t){this.get("view").updatePanel()}},_uiSetMinDate:function(t){if(t){this.get("view").updatePanel()}}},{ATTRS:{year:{view:true},month:{view:true},selected:{},focusable:{value:true},dayTpl:{view:true,value:'<td class="x-datepicker-date x-datepicker-{dateType} {todayCls} day-{dayOfWeek}" title="{date}">'+'<a href="#" hidefocus="on" tabindex="1">'+"<em><span>{dateNumber}</span></em>"+"</a>"+"</td>"},events:{value:{"click":false,"selectedchange":true}},maxDate:{view:true,setter:function(t){if(t){if(q.isString(t)){return a.parse(t)}return t}}},minDate:{view:true,setter:function(t){if(t){if(q.isString(t)){return a.parse(t)}return t}}},weekTpl:{view:true,value:"<tr>{daysTpl}</tr>"},tpl:{view:true,value:'<table class="x-datepicker-inner" cellspacing="0">'+"<thead>"+"<tr>"+'<th  title="Sunday"><span>日</span></th>'+'<th  title="Monday"><span>一</span></th>'+'<th  title="Tuesday"><span>二</span></th>'+'<th  title="Wednesday"><span>三</span></th>'+'<th  title="Thursday"><span>四</span></th>'+'<th  title="Friday"><span>五</span></th>'+'<th  title="Saturday"><span>六</span></th>'+"</tr>"+"</thead>"+'<tbody class="x-datepicker-body">'+"</tbody>"+"</table>"},xview:{value:h}}},{xclass:"calendar-panel",priority:0});b.exports=j});define("bui/calendar/datepicker",["bui/common","jquery","bui/picker","bui/overlay","bui/list","bui/data","bui/toolbar"],function(d,c,e){var g=d("bui/common"),b=d("bui/picker").Picker,h=d("bui/calendar/calendar"),a=g.Date;var f=b.extend({initializer:function(){},createControl:function(){var i=this,j=i.get("children"),k=new h({render:i.get("el"),showTime:i.get("showTime"),lockTime:i.get("lockTime"),minDate:i.get("minDate"),maxDate:i.get("maxDate"),autoRender:true});k.on("clear",function(){var m=i.get("curTrigger"),l=m.val();if(l){m.val("");m.trigger("change")}});if(!i.get("dateMask")){if(i.get("showTime")){i.set("dateMask","yyyy-mm-dd HH:MM:ss")}else{i.set("dateMask","yyyy-mm-dd")}}j.push(k);i.set("calendar",k);return k},setSelectedValue:function(p){if(!this.get("calendar")){return}var i=this,n=this.get("calendar"),l=a.parse(p,i.get("dateMask"));l=l||i.get("selectedDate");n.set("selectedDate",a.getDate(l));if(i.get("showTime")){var m=this.get("lockTime"),j=l.getHours(),o=l.getMinutes(),k=l.getSeconds();if(m){if(!p||!m.editable){j=m["hour"]!=null?m["hour"]:j;o=m["minute"]!=null?m["minute"]:o;k=m["second"]!=null?m["second"]:k}}n.set("hour",j);n.set("minute",o);n.set("second",k)}},getSelectedValue:function(){if(!this.get("calendar")){return null}var i=this,k=i.get("calendar"),j=a.getDate(k.get("selectedDate"));if(i.get("showTime")){j=a.addHour(k.get("hour"),j);j=a.addMinute(k.get("minute"),j);j=a.addSecond(k.get("second"),j)}return j},getSelectedText:function(){if(!this.get("calendar")){return""}return a.format(this.getSelectedValue(),this._getFormatType())},_getFormatType:function(){return this.get("dateMask")},_uiSetMaxDate:function(j){if(!this.get("calendar")){return null}var i=this;i.get("calendar").set("maxDate",j)},_uiSetMinDate:function(j){if(!this.get("calendar")){return null}var i=this;i.get("calendar").set("minDate",j)}},{ATTRS:{showTime:{value:false},lockTime:{},maxDate:{},minDate:{},dateMask:{},changeEvent:{value:"accept"},hideEvent:{value:"accept clear"},calendar:{},selectedDate:{value:new Date(new Date().setSeconds(0))}}},{xclass:"datepicker",priority:0});e.exports=f});define("bui/select",["bui/common","jquery","bui/picker","bui/overlay","bui/list","bui/data"],function(b,a,c){var d=b("bui/common"),e=d.namespace("Select");d.mix(e,{Select:b("bui/select/select"),Combox:b("bui/select/combox"),Suggest:b("bui/select/suggest")});c.exports=e});define("bui/select/select",["jquery","bui/common","bui/picker","bui/overlay","bui/list","bui/data"],function(c,d,a){var e=c("jquery"),g=c("bui/common"),i=c("bui/picker").ListPicker,f=g.prefix;function b(m){if(e.isPlainObject(m)){var n=[];g.each(m,function(p,q){n.push({value:q,text:p})});return n}var o=[];g.each(m,function(q,p){if(g.isString(q)){o.push({value:q,text:q})}else{o.push(q)}});return o}var l=g.Component,j=i,k=f+"select-input",h=l.Controller.extend({initializer:function(){var m=this,o=m.get("multipleSelect"),q,n=m.get("picker"),p;if(!n){q=o?"listbox":"simple-list";p=m.get("list")||{};p=g.mix(p,{xclass:q,elCls:f+"select-list",store:m.get("store"),items:b(m.get("items"))});n=new j({children:[p],valueField:m.get("valueField")});m.set("picker",n)}else{if(m.get("valueField")){n.set("valueField",m.get("valueField"))}}if(o){n.set("hideEvent","")}},renderUI:function(){var m=this,n=m.get("picker"),o=m._getTextEl();n.set("trigger",m.getTrigger());n.set("triggerEvent",m.get("triggerEvent"));n.set("autoSetValue",m.get("autoSetValue"));n.set("textField",o);n.render();m.set("list",n.get("list"))},bindUI:function(){var m=this,o=m.get("picker"),p=o.get("list"),n=p.get("store");o.on("selectedchange",function(q){if(q.item){m.fire("change",{text:q.text,value:q.value,item:q.item})}});if(m.get("autoSetValue")){p.on("itemsshow",function(){m._syncValue()})}o.on("show",function(){if(m.get("forceFit")){o.set("width",m.get("el").outerWidth())}})},containsElement:function(o){var m=this,n=m.get("picker");return l.Controller.prototype.containsElement.call(this,o)||n.containsElement(o)},getTrigger:function(){return this.get("el")},_uiSetItems:function(n){if(!n){return}var m=this,o=m.get("picker"),p=o.get("list");p.set("items",b(n));m._syncValue()},_syncValue:function(){var m=this,o=m.get("picker"),n=m.get("valueField");if(n){o.setSelectedValue(e(n).val())}},_uiSetName:function(n){var m=this,o=m._getTextEl();if(n){o.attr("name",n)}},_uiSetWidth:function(o){var n=this;if(o!=null){if(n.get("inputForceFit")){var r=n._getTextEl(),m=n.get("el").find(".x-icon"),s=r.outerWidth()-r.width(),q=o-m.outerWidth()-s;r.width(q)}if(n.get("forceFit")){var p=n.get("picker");p.set("width",o)}}},_uiSetDisabled:function(n){var m=this,o=m.get("picker"),p=m._getTextEl();o.set("disabled",n);p&&p.attr("disabled",n)},_getTextEl:function(){var m=this,n=m.get("el");return n.is("input")?n:n.find("input")},destructor:function(){var m=this,n=m.get("picker");if(n){n.destroy()}},_getList:function(){var m=this,n=m.get("picker"),o=n.get("list");return o},getSelectedValue:function(){return this.get("picker").getSelectedValue()},setSelectedValue:function(o){var m=this,n=m.get("picker");n.setSelectedValue(o)},getSelectedText:function(){return this.get("picker").getSelectedText()}},{ATTRS:{picker:{},list:{},valueField:{},store:{},focusable:{value:true},autoSetValue:{value:true},multipleSelect:{value:false},inputForceFit:{value:true},name:{},items:{sync:false},inputCls:{value:k},forceFit:{value:true},events:{value:{"change":false}},tpl:{view:true,value:'<input type="text" readonly="readonly" class="'+k+'"/><span class="x-icon x-icon-normal"><i class="icon icon-caret icon-caret-down"></i></span>'},triggerEvent:{value:"click"}}},{xclass:"select"});a.exports=h});define("bui/select/combox",["jquery","bui/common","bui/picker","bui/overlay","bui/list","bui/data"],function(d,e,c){var f=d("jquery"),g=d("bui/common"),a=d("bui/select/select"),b=d("bui/select/tag"),i=g.prefix+"combox-input";var h=a.extend([b],{renderUI:function(){var j=this,k=j.get("picker");k.set("autoFocused",false)},_uiSetItems:function(k){var j=this;for(var l=0;l<k.length;l++){var m=k[l];if(g.isString(m)){k[l]={value:m,text:m}}}h.superclass._uiSetItems.call(j,k)},bindUI:function(){var j=this,l=j.get("picker"),m=l.get("list"),k=l.get("textField");f(k).on("keyup",function(o){var n=m.getSelected();if(n){m.clearItemStatus(n)}});l.on("show",function(){m.clearSelected()})},_uiSetValueField:function(){},getTrigger:function(){return this._getTextEl()}},{ATTRS:{tpl:{view:true,value:'<input type="text" class="'+i+'"/>'},inputCls:{value:i},autoSetValue:{value:false}}},{xclass:"combox"});c.exports=h});define("bui/select/tag",["jquery","bui/common","bui/list","bui/data"],function(c,d,b){var e=c("jquery"),g=c("bui/common"),j=c("bui/list"),i=g.KeyCode,f="warn";function h(l){var k="";if(l.length==0){return""}k=l.replace(/>/g,"&gt;");k=k.replace(/</g,"&lt;");return k}var a=function(){};a.ATTRS={showTag:{value:false},tagItemTpl:{value:"<li>{text}<button>×</button></li>"},tagList:{value:null},limit:{value:null},forbitInput:{value:false},tagPlaceholder:{value:"输入标签"},tagFormatter:{value:null},separator:{value:";"}};g.augment(a,{__renderUI:function(){var l=this,n=l.get("showTag"),k=l.get("tagPlaceholder"),m=l.getTagInput();if(n&&!m.attr("placeholder")){m.attr("placeholder",k);l.set("inputForceFit",false)}},__bindUI:function(){var k=this,o=k.get("showTag"),m=k.getTagInput();if(o){m.on("keydown",function(r){if(!m.val()){var s=k.get("tagList"),q=s.getLastItem(),p=k.get("picker");if(r.which==i.DELETE||r.which==i.BACKSPACE){if(s.hasStatus(q,f)){k._delTag(q)}else{s.setItemStatus(q,f,true)}p.hide()}else{s.setItemStatus(q,f,false)}}});var l;function n(){var q=k.get("tagList"),p=q.getLastItem();if(p&&q.hasStatus(p,f)){q.setItemStatus(p,f,false)}var r=m.val();if(r){k._addTag(r)}}if(!k.get("forbitInput")){m.on("change",function(){l=setTimeout(function(){n();l=null},50)})}k.on("change",function(p){setTimeout(function(){if(l){clearTimeout(l)}n()})})}},__syncUI:function(){var k=this,m=k.get("showTag"),l=k.get("valueField");if(m&&l){k._setTags(e(l).val())}},_setTags:function(n){var k=this,p=k.get("tagList"),o=k.get("separator"),m=k.get("tagFormatter"),l=n.split(o);if(!p){p=k._initTagList()}if(n){g.each(l,function(r){var q=r;if(m){q=m(q)}p.addItem({value:r,text:q})})}},_addTag:function(o){o=h(o);var k=this,p=k.get("tagList"),n=k.getTagInput(),l=k.get("limit"),m=k.get("tagFormatter"),r=p.getItem(o);if(l){if(p.getItemCount()>=l){return}}if(!r){var q=o;if(m){q=m(q)}p.addItem({value:o,text:q});k._synTagsValue()}else{k._blurItem(p,r)}n.val("")},_blurItem:function(l,k){l.setItemStatus(k,"active",true);setTimeout(function(){l.setItemStatus(k,"active",false)},400)},_delTag:function(l){var k=this,m=k.get("tagList");m.removeItem(l);k._synTagsValue()},getTagsValue:function(){var k=this,n=k.get("tagList"),l=n.getItems(),m=[];g.each(l,function(o){m.push(o.value)});return m.join(k.get("separator"))},_initTagList:function(){var k=this,l=k.getTagInput(),m=new j.SimpleList({elBefore:l,itemTpl:k.get("tagItemTpl"),idField:"value"});m.render();k._initTagEvent(m);k.set("tagList",m);return m},_initTagEvent:function(l){var k=this;l.on("itemclick",function(n){var m=e(n.domTarget);if(m.is("button")){k._delTag(n.item)}})},getTagInput:function(){var k=this,l=k.get("el");return l.is("input")?l:l.find("input")},_synTagsValue:function(){var k=this,l=k.get("valueField");l&&e(l).val(k.getTagsValue())}});b.exports=a});define("bui/select/suggest",["jquery","bui/common","bui/picker","bui/overlay","bui/list","bui/data"],function(c,d,a){var e=c("jquery"),g=c("bui/common"),i=c("bui/select/combox"),h=200,b="";var f=i.extend({bindUI:function(){var j=this,k=j.get("el").find("input"),l=(j.get("triggerEvent")==="keyup")?"keyup":"keyup click";k.on(l,function(){j._start()})},_start:function(){var j=this;j._timer=j.later(function(){j._updateContent()},h)},_updateContent:function(){var n=this,p=n.get("data"),r=n.get("el").find("input"),q;if(!p&&(r.val()===n.get("query"))){return}n.set("query",r.val());q=r.val();if(!p&&!q){return}var k=n.get("cacheable"),o=n.get("store"),j=n.get("url"),m=n.get("data");if(k&&(j||o)){var l=n.get("dataCache");if(l[q]!==undefined){n._handleResponse(l[q])}else{n._requestData()}}else{if(j||o){n._requestData()}else{if(m){n._handleResponse(m,true)}}}},_getStore:function(){var j=this,k=j.get("picker"),l=k.get("list");if(l){return l.get("store")}},_requestData:function(){var j=this,l=j.get("el").find("input"),n=j.get("callback"),k=j.get("store"),m={};m[l.attr("name")]=l.val();if(k){m.start=0;k.load(m,n)}else{e.ajax({url:j.get("url"),type:"post",dataType:j.get("dataType"),data:m,success:function(o){j._handleResponse(o);if(n){n(o)}}})}},_handleResponse:function(m,l){var j=this,k=l?j._getFilterItems(m):m;j.set("items",k);if(j.get("cacheable")){j.get("dataCache")[j.get("query")]=k}},_getItemText:function(l){var j=this,k=j.get("picker"),m=k.get("list");if(m){return m.getItemText(l)}return""},_getFilterItems:function(o){var k=this,j=[],n=k.get("el").find("input"),p=n.val(),l=k.get("data");o=o||[];function m(r,q){if(g.isString(q)){j.push(r)}else{j.push(q)}}g.each(o,function(q){var r=g.isString(q)?q:k._getItemText(q);if(l){if(r.indexOf(e.trim(p))!==-1){m(r,q)}}else{m(r,q)}});return j},later:function(k,j,m){j=j||0;var l=m?setInterval(k,j):setTimeout(k,j);return{id:l,interval:m,cancel:function(){if(this.interval){clearInterval(l)}else{clearTimeout(l)}}}}},{ATTRS:{data:{value:null},query:{value:b},cacheable:{value:false},dataCache:{shared:false,value:{}},dataType:{value:"jsonp"},url:{},callback:{},triggerEvent:{valueFn:function(){if(this.get("data")){return"click"}return"keyup"}},autoSetValue:{value:false}}},{xclass:"suggest"});a.exports=f});define("bui/form",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(c,a,d){var f=c("bui/common"),b=f.namespace("Form"),e=c("bui/form/tips");f.mix(b,{Tips:e,TipItem:e.Item,FieldContainer:c("bui/form/fieldcontainer"),Form:c("bui/form/form"),Row:c("bui/form/row"),Group:c("bui/form/fieldgroup"),HForm:c("bui/form/hform"),Rules:c("bui/form/rules"),Field:c("bui/form/field"),FieldGroup:c("bui/form/fieldgroup")});d.exports=b});define("bui/form/tips",["jquery","bui/common","bui/overlay"],function(c,d,b){var e=c("jquery"),h=c("bui/common"),g=h.prefix,a=c("bui/overlay").Overlay,f="data-tip",j=g+"form-tip-container";var i=a.extend({initializer:function(){var l=this,n=l.get("render");if(!n){var m=e(l.get("trigger")).parent();l.set("render",m)}},renderUI:function(){var l=this;l.resetVisible()},resetVisible:function(){var l=this,m=e(l.get("trigger"));if(m.val()){l.set("visible",false)}else{l.set("align",{node:e(l.get("trigger")),points:["cl","cl"]});l.set("visible",true)}},bindUI:function(){var l=this,m=e(l.get("trigger"));l.get("el").on("click",function(){l.hide();m.focus()});m.on("click focus",function(){l.hide()});m.on("blur",function(){l.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"});var k=function(l){if(this.constructor!==k){return new k(l)}k.superclass.constructor.call(this,l);this._init()};k.ATTRS={form:{},items:{valueFn:function(){return[]}}};h.extend(k,h.Base);h.augment(k,{_init:function(){var l=this,m=e(l.get("form"));if(m.length){h.each(e.makeArray(m[0].elements),function(o){var n=e(o).attr(f);if(n){l._initFormElement(o,e.parseJSON(n))}});m.addClass(j)}},_initFormElement:function(o,n){if(n){n.trigger=o}var l=this,m=l.get("items"),p=new i(n);m.push(p)},getItem:function(o){var m=this,n=m.get("items"),l=null;h.each(n,function(p){if(e(p.get("trigger")).attr("name")===o){l=p;return false}});return l},resetVisible:function(){var l=this,m=l.get("items");h.each(m,function(n){n.resetVisible()})},render:function(){var l=this,m=l.get("items");h.each(m,function(n){n.render()})},destroy:function(){var l=this,m=l.get(m);h.each(m,function(n){n.destroy()})}});k.Item=i;b.exports=k});define("bui/form/fieldcontainer",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(d,f,b){var g=d("jquery"),j=d("bui/common"),i=d("bui/form/field"),c=d("bui/form/groupvalid"),h=j.prefix;var e="form-field",o=h+e,p=h+"form-group",k="input,select,textarea";function m(q){return q.is(k)}function l(s,t){if(s!=t){if(m(s)){return[s]}var q=s.attr("class");if(q&&(q.indexOf(p)!==-1||q.indexOf(o)!==-1)){return[s]}}var u=[],r=s.children();j.each(r,function(v){u=u.concat(l(g(v),t))});return u}var n=j.Component.View.extend([c.View]);var a=j.Component.Controller.extend([c],{syncUI:function(){var r=this,q=r.getFields(),s=r.get("validators");j.each(q,function(u){var t=u.get("name");if(s[t]){u.set("validator",s[t])}});j.each(s,function(u,t){if(t.indexOf("#")==0){var w=t.replace("#",""),v=r.getChild(w,true);if(v){v.set("validator",u)}}})},getDecorateElments:function(){var q=this,s=q.get("el");var r=l(s,s);return r},findXClassByNode:function(q,r){if(q.attr("type")==="checkbox"){return e+"-checkbox"}if(q.attr("type")==="radio"){return e+"-radio"}if(q.attr("type")==="number"){return e+"-number"}if(q.hasClass("calendar")){return e+"-date"}if(q[0].tagName=="SELECT"){return e+"-select"}if(m(q)){return e}return j.Component.Controller.prototype.findXClassByNode.call(this,q,r)},getRecord:function(){var r=this,s={},q=r.getFields();j.each(q,function(w){var u=w.get("name"),v=r._getFieldValue(w);if(!s[u]){s[u]=v}else{if(j.isArray(s[u])&&v!=null){s[u].push(v)}else{if(v!=null){var t=[s[u]];t.push(v);s[u]=t}}}});return s},getFields:function(r){var q=this,t=[],s=q.get("children");j.each(s,function(u){if(u instanceof i){if(!r||u.get("name")==r){t.push(u)}}else{if(u.getFields){t=t.concat(u.getFields(r))}}});return t},getField:function(s){var r=this,q=r.getFields(),t=null;j.each(q,function(u){if(u.get("name")===s){t=u;return false}});return t},getFieldAt:function(q){return this.getFields()[q]},setFieldValue:function(s,t){var r=this,q=r.getFields(s);j.each(q,function(u){r._setFieldValue(u,t)})},_setFieldValue:function(s,r){if(s.get("disabled")){return}if(s instanceof i.Check){var q=s.get("value");if(r&&(q===r||(j.isArray(r)&&j.Array.contains(q,r)))){s.set("checked",true)}else{s.set("checked",false)}}else{if(r==null){r=""}s.clearErrors(true);s.set("value",r)}},getFieldValue:function(s){var r=this,q=r.getFields(s),t=[];j.each(q,function(v){var u=r._getFieldValue(v);if(u){t.push(u)}});if(t.length===0){return null}if(t.length===1){return t[0]}return t},_getFieldValue:function(q){if(!(q instanceof i.Check)||q.get("checked")){return q.get("value")}return null},clearFields:function(){this.clearErrors(true);this.setRecord({})},setRecord:function(s){var r=this,q=r.getFields();j.each(q,function(u){var t=u.get("name");r._setFieldValue(u,s[t])})},updateRecord:function(s){var r=this,q=r.getFields();j.each(q,function(u){var t=u.get("name");if(s.hasOwnProperty(t)){r._setFieldValue(u,s[t])}})},focus:function(){var r=this,q=r.getFields(),s=q[0];if(s){s.focus()}},_uiSetDisabled:function(r){var q=this,s=q.get("children");j.each(s,function(t){t.set("disabled",r)})}},{ATTRS:{record:{setter:function(q){this.setRecord(q)},getter:function(){return this.getRecord()}},validators:{value:{}},defaultLoaderCfg:{value:{property:"children",dataType:"json"}},disabled:{sync:false},isDecorateChild:{value:true},xview:{value:n}}},{xclass:"form-field-container"});a.View=n;b.exports=a});define("bui/form/field",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(c,a,d){var e=c("bui/common"),b=c("bui/form/fields/base");e.mix(b,{Text:c("bui/form/fields/text"),Date:c("bui/form/fields/date"),Select:c("bui/form/fields/select"),Hidden:c("bui/form/fields/hidden"),Number:c("bui/form/fields/number"),Check:c("bui/form/fields/check"),Radio:c("bui/form/fields/radio"),Checkbox:c("bui/form/fields/checkbox"),Plain:c("bui/form/fields/plain"),List:c("bui/form/fields/list"),TextArea:c("bui/form/fields/textarea"),Uploader:c("bui/form/fields/uploader"),CheckList:c("bui/form/fields/checklist"),RadioList:c("bui/form/fields/radiolist")});d.exports=b});define("bui/form/fields/base",["jquery","bui/common","bui/overlay"],function(b,d,a){var e=b("jquery"),h=b("bui/common"),n=h.Component,f=b("bui/form/tips").Item,k=b("bui/form/valid"),c=b("bui/form/remote"),m=h.prefix+"form-field-error",l="bui-form-tip-container",j="data-error";var g=n.View.extend([c.View,k.View],{renderUI:function(){var o=this,r=o.get("control");if(!r){var q=o.get("controlTpl"),p=o.getControlContainer();if(q){var r=e(q).appendTo(p);o.set("control",r)}}else{o.set("controlContainer",r.parent())}},clearErrors:function(){var o=this,p=o.get("msgEl");if(p){p.remove();o.set("msgEl",null)}o.get("el").removeClass(m)},showError:function(t,p){var o=this,s=o.get("control"),r=h.substitute(p,{error:t}),q=e(r);q.appendTo(s.parent());o.set("msgEl",q);o.get("el").addClass(m)},getControlContainer:function(){var o=this,q=o.get("el"),p=o.get("controlContainer");if(p){if(h.isString(p)){p=q.find(p)}}return(p&&p.length)?p:q},getLoadingContainer:function(){return this.getControlContainer()},_uiSetName:function(p){var o=this;o.get("control").attr("name",p)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}});var i=n.Controller.extend([c,k],{isField:true,initializer:function(){var o=this;o.on("afterRenderUI",function(){var q=o.get("tip");if(q){var p=o.getTipTigger();p&&p.parent().addClass(l);q.trigger=p;q.autoRender=true;q=new f(q);o.set("tip",q)}})},bindUI:function(){var p=this,q=p.get("validEvent"),r=p.get("changeEvent"),s=p.get("firstValidEvent"),o=p.getInnerControl();if(o.is("select")){q="change"}o.on(q,function(){var t=p.getControlValue(o);p.validControl(t)});if(s){o.on(s,function(){if(!p.get("hasValid")){var t=p.getControlValue(o);p.validControl(t)}})}p.on(r,function(){p.onValid()});p.on("remotecomplete",function(t){p._setError(t.error)})},onValid:function(){var o=this,p=o.getControlValue();p=o.parseValue(p);if(!o.isCurrentValue(p)){o.setInternal("value",p);o.onChange()}},onChange:function(){this.fire("change")},isCurrentValue:function(o){return o==this.get("value")},_clearError:function(){this.set("error",null);this.get("view").clearErrors()},_setError:function(o){this.set("error",o);this.showErrors()},getControlValue:function(p){var o=this;p=p||o.getInnerControl();return p.val()},getControlContainer:function(){return this.get("view").getControlContainer()},getRemoteParams:function(){var o=this,p={};p[o.get("name")]=o.getControlValue();return p},setControlValue:function(q){var p=this,o=p.getInnerControl();o.val(q)},parseValue:function(o){return o},valid:function(){var o=this;o.validControl()},validControl:function(q){var o=this,p;q=q||o.getControlValue(),preError=o.get("error");p=o.getValidError(q);o.setInternal("hasValid",true);if(p){o._setError(p);o.fire("error",{msg:p,value:q});if(preError!==p){o.fire("validchange",{valid:false})}}else{o._clearError();o.fire("valid");if(preError){o.fire("validchange",{valid:true})}}return !p},focus:function(){this.getInnerControl().focus()},change:function(){var o=this.getInnerControl();o.change()},blur:function(){this.getInnerControl().blur()},isValid:function(){var o=this;if(!o.get("hasValid")){o.validControl()}return !o.get("error")},getError:function(){return this.get("error")},getErrors:function(){var o=this.getError();if(o){return[o]}return[]},clearErrors:function(p){var o=this;o._clearError();if(p&&o.getControlValue()!=o.get("value")){o.setControlValue(o.get("value"))}},getInnerControl:function(){return this.get("view").get("control")},getTipTigger:function(){return this.getInnerControl()},destructor:function(){var o=this,p=o.get("tip");if(p&&p.destroy){p.destroy()}},setInnerWidth:function(q){var p=this,o=p.getInnerControl(),s=o.siblings(),r=o.outerWidth()-o.width();h.each(s,function(t){r+=e(t).outerWidth()});o.width(q-r)},_resetTip:function(){var o=this,p=o.get("tip");if(p){p.resetVisible()}},resetTip:function(){this._resetTip()},_uiSetValue:function(p){var o=this;o.setControlValue(p);if(o.get("rendered")){o.validControl();o.onChange()}o._resetTip()},_uiSetDisabled:function(q){var p=this,o=p.getInnerControl(),r=p.get("children");o.attr("disabled",q);if(p.get("rendered")){if(q){p.clearErrors()}if(!q){p.valid()}}h.each(r,function(s){s.set("disabled",q)})},_uiSetWidth:function(p){var o=this;if(p!=null&&o.get("forceFit")){o.setInnerWidth(p)}}},{ATTRS:{hasValid:{value:false},forceFit:{value:false},tip:{},changeEvent:{value:"valid"},firstValidEvent:{value:"blur"},validEvent:{value:"keyup change"},name:{view:true},showError:{view:true,value:true},value:{view:true},label:{},controlContainer:{view:true},control:{view:true},controlTpl:{view:true,value:'<input type="text"/>'},events:{value:{error:false,valid:false,change:true,validchange:true}},tpl:{value:"<label>{label}</label>"},xview:{value:g}},PARSER:{control:function(o){var p=o.find("input,select,textarea");if(p.length){return p}return o},disabled:function(o){return !!o.attr("disabled")},value:function(q){var p=this,o="select,input,textarea",r=p.get("value");if(!r){if(q.is(o)){r=q.val();if(!r&&q.is("select")){r=q.attr("value")}}else{r=q.find(o).val()}}return r},name:function(r){var p=this,o="select,input,textarea",q=p.get("name");if(!q){if(r.is(o)){q=r.attr("name")}else{q=r.find(o).attr("name")}}return q}}},{xclass:"form-field"});i.View=g;a.exports=i});define("bui/form/valid",["bui/common","jquery"],function(d,c,f){var g=d("bui/common"),e=d("bui/form/rules");var b=function(){};b.prototype={getErrorsContainer:function(){var h=this,i=h.get("errorContainer");if(i){if(g.isString(i)){return h.get("el").find(i)}return i}return h.getContentElement()},showErrors:function(k){var i=this,j=i.getErrorsContainer(),h=i.get("errorTpl");i.clearErrors();if(!i.get("showError")){return}if(i.get("showOneError")){if(k&&k.length){i.showError(k[0],h,j)}return}g.each(k,function(l){if(l){i.showError(l,h,j)}})},showError:function(j,h,i){},clearErrors:function(){}};var a=function(){};a.ATTRS={defaultRules:{value:{}},defaultMessages:{value:{}},rules:{shared:false,value:{}},messages:{shared:false,value:{}},validator:{},errorContainer:{view:true},errorTpl:{view:true,value:'<span class="x-field-error"><span class="x-icon x-icon-mini x-icon-error">!</span><label class="x-field-error-text">{error}</label></span>'},showError:{view:true,value:true},showOneError:{},error:{},pauseValid:{value:false}};a.prototype={__bindUI:function(){var h=this;h.on("afterDisabledChange",function(j){var i=j.newVal;if(i){h.clearErrors(false,false)}else{h.valid()}})},isValid:function(){},valid:function(){},validControl:function(){},validRules:function(n,m){if(!n){return null}if(this.get("pauseValid")){return null}var h=this,l=h._getValidMessages(),j=null;for(var i in n){if(n.hasOwnProperty(i)){var k=n[i];j=e.valid(i,m,k,l[i],h);if(j){break}}}return j},_getValidMessages:function(){var h=this,j=h.get("defaultMessages"),i=h.get("messages");return g.merge(j,i)},getValidError:function(k){var h=this,j=h.get("validator"),i=null;i=h.validRules(h.get("defaultRules"),k)||h.validRules(h.get("rules"),k);if(!i&&!this.get("pauseValid")){if(h.parseValue){k=h.parseValue(k)}i=j?j.call(this,k):""}return i},getErrors:function(){},showErrors:function(i){var h=this,i=i||h.getErrors();h.get("view").showErrors(i)},clearErrors:function(k,i){i=i==null?true:i;var h=this,j=h.get("children");if(i){g.each(j,function(l){if(l.clearErrors){if(l.field){l.clearErrors(k)}else{l.clearErrors(k,i)}}})}h.set("error",null);h.get("view").clearErrors()},addRule:function(i,l,k){var h=this,m=h.get("rules"),j=h.get("messages");m[i]=l;if(k){j[i]=k}},addRules:function(j,i){var h=this;g.each(j,function(l,k){var m=i?i[k]:null;h.addRule(k,l,m)})},removeRule:function(i){var h=this,j=h.get("rules");delete j[i]},clearRules:function(){var h=this;h.set("rules",{})}};a.View=b;f.exports=a});define("bui/form/rules",["jquery","bui/common"],function(j,C,b){var e=j("jquery"),r=j("bui/form/rule");function w(F){return parseFloat(F)}function z(F){return BUI.Date.parse(F)}var o={};var l={add:function(G){var F;if(e.isPlainObject(G)){F=G.name;o[F]=new r(G)}else{if(G.get){F=G.get("name");o[F]=G}}return o[F]},remove:function(F){delete o[F]},get:function(F){return o[F]},valid:function(F,H,G,K,J){var I=l.get(F);if(I){return I.valid(H,G,K,J)}return null},isValid:function(F,H,G,I){return l.valid(F,H,G,I)==null}};var m=l.add({name:"required",msg:"不能为空！",validator:function(G,H,F){if(H!==false&&/^\s*$/.test(G)){return F}}});var B=l.add({name:"equalTo",msg:"两次输入不一致！",validator:function(I,G,F){var H=e(G);if(H.length){G=H.val()}return I===G?undefined:F}});var u=l.add({name:"min",msg:"输入值不能小于{0}！",validator:function(H,G,F){if(BUI.isString(H)){H=H.replace(/\,/g,"")}if(H!==""&&w(H)<w(G)){return F}}});var x=l.add({name:"max",msg:"输入值不能大于{0}！",validator:function(H,F,G){if(BUI.isString(H)){H=H.replace(/\,/g,"")}if(H!==""&&w(H)>w(F)){return G}}});var d=l.add({name:"length",msg:"输入值长度为{0}！",validator:function(H,F,G){if(H!=null){H=e.trim(H.toString());if(F!=H.length){return G}}}});var n=l.add({name:"minlength",msg:"输入值长度不小于{0}！",validator:function(I,H,G){if(I!=null){I=e.trim(I.toString());var F=I.length;if(F<H){return G}}}});var y=l.add({name:"maxlength",msg:"输入值长度不大于{0}！",validator:function(I,G,H){if(I){I=e.trim(I.toString());var F=I.length;if(F>G){return H}}}});var E=l.add({name:"regexp",msg:"输入值不符合{0}！",validator:function(H,G,F){if(G){return G.test(H)?undefined:F}}});var t=l.add({name:"email",msg:"不是有效的邮箱地址！",validator:function(H,G,F){H=e.trim(H);if(H){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(H)?undefined:F}}});var A=l.add({name:"date",msg:"不是有效的日期！",validator:function(H,G,F){if(BUI.isNumber(H)){return}if(BUI.isDate(H)){return}H=e.trim(H);if(H){return BUI.Date.isDateString(H)?undefined:F}}});var g=l.add({name:"minDate",msg:"输入日期不能小于{0}！",validator:function(I,H,F){if(I){var G=z(I);if(G&&G<z(H)){return F}}}});var p=l.add({name:"maxDate",msg:"输入日期不能大于{0}！",validator:function(H,I,F){if(H){var G=z(H);if(G&&G>z(I)){return F}}}});var c=l.add({name:"mobile",msg:"不是有效的手机号码！",validator:function(H,G,F){H=e.trim(H);if(H){return/^\d{11}$/.test(H)?undefined:F}}});var a=l.add({name:"number",msg:"不是有效的数字！",validator:function(H,G,F){if(BUI.isNumber(H)){return}H=H.replace(/\,/g,"");return !isNaN(H)?undefined:F}});function h(G,F,I){var H=G&&(G.equals!==false);if(H){return I<=F}return I<F}function q(F){return F==""||F==null}function f(N,G,H,P){var L=P.getFields(),F=true;for(var K=1;K<L.length;K++){var O=L[K],I=L[K-1],M,J;if(O&&I){M=O.get("value");J=I.get("value");if(!q(M)&&!q(J)&&!h(G,M,J)){F=false;break}}}if(!F){return H}return null}var v=l.add({name:"dateRange",msg:"结束日期不能小于起始日期！",validator:f});var s=l.add({name:"numberRange",msg:"结束数字不能小于开始数字！",validator:f});function i(F){var G=F.getFieldAt(0);if(G){return G.get("name")}return""}function k(K,H){if(!BUI.isArray(H)){H=[H]}if(!K||!H.length){return false}var G=!K?0:!BUI.isArray(K)?1:K.length;if(H.length==1){var J=H[0];if(!J){return true}if(J>G){return false}}else{var I=H[0],F=H[1];if(I>G||F<G){return false}}return true}var D=l.add({name:"checkRange",msg:"必须选中{0}项！",validator:function(G,J,F,L){var I=i(L),K,H=J;if(I&&H){K=G[I];if(!k(K,H)){return F}}return null}});b.exports=l});define("bui/form/rule",["jquery","bui/common"],function(d,f,c){var g=d("jquery"),i=d("bui/common");var b=function(j){b.superclass.constructor.call(this,j)};i.extend(b,i.Base);b.ATTRS={name:{},msg:{},validator:{value:function(l,k,j,m){}}};function a(r,q,k,m,o){if(i.isArray(k)&&i.isString(k[1])){if(k[1]){m=k[1]}k=k[0]}var p=r,l=p.get("validator"),n=e(r,k,m),j=true;q=q==null?"":q;return l.call(p,q,k,n,o)}function h(j){if(j==null){return{}}if(g.isPlainObject(j)){return j}var m=j,l={};if(i.isArray(j)){for(var k=0;k<m.length;k++){l[k]=m[k]}return l}return{"0":j}}function e(k,j,l){var m=h(j);l=l||k.get("msg");return i.substitute(l,m)}i.augment(b,{valid:function(l,k,n,m){var j=this;return a(j,l,k,n,m)}});c.exports=b});define("bui/form/remote",["jquery","bui/common"],function(c,b,d){var f=c("jquery"),g=c("bui/common");var a=function(){};a.ATTRS={isLoading:{},loadingEl:{}};a.prototype={getLoadingContainer:function(){},_setLoading:function(){var i=this,j=i.get("loadingEl"),h=i.get("loadingTpl");if(h&&!j){j=f(h).appendTo(i.getLoadingContainer());i.setInternal("loadingEl",j)}},_clearLoading:function(){var h=this,i=h.get("loadingEl");if(i){i.remove();h.setInternal("loadingEl",null)}},_uiSetIsLoading:function(i){var h=this;if(i){h._setLoading()}else{h._clearLoading()}}};var e=function(){};e.ATTRS={defaultRemote:{value:{method:"GET",cache:true,callback:function(h){return h}}},remoteDaly:{value:500},cacheMap:{value:{}},loadingTpl:{view:true,value:'<img src="http://img02.taobaocdn.com/tps/i2/T1NU8nXCVcXXaHNz_X-16-16.gif" alt="loading"/>'},isLoading:{view:true,value:false},remote:{setter:function(h){if(g.isString(h)){h={url:h}}return h}},remoteHandler:{},events:{value:{remotecomplete:false,remotestart:false}}};e.prototype={__bindUI:function(){var h=this;h.on("valid",function(i){if(h.get("remote")&&h.isValid()&&!h.get("pauseValid")){var k=h.getControlValue(),j=h.getRemoteParams();h._startRemote(j,k)}});h.on("error",function(i){if(h.get("remote")){h._cancelRemote()}})},_startRemote:function(m,l){var h=this,j=h.get("remoteHandler"),i=h.get("cacheMap"),k=h.get("remoteDaly");if(j){h._cancelRemote(j)}if(i[l]!=null){h._validResult(h._getCallback(),i[l]);return}function n(){h._remoteValid(m,j,l);h.set("isLoading",true)}j=setTimeout(n,k);h.setInternal("remoteHandler",j)},_validResult:function(k,j){var h=this,i=k(j);h.onRemoteComplete(i,j)},onRemoteComplete:function(j,k,i){var h=this;if(i==h.get("remoteHandler")){h.fire("remotecomplete",{error:j,data:k});h.set("isLoading",false);h.setInternal("remoteHandler",null)}},_getOptions:function(l){var h=this,k=h.get("remote"),j=h.get("defaultRemote"),i=g.merge(j,k,{data:l});return i},_getCallback:function(){return this._getOptions().callback},_remoteValid:function(m,k,l){var h=this,i=h.get("cacheMap"),j=h._getOptions(m);j.success=function(o){var p=j.callback,n=p(o);i[l]=o;h.onRemoteComplete(n,o,k)};j.error=function(n,p,o){h.onRemoteComplete(o,null,k)};h.fire("remotestart",{data:m});f.ajax(j)},getRemoteParams:function(){},clearCache:function(){this.set("cacheMap",{})},_cancelRemote:function(i){var h=this;i=i||h.get("remoteHandler");if(i){clearTimeout(i);h.setInternal("remoteHandler",null)}h.set("isLoading",false)}};e.View=a;d.exports=e});define("bui/form/fields/text",["jquery","bui/common","bui/overlay"],function(d,b,e){var c=d("bui/form/fields/base");var a=c.extend({},{xclass:"form-field-text"});e.exports=a});define("bui/form/fields/date",["jquery","bui/common","bui/overlay"],function(d,b,e){var g=d("jquery"),h=d("bui/common"),c=d("bui/form/fields/base"),a=h.Date;var f=c.extend({renderUI:function(){var i=this,j=i.get("datePicker");if(g.isPlainObject(j)){i.initDatePicker(j)}if((j.get&&j.get("showTime"))||j.showTime){i.getInnerControl().addClass("calendar-time")}},initDatePicker:function(j){var i=this;d.async("bui/calendar",function(k){j.trigger=i.getInnerControl();j.autoRender=true;j=new k.DatePicker(j);i.set("datePicker",j);i.set("isCreatePicker",true);i.get("children").push(j)})},setControlValue:function(k){var j=this,i=j.getInnerControl();if(h.isDate(k)){k=a.format(k,j._getFormatMask())}i.val(k)},_getFormatMask:function(){var i=this,j=i.get("datePicker");if(j.showTime||(j.get&&j.get("showTime"))){return"yyyy-mm-dd HH:MM:ss"}return"yyyy-mm-dd"},parseValue:function(i){if(h.isNumber(i)){return new Date(i)}return a.parse(i)},isCurrentValue:function(i){return a.isEquals(i,this.get("value"))},_uiSetMax:function(j){this.addRule("max",j);var i=this,k=i.get("datePicker");if(k){if(k.set){k.set("maxDate",j)}else{k.maxDate=j}}},_uiSetMin:function(j){this.addRule("min",j);var i=this,k=i.get("datePicker");if(k){if(k.set){k.set("minDate",j)}else{k.minDate=j}}}},{ATTRS:{controlTpl:{value:'<input type="text" class="calendar"/>'},defaultRules:{value:{date:true}},max:{},min:{},value:{setter:function(i){if(h.isNumber(i)){return new Date(i)}return i}},datePicker:{shared:false,value:{}},isCreatePicker:{value:true}},PARSER:{datePicker:function(k){var i=this,j=i.get("datePicker")||{};if(k.hasClass("calendar-time")){h.mix(j,{showTime:true})}return j}}},{xclass:"form-field-date"});e.exports=f});define("bui/form/fields/select",["jquery","bui/common","bui/overlay"],function(b,d,a){var e=b("jquery"),h=b("bui/common"),g=b("bui/form/fields/base");function c(k,m,l){k.children().remove();var j=l.get("emptyText");if(j&&l.get("showBlank")){f("",j,k)}h.each(m,function(n){f(n.value,n.text,k)})}function f(m,n,j){var l=new Option(n,m),k=j[0].options;k[k.length]=l}var i=g.extend({renderUI:function(){var l=this,k=l.getInnerControl(),j=l.get("select");if(l.get("srcNode")&&k.is("select")){return}if(e.isPlainObject(j)){l._initSelect(j)}},_initSelect:function(k){var j=this,l=j.get("items");b.async("bui/select",function(m){k.render=j.getControlContainer();k.valueField=j.getInnerControl();k.autoRender=true;k=new m.Select(k);j.set("select",k);j.set("isCreate",true);j.get("children").push(k);k.on("change",function(n){var o=k.getSelectedValue();j.set("value",o)})})},setItems:function(l){var k=this,j=k.get("select");if(e.isPlainObject(l)){var m=[];h.each(l,function(o,p){m.push({value:p,text:o})});l=m}var n=k.getInnerControl();if(n.is("select")){c(n,l,k);k.setControlValue(k.get("value"));if(!k.getControlValue()){k.setInternal("value","")}}if(j){if(j.set){j.set("items",l)}else{j.items=l}}},setControlValue:function(m){var l=this,k=l.get("select"),j=l.getInnerControl();j.val(m);if(k&&k.set&&k.getSelectedValue()!==m){k.setSelectedValue(m)}},getSelectedText:function(){var l=this,k=l.get("select"),j=l.getInnerControl();if(j.is("select")){var n=j[0],m=n.options[n.selectedIndex];return m?m.text:""}else{return k.getSelectedText()}},getTipTigger:function(){var k=this,j=k.get("select");if(j&&j.rendered){return j.get("el").find("input")}return k.get("el")},_uiSetItems:function(j){if(j){this.setItems(j)}},setInnerWidth:function(m){var l=this,k=l.getInnerControl(),j=l.get("select"),n=k.outerWidth()-k.width();k.width(m-n);if(j&&j.set){j.set("width",m)}}},{ATTRS:{items:{},controlTpl:{value:'<input type="hidden"/>'},showBlank:{value:true},emptyText:{value:"请选择"},select:{shared:false,value:{}}},PARSER:{emptyText:function(k){if(!this.get("showBlank")){return""}var j=k.find("option"),l=this.get("emptyText");if(j.length){l=e(j[0]).text()}return l}}},{xclass:"form-field-select"});a.exports=i});define("bui/form/fields/hidden",["jquery","bui/common","bui/overlay"],function(d,b,e){var c=d("bui/form/fields/base");var a=c.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},tpl:{value:""}}},{xclass:"form-field-hidden"});e.exports=a});define("bui/form/fields/number",["jquery","bui/common","bui/overlay"],function(c,a,d){var b=c("bui/form/fields/base"),e=b.extend({parseValue:function(h){if(h==""||h==null){return null}if(BUI.isNumber(h)){return h}var f=this,g=f.get("allowDecimals");h=h.replace(/\,/g,"");if(!g){return parseInt(h,10)}return parseFloat(parseFloat(h).toFixed(f.get("decimalPrecision")))},_uiSetMax:function(f){this.addRule("max",f)},_uiSetMin:function(f){this.addRule("min",f)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:true,max:true}},validEvent:{value:"keyup change"},defaultRules:{value:{number:true}},allowDecimals:{value:true},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});d.exports=e});define("bui/form/fields/check",["jquery","bui/common","bui/overlay"],function(c,a,d){var f=c("jquery"),b=c("bui/form/fields/base");var e=b.extend({onValid:function(){var g=this,h=g._getControlChecked();g.setInternal("checked",h);g.fire("change");if(h){g.fire("checked")}else{g.fire("unchecked")}},_setControlChecked:function(i){var h=this,g=h.getInnerControl();g.attr("checked",!!i)},_getControlChecked:function(){var h=this,g=h.getInnerControl();return !!g.attr("checked")},_uiSetValue:function(g){this.setControlValue(g)},_uiSetWidth:function(g){},_uiSetChecked:function(h){var g=this;g._setControlChecked(h);if(g.get("rendered")){g.onValid()}}},{ATTRS:{validEvent:{value:"click"},checked:{value:false},events:{value:{"checked":false,"unchecked":false}}},PARSER:{checked:function(g){return !!g.attr("checked")}}},{xclass:"form-check-field"});d.exports=e});define("bui/form/fields/radio",["jquery","bui/common","bui/overlay"],function(c,b,d){var a=c("bui/form/fields/check");var e=a.extend({bindUI:function(){var f=this,h=f.get("parent"),g=f.get("name");if(h){f.getInnerControl().on("click",function(j){var i=h.getFields(g);BUI.each(i,function(k){if(k!=f){k.set("checked",false)}})})}}},{ATTRS:{controlTpl:{view:true,value:'<input type="radio"/>'},controlContainer:{value:".radio"},tpl:{value:'<label><span class="radio"></span>{label}</label>'}}},{xclass:"form-field-radio"});d.exports=e});define("bui/form/fields/checkbox",["jquery","bui/common","bui/overlay"],function(d,c,e){var b=d("bui/form/fields/check");var a=b.extend({},{ATTRS:{controlTpl:{view:true,value:'<input type="checkbox"/>'},controlContainer:{value:".checkbox"},tpl:{value:'<label><span class="checkbox"></span>{label}</label>'}}},{xclass:"form-field-checkbox"});e.exports=a});define("bui/form/fields/plain",["jquery","bui/common","bui/overlay"],function(c,a,e){var g=c("jquery"),b=c("bui/form/fields/base");var f=b.View.extend({_uiSetValue:function(n){var l=this,p=l.get("textEl"),h=l.getControlContainer(),k=l.get("renderer"),o=k?k(n):n,i=l.get("width"),j=0,m;if(p){p.remove()}o=o||"&nbsp;";m=BUI.substitute(l.get("textTpl"),{text:o});p=g(m).appendTo(h);j=p.outerWidth()-p.width();p.width(i-j);l.set("textEl",p)}},{ATTRS:{textEl:{},value:{}}},{xclass:"form-field-plain-view"});var d=b.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},textTpl:{view:true,value:'<span class="x-form-text">{text}</span>'},renderer:{view:true,value:function(h){return h}},tpl:{value:""},xview:{value:f}}},{xclass:"form-field-plain"});e.exports=d});define("bui/form/fields/list",["jquery","bui/common","bui/list","bui/data","bui/overlay"],function(c,a,e){var g=c("jquery"),h=c("bui/common"),d=c("bui/list"),b=c("bui/form/fields/base");function f(i){var j=i;if(g.isPlainObject(i)){j=[];h.each(i,function(m,l){j.push({text:m,value:l})})}return j}var d=b.extend({initializer:function(){var i=this;i._initList()},_getList:function(){var i=this,j=i.get("children");return j[0]},bindUI:function(){var i=this,j=i._getList();if(j){j.on("selectedchange",function(){var k=i._getListValue(j);i.set("value",k)})}},_getListValue:function(j){var i=this;j=j||i._getList();return j.getSelectionValues().join(",")},setControlValue:function(l){var j=this,i=j.getInnerControl(),k=j._getList();i.val(l);if(j._getListValue(k)!==l&&k.getCount()){if(k.get("multipleSelect")){k.clearSelection()}k.setSelectionByField(l.split(","))}},syncUI:function(){this.set("list",this._getList())},_initList:function(){var i=this,j=i.get("defaultListCfg"),k=i.get("children"),l=i.get("list")||{};if(k[0]){return}if(g.isPlainObject(l)){h.mix(l,j)}k.push(l)},setItems:function(j){var i=this,l=i.get("value"),k=i._getList();k.set("items",f(j));k.setSelectionByField(l.split(","))},_uiSetItems:function(i){if(i){this.setItems(i)}}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},defaultListCfg:{value:{xclass:"simple-list"}},items:{setter:function(i){if(g.isPlainObject(i)){var j=[];h.each(i,function(m,l){j.push({value:l,text:m})});i=j}return i}},list:{}},PARSER:{list:function(i){var j=i.find(".bui-simple-list");if(j.length){return{srcNode:j}}}}},{xclass:"form-field-list"});e.exports=d});define("bui/form/fields/textarea",["jquery","bui/common","bui/overlay"],function(c,a,d){var b=c("bui/form/fields/base");var e=b.extend({_uiSetRows:function(h){var g=this,f=g.getInnerControl();if(h){f.attr("rows",h)}},_uiSetCols:function(h){var g=this,f=g.getInnerControl();if(h){f.attr("cols",h)}}},{ATTRS:{controlTpl:{value:"<textarea></textarea>"},rows:{},cols:{},decorateCfgFields:{value:{"rows":true,"cols":true}}}},{xclass:"form-field-textarea"});d.exports=e});define("bui/form/fields/uploader",["bui/common","jquery","bui/overlay"],function(d,b,f){var g=d("bui/common"),h=g.JSON,c=d("bui/form/fields/base"),e=d("bui/form/rules");var a=c.extend({renderUI:function(){var j=this,i=j.getInnerControl();if(j.get("srcNode")&&i.get(0).type==="file"){return}j._initControlValue();j._initUpload()},_initUpload:function(){var i=this,j=i.get("children"),k=i.get("uploader")||{};d.async("bui/uploader",function(l){k.render=i.getControlContainer();k.autoRender=true;k=new l.Uploader(k);i.set("uploader",k);i.set("isCreate",true);i.get("children").push(k);i._initQueue(k.get("queue"));k.on("success",function(n){var m=i._getUploaderResult();i.setControlValue(m)});k.get("queue").on("itemremoved",function(){var m=i._getUploaderResult();i.setControlValue(m)})})},_getUploaderResult:function(){var k=this,m=k.get("uploader"),j=m.get("queue"),l=j.getItems(),i=[];g.each(l,function(n){n.result&&i.push(n.result)});return i},setControlValue:function(k){var j=this,i=j.getInnerControl();i.val(h.stringify(k))},_initControlValue:function(){var j=this,i=j.getControlValue(),k;if(i){k=g.JSON.parse(i);j.set("value",k)}},_initQueue:function(k){var j=this,l=j.get("value"),i=[];g.each(l,function(n){var m=g.cloneObject(n);m.success=true;m.result=n;i.push(m)});k&&k.setItems(i)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},uploader:{setter:function(i){var j=this.get("disabled");i&&i.isController&&i.set("disabled",j);return i}},disabled:{setter:function(j){var i=this,k=i.get("uploader");k&&k.isController&&k.set("disabled",j)}},value:{shared:false,value:[]},defaultRules:function(){uploader:true}}},{xclass:"form-field-uploader"});e.add({name:"uploader",msg:"上传文件选择有误！",validator:function(k,j,i,m){var l=m.get("uploader");if(l&&!l.isValid()){return i}}});f.exports=a});define("bui/form/fields/checklist",["bui/common","jquery","bui/list","bui/data","bui/overlay"],function(d,c,e){var f=d("bui/common"),b=d("bui/form/fields/list");var a=b.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-checkbox"></span>{text}</li>',multipleSelect:true,allowTextSelection:false}}}},{xclass:"form-field-checklist"});e.exports=a});define("bui/form/fields/radiolist",["bui/common","jquery","bui/list","bui/data","bui/overlay"],function(c,b,d){var e=c("bui/common"),a=c("bui/form/fields/list");var f=a.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-radio"></span>{text}</li>',allowTextSelection:false}}}},{xclass:"form-field-radiolist"});d.exports=f});define("bui/form/groupvalid",["jquery","bui/common"],function(e,c,f){var h=e("jquery"),d="x-form-error",b=e("bui/form/valid");function a(){}BUI.augment(a,b.View,{showError:function(m,i,j){var l=BUI.substitute(i,{error:m}),k=h(l);k.appendTo(j);k.addClass(d)},clearErrors:function(){var i=this,j=i.getErrorsContainer();j.children("."+d).remove()}});function g(){}g.ATTRS=ATTRS=BUI.merge(true,b.ATTRS,{events:{value:{validchange:true,change:true}}});BUI.augment(g,b,{__bindUI:function(){var i=this,j="validchange change";i.on(j,function(m){var k=m.target;if(k!=this&&i.get("showError")){var l=k.isValid();if(i._hasAllChildrenValid()){l=l&&i.isChildrenValid();if(l){i.validControl(i.getRecord());l=i.isSelfValid()}}if(!l){i.showErrors()}else{i.clearErrors()}}})},isValid:function(){if(this.get("disabled")){return true}var i=this,j=i.isChildrenValid();return j&&i.isSelfValid()},valid:function(){var i=this,j=i.get("children");if(i.get("disabled")){return}BUI.each(j,function(k){if(!k.get("disabled")){k.valid()}})},_hasAllChildrenValid:function(){var i=this,j=i.get("children"),k=true;BUI.each(j,function(l){if(!l.get("disabled")&&l.get("hasValid")===false){k=false;return false}});return k},isChildrenValid:function(){var i=this,j=i.get("children"),k=true;BUI.each(j,function(l){if(!l.get("disabled")&&!l.isValid()){k=false;return false}});return k},isSelfValid:function(){return !this.get("error")},validControl:function(j){var i=this,k=i.getValidError(j);i.set("error",k)},getErrors:function(){var i=this,j=i.get("children"),m=i.get("showChildError"),l=null,k=[];if(m){BUI.each(j,function(n){if(n.getErrors){k=k.concat(n.getErrors())}})}if(i._hasAllChildrenValid()&&i.isChildrenValid()){l=i.get("error");if(l){k.push(l)}}return k},_uiSetErrorTpl:function(j){var i=this,k=i.get("children");BUI.each(k,function(l){if(!l.get("userConfig")["errorTpl"]){l.set("errorTpl",j)}})}});g.View=a;f.exports=g});define("bui/form/form",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(b,d,a){var e=b("jquery"),h=b("bui/common"),g=b("bui/form/fieldcontainer"),j=h.Component,i={NORMAL:"normal",AJAX:"ajax",IFRAME:"iframe"};var c=g.View.extend({_uiSetMethod:function(k){this.get("el").attr("method",k)},_uiSetAction:function(k){this.get("el").attr("action",k)}},{ATTRS:{method:{},action:{}}},{xclass:"form-view"});var f=g.extend({renderUI:function(){var k=this,m=k.get("buttonBar"),l;if(e.isPlainObject(m)&&k.get("buttons")){l=h.merge(k.getDefaultButtonBarCfg(),m);k._initButtonBar(l)}k._initSubmitMask()},_initButtonBar:function(l){var k=this;b.async("bui/toolbar",function(m){buttonBar=new m.Bar(l);k.set("buttonBar",buttonBar)})},bindUI:function(){var k=this,l=k.get("el");l.on("submit",function(m){k.valid();if(!k.isValid()||k.onBeforeSubmit()===false){m.preventDefault();k.focusError();return}if(k.isValid()&&k.get("submitType")===i.AJAX){m.preventDefault();k.ajaxSubmit()}})},getDefaultButtonBarCfg:function(){var k=this,l=k.get("buttons");return{autoRender:true,elCls:"toolbar",render:k.get("el"),items:l,defaultChildClass:"bar-item-button"}},focusError:function(){var l=this,k=l.getFields();h.each(k,function(n){if(n.get("visible")&&!n.get("disabled")&&!n.isValid()){try{n.focus()}catch(m){h.log(m)}return false}})},submit:function(m){var k=this,l=k.get("submitType");k.valid();if(k.isValid()){if(k.onBeforeSubmit()==false){return}if(l===i.NORMAL){k.get("el")[0].submit()}else{if(l===i.AJAX){k.ajaxSubmit(m)}}}else{k.focusError()}},ajaxSubmit:function(s){var n=this,k=n.get("method"),l=n.get("action"),o=n.get("callback"),r=n.get("submitMask"),m=n.serializeToObject(),p,q=h.merge(true,{url:l,type:k,dataType:"json",data:m},s);if(s&&s.success){p=s.success}q.success=function(t){if(r&&r.hide){r.hide()}if(p){p(t)}o&&o.call(n,t)};if(r&&r.show){r.show()}e.ajax(q)},_initSubmitMask:function(){var k=this,l=k.get("submitType"),m=k.get("submitMask");if(l===i.AJAX&&m){b.async("bui/mask",function(o){var n=e.isPlainObject(m)?m:{};m=new o.LoadMask(h.mix({el:k.get("el")},n));k.set("submitMask",m)})}},serializeToObject:function(){return h.FormHelper.serializeToObject(this.get("el")[0])},toObject:function(){return this.serializeToObject()},onBeforeSubmit:function(){return this.fire("beforesubmit")},reset:function(){var k=this,l=k.get("initRecord");k.setRecord(l)},resetTips:function(){var l=this,k=l.getFields();h.each(k,function(m){m.resetTip()})},destructor:function(){var k=this,l=k.get("buttonBar"),m=k.get("submitMask");if(l&&l.destroy){l.destroy()}if(m&&m.destroy){m.destroy()}},_uiSetInitRecord:function(k){this.setRecord(k)}},{ATTRS:{action:{view:true,value:""},allowTextSelection:{value:true},events:{value:{beforesubmit:false}},method:{view:true,value:"get"},defaultLoaderCfg:{value:{autoLoad:true,property:"record",dataType:"json"}},submitMask:{value:{msg:"正在提交。。。"}},submitType:{value:"normal"},focusError:{value:true},callback:{},decorateCfgFields:{value:{"method":true,"action":true}},defaultChildClass:{value:"form-field"},elTagName:{value:"form"},buttons:{},buttonBar:{shared:false,value:{}},childContainer:{value:".x-form-fields"},initRecord:{},showError:{value:false},xview:{value:c},tpl:{value:'<div class="x-form-fields"></div>'}}},{xclass:"form"});f.View=c;a.exports=f});define("bui/form/row",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(c,a,d){var f=c("bui/common"),b=c("bui/form/fieldcontainer");var e=b.extend({},{ATTRS:{elCls:{value:"row"},defaultChildCfg:{value:{tpl:' <label class="control-label">{label}</label>              <div class="controls">              </div>',childContainer:".controls",showOneError:true,controlContainer:".controls",elCls:"control-group span8",errorTpl:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'}},defaultChildClass:{value:"form-field-text"}}},{xclass:"form-row"});d.exports=e});define("bui/form/fieldgroup",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(c,a,d){var e=c("bui/common"),b=c("bui/form/group/base");e.mix(b,{Range:c("bui/form/group/range"),Check:c("bui/form/group/check"),Select:c("bui/form/group/select")});return b});define("bui/form/group/base",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(d,a,e){var f=d("bui/common"),c=d("bui/form/fieldcontainer");var b=c.extend({},{ATTRS:{label:{view:true},defaultChildClass:{value:"form-field"}}},{xclass:"form-group"});e.exports=b});define("bui/form/group/range",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(d,a,e){var c=d("bui/form/group/base");function b(g,h,j){var i=g.get("allowEqual");if(i){return j<=h}return j<h}var f=c.extend({},{ATTRS:{rangeText:{value:"开始不能大于结束！"},allowEqual:{value:true},validator:{value:function(l){var n=this,m=n.getFields(),g=true;for(var k=1;k<m.length;k++){var p=m[k],h=m[k-1],o,j;if(p&&h){o=p.get("value");j=h.get("value");if(!b(n,o,j)){g=false;break}}}if(!g){return n.get("rangeText")}return null}}}},{xclass:"form-group-range"});e.exports=f});define("bui/form/group/check",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(c,a,d){var b=c("bui/form/group/base");function f(g){var h=g.getFieldAt(0);if(h){return h.get("name")}return""}var e=b.extend({bindUI:function(){var g=this;g.on("change",function(l){var k=f(g),j=g.get("range"),i=g.getRecord(),m=i[k],h=j[1];if(m&&m.length>=h){g._setFieldsEnable(k,false)}else{g._setFieldsEnable(k,true)}})},_setFieldsEnable:function(j,i){var h=this,g=h.getFields(j);BUI.each(g,function(k){if(i){k.enable()}else{if(!k.get("checked")){k.disable()}}})},_uiSetRange:function(g){this.addRule("checkRange",g)}},{ATTRS:{range:{setter:function(g){if(BUI.isString(g)||BUI.isNumber(g)){g=[parseInt(g,10)]}return g}}}},{xclass:"form-group-check"});d.exports=e});define("bui/form/group/select",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,f,b){var g=e("bui/form/group/base"),i=e("bui/data"),c=BUI.Component.UIBase.Bindable;function d(k){var j=[];BUI.each(k,function(l){j.push({text:l.text,value:l.id})});return j}var a=g.extend([c],{initializer:function(){var j=this,l=j.get("url"),k=j.get("store")||j._getStore();if(!k.isStore){k.autoLoad=true;if(l){k.url=l}k=new i.TreeStore(k)}j.set("store",k)},bindUI:function(){var j=this;j.on("change",function(k){var n=k.target;if(n!=j){var m=n,l=m.get("value"),o=j._getFieldIndex(m)+1;j._valueChange(l,o)}})},onLoad:function(l){var j=this,k=l?l.node:j.get("store").get("root");j._setFieldItems(k.level,k.children)},_getStore:function(){var j=this,k=j.get("type");if(k&&h[k]){return h[k]}return{}},_valueChange:function(m,n){var j=this,k=j.get("store");if(m){var l=k.findNode(m);if(!l){return}if(k.isLoaded(l)){j._setFieldItems(n,l.children)}else{k.loadNode(l)}}else{j._setFieldItems(n,[])}},_setFieldItems:function(n,l){var j=this,m=j.getFieldAt(n),k=d(l);if(m){m.setItems(k);j._valueChange(m.get("value"),n+1)}},_getFieldIndex:function(l){var k=this,j=k.getFields();return BUI.Array.indexOf(l,j)}},{ATTRS:{type:{},store:{}}},{xclass:"form-group-select"});var h={};a.addType=function(k,j){h[k]=j};a.addType("city",{proxy:{url:"http://lp.taobao.com/go/rgn/citydistrictdata.php",dataType:"jsonp"},map:{isleaf:"leaf",value:"text"}});b.exports=a});define("bui/form/hform",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(c,a,d){var e=c("jquery"),g=c("bui/common"),b=c("bui/form/form");var f=b.extend({getDefaultButtonBarCfg:function(){var h=this,i=h.get("buttons");return{autoRender:true,elCls:"actions-bar toolbar row",tpl:'<div class="form-actions span21 offset3"></div>',childContainer:".form-actions",render:h.get("el"),items:i,defaultChildClass:"bar-item-button"}}},{ATTRS:{defaultChildClass:{value:"form-row"},errorTpl:{value:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'},elCls:{value:"form-horizontal"}},PARSER:{}},{xclass:"form-horizontal"});d.exports=f});define("bui/editor",["bui/common","jquery","bui/form","bui/overlay","bui/list","bui/data"],function(d,b,e){var f=d("bui/common"),c=d("bui/form"),a=f.namespace("Editor");f.mix(a,{Editor:d("bui/editor/editor"),RecordEditor:d("bui/editor/record"),DialogEditor:d("bui/editor/dialog")});return a});define("bui/editor/editor",["bui/common","jquery","bui/overlay"],function(c,b,d){var f=c("bui/common"),a=c("bui/overlay").Overlay;CLS_TIPS="x-editor-tips",Mixin=c("bui/editor/mixin");var e=a.extend([Mixin],{bindUI:function(){var h=this,g=h.getInnerControl();h.on("validchange",function(i){if(!h.isValid()&&h.get("visible")){h._showError(h.getErrors())}else{h._hideError()}});h.on("hide",function(){h._hideError()});h.on("show",function(){if(!h.isValid()){h._showError(h.getErrors())}})},_initOverlay:function(){var g=this,i=g.get("tooltip"),h=new a(i);h.render();g.set("overlay",h);return h},_getErrorList:function(){var g=this,h=g.get("overlay");return h&&h.get("children")[0]},_showError:function(l){var g=this,i=g.get("overlay")||g._initOverlay(),j=g._getErrorList(),k=g.get("errorAlign"),h=f.Array.map(l,function(m){return{error:m}});j.set("items",h);k.node=g.get("el");i.set("align",k);i.show()},_hideError:function(){var g=this,h=g.get("overlay");h&&h.hide()},clearErrors:function(){var h=this,g=h.getInnerControl();g.clearErrors();h._hideError()},getSourceValue:function(){var g=this,h=g.get("curTrigger"),j=g.get("parser"),i=h.text();if(j){i=j.call(this,i,h)}return i},updateSource:function(i){var g=this,h=g.get("curTrigger");if(h&&h.length){i=g._formatText(i);h.text(i)}},_formatText:function(i){var g=this,h=g.get("formatter");if(h){i=h.call(g,i)}return i},_uiSetWidth:function(i){var h=this;if(i!=null){var g=h.getInnerControl();if(g.set){g.set("width",i)}}}},{ATTRS:{innerValueField:{value:"value"},emptyValue:{value:""},autoHide:{value:true},controlCfgField:{value:"field"},defaultChildCfg:{value:{tpl:"",forceFit:true,errorTpl:""}},tooltip:{valueFn:function(){return{children:[{xclass:"simple-list",itemTpl:'<li><span class="x-icon x-icon-mini x-icon-error" title="{error}">!</span>&nbsp;<span>{error}</span></li>'}],elCls:CLS_TIPS}}},defaultChildClass:{value:"form-field"},align:{value:{points:["tl","tl"]}},parser:{},formatter:{},errorAlign:{value:{points:["bl","tl"],offset:[0,10]}},overlay:{},field:{value:{}}}},{xclass:"editor"});d.exports=e});define("bui/editor/mixin",["jquery"],function(b,a,d){var e=b("jquery");function c(h){var g=h,i=g.get("controlCfgField"),j=g.get(i),k=g.addChild(j);g.setInternal(i,k)}var f=function(){c(this)};f.ATTRS={acceptEvent:{value:"autohide"},preventHide:{value:true},changeSourceEvent:{value:"show triggerchange"},ignoreInputFields:{value:false},innerValueField:{},emptyValue:{},controlCfgField:{},focusable:{value:true},autoUpdate:{value:true},events:{value:{accept:false,cancel:false}}};f.prototype={__bindUI:function(){var g=this,i=g.get("acceptEvent"),h=g.get("changeSourceEvent");if(i){g.on(i,function(){if(g.accept()){return}else{if(g.get("preventHide")){return false}else{g.cancel()}}})}if(h){g.on(h,function(){g.setValue(g.getSourceValue());if(g.get("visible")){g.focus()}})}},getInnerControl:function(){var g=this,h=g.get("children");return h[0]},setValue:function(j,i){var h=this,g=h.getInnerControl();h.set("editValue",j);h.clearControlValue();g.set(h.get("innerValueField"),j);if(!j){h.valid()}if(i){h.clearErrors()}},getValue:function(){var h=this,g=h.getInnerControl();return g.get(h.get("innerValueField"))},isValid:function(){var h=this,g=h.getInnerControl();return g.isValid?g.isValid():true},valid:function(){var h=this,g=h.getInnerControl();g.valid&&g.valid()},getErrors:function(){var h=this,g=h.getInnerControl();return g.getErrors?g.getErrors():[]},isChange:function(){var g=this,h=g.get("editValue"),i=g.getValue();return h!==i},clearValue:function(){this.clearControlValue();this.clearErrors()},clearControlValue:function(){var h=this,g=h.getInnerControl();g.set(h.get("innerValueField"),h.get("emptyValue"))},clearErrors:function(){var h=this,g=h.getInnerControl();g.clearErrors()},getSourceValue:function(){},updateSource:function(){},handleNavEsc:function(){this.cancel()},handleNavEnter:function(h){var g=h.target;if(g.tagName==="TEXTAREA"){return}if(g.tagName==="BUTTON"){e(g).trigger("click")}this.accept()},focus:function(){var h=this,g=h.getInnerControl();g.focus&&g.focus()},accept:function(){var g=this,h;g.valid();if(!g.isValid()){return false}h=g.getValue();if(g.get("autoUpdate")){g.updateSource(h)}if(g.fire("beforeaccept",{value:h})==false){return}g.fire("accept",{value:h,editValue:g.get("editValue")});g.hide();return true},cancel:function(){this.fire("cancel");this.clearValue();this.close()}};d.exports=f});define("bui/editor/record",["bui/common","jquery","bui/overlay"],function(c,b,d){var f=c("bui/common"),a=c("bui/editor/editor");var e=a.extend({getSourceValue:function(){return this.get("record")},updateSource:function(i){var g=this,h=g.get("record");f.mix(h,i)},_uiSetRecord:function(g){this.setValue(g)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},emptyValue:{value:{}},autoHide:{value:false},record:{value:{}},controlCfgField:{value:"form"},form:{value:{}},errorAlign:{value:{points:["tr","tl"],offset:[10,0]}},defaultChildCfg:{valueFn:function(){var g=this;return{xclass:"form",errorTpl:"",showError:true,showChildError:true,defaultChildCfg:{elCls:"bui-inline-block",tpl:"",forceFit:true},buttons:[{btnCls:"button button-primary",text:"确定",handler:function(){g.accept()}},{btnCls:"button",text:"取消",handler:function(){g.cancel()}}]}}}}},{xclass:"record-editor"});d.exports=e});define("bui/editor/dialog",["jquery","bui/overlay","bui/common"],function(c,b,d){var f=c("jquery"),a=c("bui/overlay").Dialog,g=c("bui/editor/mixin");var e=a.extend([g],{getSourceValue:function(){return this.get("record")},handleNavEnter:function(j){var h=this,k=h.get("success"),i=j.target;if(i.tagName==="TEXTAREA"){return}if(i.tagName==="BUTTON"){f(i).trigger("click")}if(k){k.call(h)}else{this.accept()}},cancel:function(){this.fire("cancel");this.clearValue();this.close()},updateSource:function(j){var h=this,i=h.get("record");BUI.mix(i,j)},_uiSetRecord:function(h){this.setValue(h)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},record:{value:{}},emptyValue:{shared:false,value:{}},controlCfgField:{value:"form"},changeSourceEvent:{value:""},defaultChildCfg:{value:{xclass:"form-horizontal"}},focusable:{value:false},success:{value:function(){this.accept()}},cancel:{value:function(){this.cancel()}},form:{value:{}}}},{xclass:"dialog-editor"});d.exports=e});define("bui/tooltip",["bui/common","jquery","bui/overlay"],function(c,a,d){var g=c("bui/common"),e=g.namespace("Tooltip"),b=c("bui/tooltip/tip"),f=c("bui/tooltip/tips");g.mix(e,{Tip:b,Tips:f});d.exports=e});define("bui/tooltip/tip",["jquery","bui/common","bui/overlay"],function(d,e,b){var f=d("jquery"),h=d("bui/common"),a=d("bui/overlay"),j="x-align-",g={left:["cl","cr"],right:["cr","cl"],top:["tc","bc"],bottom:["bc","tc"],"top-left":["tl","bl"],"top-right":["tr","br"],"bottom-left":["bl","tl"],"bottom-right":["br","tr"]};function k(l,m){if(l==="left"){return[-1*m,-4]}if(l==="right"){return[m,-4]}if(l.indexOf("top")){return[0,m]}if(l.indexOf("bottom")){return[0,-1*m]}}var c=a.OverlayView.extend({renderUI:function(){},_getTitleContainer:function(){return this.get("el")},_uiSetTitle:function(q){var m=this,l=m.get("titleTpl"),n=m._getTitleContainer(),p=m.get("titleEl"),o;if(p){p.remove()}q=q||"";if(h.isString(q)){q={title:q}}o=h.substitute(l,q);p=f(o).appendTo(n);m.set("titleEl",p)},_uiSetAlignType:function(m,n){var l=this;if(n&&n.prevVal){l.get("el").removeClass(j+n.prevVal)}if(m){l.get("el").addClass(j+m)}}},{ATTRS:{title:{},titleEl:{},alignType:{}}},{xclass:"tooltip-view"});var i=a.Overlay.extend({_uiSetAlignType:function(n){var l=this,o=l.get("offset"),p=l.get("align")||{},m=g[n];if(m){p.points=m;if(o){p.offset=k(n,o)}l.set("align",p)}}},{ATTRS:{delegateTrigger:{value:true},alignType:{view:true},title:{view:true},showArrow:{value:true},arrowContainer:{view:true},autoHide:{value:true},autoHideType:{value:"leave"},offset:{value:0},triggerEvent:{value:"mouseover"},titleTpl:{view:true,value:"<span>{title}</span>"},xview:{value:c}}},{xclass:"tooltip"});i.View=c;b.exports=i});define("bui/tooltip/tips",["bui/common","jquery","bui/overlay"],function(d,a,e){function c(h){return/^{.*}$/.test(h)}var g=d("bui/common"),b=d("bui/tooltip/tip"),f=function(h){f.superclass.constructor.call(this,h)};f.ATTRS={tip:{},defaultAlignType:{}};g.extend(f,g.Base);g.augment(f,{_init:function(){this._initDom();this._initEvent()},_initDom:function(){var h=this,i=h.get("tip"),j;if(i&&!i.isController){j=i.alignType;i=new b(i);i.render();h.set("tip",i);if(j){h.set("defaultAlignType",j)}}},_initEvent:function(){var h=this,i=h.get("tip");i.on("triggerchange",function(k){var j=k.curTrigger;h._replaceTitle(j);h._setTitle(j,i)})},_replaceTitle:function(h){var i=h.attr("title");if(i){h.attr("data-title",i);h[0].removeAttribute("title")}},_setTitle:function(j,k){var h=this,l=j.attr("data-title"),i=j.attr("data-align")||h.get("defaultAlignType");if(c(l)){l=g.JSON.looseParse(l)}k.set("title",l);if(i){k.set("alignType",i)}},render:function(){this._init();return this}});e.exports=f});define("bui/grid",["bui/common","jquery","bui/list","bui/data","bui/mask","bui/toolbar","bui/menu"],function(c,b,d){var e=c("bui/common"),a=e.namespace("Grid");e.mix(a,{SimpleGrid:c("bui/grid/simplegrid"),Grid:c("bui/grid/grid"),Column:c("bui/grid/column"),Header:c("bui/grid/header"),Format:c("bui/grid/format"),Plugins:c("bui/grid/plugins/base")});d.exports=a});define("bui/grid/simplegrid",["jquery","bui/common","bui/list","bui/data"],function(d,f,a){var g=d("jquery"),l=d("bui/common"),p=d("bui/list"),o=l.Component,c=o.UIBase,h=l.prefix,b=h+"grid",k=b+"-row",j=h+"grid-row-odd",i=h+"grid-row-even",n=h+"grid-border",q=h+"grid-row-first";var e=p.SimpleListView.extend({setColumns:function(t){var r=this,s=r.get("headerRowEl");t=t||r.get("columns");s.empty();l.each(t,function(u){r._createColumn(u,s)})},_createColumn:function(t,s){var r=this,u=l.substitute(r.get("columnTpl"),t);g(u).appendTo(s)},getItemTpl:function(t,v){var r=this,x=r.get("columns"),y=r.get("rowTpl"),s=v%2===0?j:i,w=[],u;l.each(x,function(A){var z=A["dataIndex"];w.push(r._getCellTpl(A,z,t))});y=l.substitute(y,{cellsTpl:w.join(""),oddCls:s});return y},_getCellTpl:function(u,t,s){var r=this,v=u.renderer,x=v?v(s[t],s):s[t],w=r.get("cellTpl");return l.substitute(w,{elCls:u.elCls,text:x})},clearData:function(){var s=this,r=s.get("itemContainer");r.empty()},showData:function(s){var r=this;l.each(s,function(t,u){r._createRow(t,u)})},_uiSetInnerBorder:function(s){var r=this,t=r.get("el");if(s){t.addClass(n)}else{t.removeClass(n)}},_uiSetTableCls:function(t){var r=this,s=r.get("el").find("table");s.attr("class",t)}},{ATTRS:{headerRowEl:{valueFn:function(){var r=this,s=r.get("el").find("thead");return s.children("tr")}},itemContainer:{valueFn:function(){return this.get("el").find("tbody")}},tableCls:{}}},{xclass:"simple-grid-veiw"});var m=l.List.SimpleList.extend({renderUI:function(){this.get("view").setColumns()},bindUI:function(){var r=this,u=r.get("itemCls"),s=u+"-hover",t=r.get("el");t.delegate("."+u,"mouseover",function(w){var v=g(w.currentTarget);v.addClass(s)}).delegate("."+u,"mouseout",function(w){var v=g(w.currentTarget);v.removeClass(s)})},showData:function(r){this.clearData();this.set("items",r)},clearData:function(){this.get("view").clearData()},_uiSetColumns:function(s){var r=this;r.clearData();r.get("view").setColumns(s)}},{ATTRS:{itemCls:{view:true,value:k},tableCls:{view:true,value:b+"-table"},columns:{view:true,sync:false,value:[]},tpl:{view:true,value:'<table cellspacing="0" class="{tableCls}" cellpadding="0"><thead><tr></tr></thead><tbody></tbody></table>'},innerBorder:{view:true,value:true},rowTpl:{view:true,value:'<tr class="'+k+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:true,value:'<td class="'+b+'-cell {elCls}"><div class="'+b+'-cell-inner"><span class="'+b+'-cell-text">{text}</span></div></td>'},columnTpl:{view:true,value:'<th class="'+b+'-hd {elCls}" width="{width}"><div class="'+b+'-hd-inner"><span class="'+b+'-hd-title">{title}</span></div></th>'},events:{value:{}},xview:{value:e}}},{xclass:"simple-grid"});m.View=e;a.exports=m});define("bui/grid/grid",["jquery","bui/common","bui/mask","bui/toolbar","bui/list","bui/data"],function(b,H,a){var x=b("jquery"),I=b("bui/common"),C=b("bui/mask"),t=I.UA,i=I.Component,n=b("bui/toolbar"),j=b("bui/list"),w=b("bui/grid/header"),h=b("bui/grid/column");function B(O){if(I.isString(O)){return O.indexOf("%")!==-1}return false}var m=I.prefix,K=m+"grid-header-container",z=m+"grid-body",L=m+"grid-width",c=m+"grid-height",l=m+"grid-border",v=m+"grid-tbar",g=m+"grid-bbar",D=m+"grid-button-bar",A=m+"grid-strip",y=m+"grid-row",N=m+"grid-row-odd",q=m+"grid-row-even",u=m+"grid-row-first",E=m+"grid-cell",k=m+"grid-cell-inner",s="grid-td-",e=m+"grid-cell-text",M=m+"grid-cell-empty",r="17",p=m+"hidden",J="data-column-field",o=2,f=1;function G(P){var O=this;if(I.isNumber(P)){P-=o}return P}var d=j.SimpleListView.extend({renderUI:function(){var O=this,Q=O.get("el"),P=Q.find("."+z);O.set("bodyEl",P);O._setTableTpl()},getItemTpl:function(S,T){var U=this,Q=U._getColumns(),W=U.get("tbodyEl"),V=U.get("rowTpl"),O=T%2===0?N:q,R=[],P;I.each(Q,function(Y){var X=Y.get("dataIndex");R.push(U._getCellTpl(Y,X,S,T))});if(U.get("useEmptyCell")){R.push(U._getEmptyCellTpl())}V=I.substitute(V,{cellsTpl:R.join(""),oddCls:O});return V},findRow:function(P){var O=this;return x(O.findElement(P))},findCell:function(Q,P){var O=s+Q;return P.find("."+O)},resetHeaderRow:function(){if(!this.get("useHeaderRow")){return}var P=this,Q=P.get("headerRowEl"),O=P.get("tbodyEl");if(Q){Q.remove()}Q=P._createHeaderRow();Q.prependTo(O);P.set("headerRowEl",Q)},resetColumnsWidth:function(S,R){var P=this,Q=P.get("headerRowEl"),O=P.findCell(S.get("id"),Q);R=R||S.get("width");if(O){O.width(R)}P.setTableWidth()},setTableWidth:function(V){if(!V&&B(this.get("width"))){this.get("tableEl").width("100%");return}var P=this,U=P._getInnerWidth(),O=P.get("height"),R=P.get("tableEl"),T=P.get("forceFit"),Q=P.get("headerRowEl");if(!B(V)){V=V||P._getColumnsWidth();if(!U){return}if(U>=V){V=U;if(O){var S=(t.ie==6||t.ie==7)?r+2:r;V=U-S}}}R.width(V)},setBodyWidth:function(Q){var O=this,P=O.get("bodyEl");Q=Q||O._getInnerWidth();P.width(Q)},setBodyHeight:function(P){var O=this,Q=O.get("bodyEl"),S=P,R=Q.siblings();I.each(R,function(T){if(x(T).css("display")!=="none"){S-=x(T).outerHeight()}});Q.height(S)},setColumnVisible:function(S){var P=this,R=!S.get("visible"),T=S.get("id"),O=P.get("tbodyEl"),Q=x("."+s+T,O);if(R){Q.hide()}else{Q.show()}},updateItem:function(P){var O=this,Q=O.getItems(),S=I.Array.indexOf(P,Q),U=O._getColumns(),T=null,R;if(S>=0){T=O.findElement(P);I.each(U,function(W){var V=O.findCell(W.get("id"),x(T)),Y=V.find("."+k),X=O._getCellText(W,P,S);Y.html(X)});return T}},showEmptyText:function(){var O=this,P=O.get("bodyEl"),Q=O.get("emptyDataTpl"),R=O.get("emptyEl");if(R){R.remove()}var R=x(Q).appendTo(P);O.set("emptyEl",R)},clearEmptyText:function(){var O=this,P=O.get("emptyEl");if(P){P.remove()}},_createHeaderRow:function(){var P=this,S=P._getColumns(),O=P.get("tbodyEl"),T=P.get("headerRowTpl"),Q,R=[];x.each(S,function(U,V){R.push(P._getHeaderCellTpl(V))});if(P.get("useEmptyCell")){R.push(P._getEmptyCellTpl())}T=I.substitute(T,{cellsTpl:R.join("")});Q=x(T).appendTo(O);return Q},_getColumnsWidth:function(){var P=this,Q=P.get("columns"),O=0;I.each(Q,function(R){if(R.get("visible")){O+=R.get("el").outerWidth()}});return O},_getColumns:function(){return this.get("columns")},_getCellText:function(S,P,Q){var O=this,R=S.get("dataIndex"),T=S.get("cellTpl")||O.get("cellTextTpl"),U=O._getCellInnerText(S,R,P,Q);return I.substitute(T,{text:U,tips:O._getTips(S,R,P)})},_getCellInnerText:function(T,S,P,Q){try{var O=this,U=T.get("renderer"),V=U?U(P[S],P,Q):P[S];return V==null?"":V}catch(R){throw"column:"+T.get("title")+" fomat error!"}},_getCellTpl:function(T,S,P,Q){var O=this,R=O._getCellText(T,P,Q),U=O.get("cellTpl");return I.substitute(U,{elCls:T.get("elCls"),id:T.get("id"),dataIndex:S,cellText:R,hideCls:!T.get("visible")?p:""})},_getEmptyCellTpl:function(){return'<td class="'+E+" "+M+'">&nbsp;</td>'},_getHeaderCellTpl:function(P){var O=this,Q=O.get("headerCellTpl");return I.substitute(Q,{id:P.get("id"),width:P.get("width"),hideCls:!P.get("visible")?p:""})},_getInnerWidth:function(){return G(this.get("width"))},_getTips:function(Q,P,O){var R=Q.get("showTip"),S="";if(R){S=O[P];if(I.isFunction(R)){S=R(S,O)}}return S},_uiSetInnerBorder:function(P){var O=this,Q=O.get("el");if(P){Q.addClass(l)}else{Q.removeClass(l)}},_setTableTpl:function(S){var P=this,R=P.get("bodyEl");S=S||P.get("tableTpl");x(S).appendTo(R);var Q=R.find("table"),O=R.find("tbody");P.set("tableEl",Q);P.set("tbodyEl",O);P.set("itemContainer",O);P._setTableCls(P.get("tableCls"))},_uiSetTableCls:function(O){this._setTableCls(O)},_uiSetHeight:function(Q){var O=this,P=O.get("bodyEl");O.get("el").height(Q);O.get("el").addClass(c)},_uiSetWidth:function(P){var O=this;O.get("el").width(P);O.setBodyWidth(O._getInnerWidth(P));O.get("el").addClass(L)},_uiSetStripeRows:function(P){var O=this,Q=P?"addClass":"removeClass";O.get("el")[Q](A)},_setTableCls:function(Q){var O=this,P=O.get("tableEl");P.attr("class",Q)}},{ATTRS:{tableCls:{},bodyEl:{},tbodyEl:{},headerRowEl:{},tableEl:{},emptyEl:{}}},{xclass:"grid-view"});var F=j.SimpleList.extend({createDom:function(){var O=this,Q=O.get("render"),S=x(Q).width(),P=O.get("width");if(!P&&S){var R=O.getAppendWidth();O.set("width",S-R)}if(O.get("width")){O.get("el").addClass(L)}if(O.get("height")){O.get("el").addClass(c)}if(O.get("innerBorder")){O.get("el").addClass(l)}},renderUI:function(){var O=this;O._initHeader();O._initBars();O._initLoadMask();O.get("view").resetHeaderRow()},bindUI:function(){var O=this;O._bindHeaderEvent();O._bindBodyEvent();O._bindItemsEvent()},addColumn:function(Q,P){var O=this,R=O.get("header");if(R){Q=R.addColumn(Q,P)}else{Q=new h(Q);O.get("columns").splice(P,0,Q)}return Q},clearData:function(){this.clearItems()},getRecords:function(){return this.getItems()},findColumn:function(Q){var O=this,P=O.get("header");if(I.isNumber(Q)){return P.getColumnByIndex(Q)}else{return P.getColumnById(Q)}},findColumnByField:function(P){var O=this,Q=O.get("header");return Q.getColumn(function(R){return R.get("dataIndex")===P})},findCell:function(R,P){var O=this,Q=null;if(P instanceof x){Q=P}else{Q=O.findRow(P)}if(Q){return O.get("view").findCell(R,Q)}return null},findRow:function(P){var O=this;return O.get("view").findRow(P)},removeColumn:function(P){var O=this;O.get("header").removeColumn(P)},showData:function(P){var O=this;O.set("items",P)},resetColumns:function(){var O=this,P=O.get("store");O.get("view").resetHeaderRow();if(P){O.onLoad()}},_bindScrollEvent:function(){var O=this,Q=O.get("el"),P=Q.find("."+z),R=O.get("header");P.on("scroll",function(){var T=P.scrollLeft(),S=P.scrollTop();R.scrollTo({left:T,top:S});O.fire("scroll",{scrollLeft:T,scrollTop:S,bodyWidth:P.width(),bodyHeight:P.height()})})},_bindHeaderEvent:function(){var O=this,R=O.get("header"),P=O.get("view"),Q=O.get("store");R.on("afterWidthChange",function(T){var S=T.target;if(S!==R){P.resetColumnsWidth(S)}});R.on("afterSortStateChange",function(T){var S=T.target,U=T.newVal;if(U&&Q){Q.sort(S.get("dataIndex"),S.get("sortState"))}});R.on("afterVisibleChange",function(T){var S=T.target;if(S!==R){P.setColumnVisible(S);O.fire("columnvisiblechange",{column:S})}});R.on("click",function(T){var S=T.target;if(S!==R){O.fire("columnclick",{column:S,domTarget:T.domTarget})}});R.on("forceFitWidth",function(){if(O.get("rendered")){O.resetColumns()}});R.on("add",function(S){if(O.get("rendered")){O.fire("columnadd",{column:S.column,index:S.index});O.resetColumns()}});R.on("remove",function(S){if(O.get("rendered")){O.resetColumns();O.fire("columnremoved",{column:S.column,index:S.index})}})},_bindBodyEvent:function(){var O=this;O._bindScrollEvent()},_bindItemsEvent:function(){var O=this,Q=O.get("store");O.on("itemsshow",function(){O.fire("aftershow")});O.on("itemsclear",function(){O.fire("clear")});O.on("itemclick",function(U){var V=U.domTarget,S=U.item,R=x(V).closest("."+E),T=x(V).closest("."+y),W;if(R.length){W=O.fire("cellclick",{record:S,row:T[0],cell:R[0],field:R.attr(J),domTarget:V,domEvent:U.domEvent})}if(W===false){return W}return O.fire("rowclick",{record:S,row:T[0],domTarget:V})});O.on("itemunselected",function(R){O.fire("rowunselected",P(R))});O.on("itemselected",function(R){O.fire("rowselected",P(R))});O.on("itemrendered",function(R){O.fire("rowcreated",P(R))});O.on("itemremoved",function(R){O.fire("rowremoved",P(R))});O.on("itemupdated",function(R){O.fire("rowupdated",P(R))});function P(R){return{record:R.item,row:R.domTarget,domTarget:R.domTarget}}},_getInnerWidth:function(O){O=O||this.get("width");return G(O)},_initHeader:function(){var O=this,Q=O.get("header"),P=O.get("el").find("."+K);if(!Q){Q=new w({columns:O.get("columns"),tableCls:O.get("tableCls"),forceFit:O.get("forceFit"),width:O._getInnerWidth(),render:P,parent:O}).render();O.set("header",Q)}},_initBars:function(){var O=this,P=O.get("bbar"),Q=O.get("tbar");O._initBar(P,g,"bbar");O._initBar(Q,v,"tbar")},_initBar:function(S,P,R){var O=this,Q=null,U=null;if(S){if(!S.xclass&&!(S instanceof i.Controller)){S.xclass="bar";S.children=S.children||[];if(S.items){S.children.push({xclass:"bar",defaultChildClass:"bar-item-button",elCls:D,children:S.items});S.items=null}if(S.pagingBar){Q=O.get("store");U={xclass:"pagingbar",store:Q,pageSize:Q.pageSize};if(S.pagingBar!==true){U=I.merge(U,S.pagingBar)}S.children.push(U)}}if(S.xclass){var T=O.get("el").find("."+P);T.show();S.render=T;S.elTagName="div";S.autoRender=true;S=O.addChild(S)}O.set(R,S)}return S},_initLoadMask:function(){var O=this,P=O.get("loadMask");if(P&&!P.show){P=new I.Mask.LoadMask({el:O.get("el")});O.set("loadMask",P)}},_uiSetWidth:function(P){var O=this;if(O.get("rendered")){if(!B(P)){O.get("header").set("width",O._getInnerWidth(P))}else{O.get("header").set("width","100%")}}O.get("view").setTableWidth()},_uiSetForceFit:function(P){var O=this;O.get("header").set("forceFit",P)},_uiSetHeight:function(P,Q){var O=this,R=O.get("header");O.get("view").setBodyHeight(P);if(O.get("rendered")){if(O.get("forceFit")&&!Q.prevVal){R.forceFitColumns();O.get("view").setTableWidth()}R.setTableWidth()}},onLoad:function(){var O=this,P=O.get("store");F.superclass.onLoad.call(this);if(O.get("emptyDataTpl")){if(P&&P.getCount()==0){O.get("view").showEmptyText()}else{O.get("view").clearEmptyText()}}}},{ATTRS:{header:{},bbar:{},itemCls:{value:y},columns:{view:true,value:[]},forceFit:{sync:false,view:true,value:false},emptyDataTpl:{view:true},headerRowTpl:{view:true,value:'<tr class="'+m+'grid-header-row">{cellsTpl}</tr>'},headerCellTpl:{view:true,value:'<td class="{hideCls} '+s+'{id}" width="{width}" style="height:0"></td>'},rowTpl:{view:true,value:'<tr class="'+y+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:true,value:'<td  class="{elCls} {hideCls} '+E+" "+s+'{id}" data-column-id="{id}" data-column-field = "{dataIndex}" >'+'<div class="'+k+'" >{cellText}</div>'+"</td>"},cellTextTpl:{view:true,value:'<span class="'+e+' " title = "{tips}">{text}</span>'},events:{value:{"aftershow":false,"clear":false,"cellclick":false,"columnclick":false,"rowclick":false,"rowcreated":false,"rowremoved":false,"rowselected":false,"rowunselected":false,"scroll":false}},stripeRows:{view:true,value:true},tbar:{},tableCls:{view:true,sync:false,value:m+"grid-table"},tableTpl:{view:true,value:'<table cellspacing="0" cellpadding="0" >'+"<tbody></tbody>"+"</table>"},tpl:{value:'<div class="'+v+'" style="display:none"></div><div class="'+K+'"></div><div class="'+z+'"></div><div style="display:none" class="'+g+'"></div>'},innerBorder:{sync:false,value:true},useEmptyCell:{view:true,value:true},useHeaderRow:{view:true,value:true},xview:{value:d}}},{xclass:"grid"});F.View=d;a.exports=F});define("bui/grid/header",["jquery","bui/common"],function(c,g,b){var i=c("jquery"),m=c("bui/common"),k=m.prefix,h=m.namespace("Grid"),e=c("bui/grid/column"),a=m.Component.View,f=m.Component.Controller,n=17,l=m.UA;var d=a.extend({getContentElement:function(){return this.get("el").find("tr")},scrollTo:function(q){var o=this,p=o.get("el");if(q.top!==undefined){p.scrollTop(q.top)}if(q.left!==undefined){p.scrollLeft(q.left)}},_uiSetTableCls:function(q){var o=this,p=o.get("el").find("table");p.attr("class",q)}},{ATTRS:{emptyCellEl:{},tableCls:{}}},{xclass:"header-view"});var j=f.extend({addColumn:function(s,q){var p=this,o=q,r=p.get("columns");s=p._createColumn(s);if(q===undefined){q=r.length;o=p.get("children").length-1}r.splice(q,0,s);p.addChild(s,o);p.fire("add",{column:s,index:q});return s},removeColumn:function(r){var o=this,q=o.get("columns"),p;r=m.isNumber(r)?q[r]:r;p=m.Array.indexOf(r,q);q.splice(p,1);o.fire("remove",{column:r,index:p});return o.removeChild(r,true)},bindUI:function(){var o=this;o._bindColumnsEvent()},initializer:function(){var o=this,r=o.get("children"),q=o.get("columns"),p;i.each(q,function(s,u){var t=o._createColumn(u);r[s]=t;q[s]=t});p=o._createEmptyColumn();r.push(p);o.set("emptyColumn",p)},getColumns:function(){return this.get("columns")},getColumnsWidth:function(){var p=this,q=p.getColumns(),o=0;i.each(q,function(r,s){if(s.get("visible")){o+=s.get("el").outerWidth()}});return o},getColumnOriginWidth:function(){var p=this,q=p.getColumns(),o=0;i.each(q,function(r,t){if(t.get("visible")){var s=t.get("originWidth")||t.get("width");o+=s}});return o},getColumnByIndex:function(q){var p=this,r=p.getColumns(),o=r[q];return o},getColumn:function(r){var p=this,q=p.getColumns(),o=null;i.each(q,function(s,t){if(r(t)){o=t;return false}});return o},getColumnById:function(p){var o=this;return o.getColumn(function(q){return q.get("id")===p})},getColumnIndex:function(q){var o=this,p=o.getColumns();return m.Array.indexOf(q,p)},scrollTo:function(o){this.get("view").scrollTo(o)},_bindColumnsEvent:function(){var o=this;o.on("afterWidthChange",function(q){var p=q.target;if(p!==o){o.setTableWidth()}});o.on("afterVisibleChange",function(q){var p=q.target;if(p!==o){o.setTableWidth()}});o.on("afterSortStateChange",function(r){var q=r.target,p=o.getColumns(),s=r.newVal;if(s){i.each(p,function(t,u){if(u!==q){u.set("sortState","")}})}});o.on("add",function(){o.setTableWidth()});o.on("remove",function(){o.setTableWidth()})},_createColumn:function(o){if(o instanceof e){return o}if(!o.id){o.id=m.guid("col")}return new e(o)},_createEmptyColumn:function(){return new e.Empty()},_isAllowScrollLeft:function(){var o=this,p=o.get("parent");return p&&!!p.get("height")},forceFitColumns:function(){var y=this,s=y.getColumns(),o=y.get("width"),v=o,p=y.getColumnOriginWidth(),z=0,r=0,u=null,q=y._isAllowScrollLeft();function x(D,C){var B=D.get("el");D.set("width",C,{silent:1});B.width(C)}if(o){if(q){o-=n;v=o}var A=0;i.each(s,function(B,D){if(D.get("visible")&&D.get("resizable")){A++}if(D.get("visible")&&!D.get("resizable")){var C=D.get("el").outerWidth();v-=C;p-=C}});var t=Math.floor(v/A),w=v/p;if(w===1){return}i.each(s,function(D,E){if(E.get("visible")&&E.get("resizable")){var C=y._getColumnBorderWith(E,D),B=E.get("originWidth");if(!B){E.set("originWidth",E.get("width"));B=E.get("width")}t=Math.floor((B+C)*w);x(E,t-C);z+=t;u=E}});if(u){r=v-z;x(u,u.get("width")+r)}y.fire("forceFitWidth")}},_getColumnBorderWith:function(r,q){var p=r.get("el"),o=Math.round(parseFloat(p.css("border-left-width"))||0)+Math.round(parseFloat(p.css("border-right-width"))||0);o=l.ie&&l.ie<8?(q===0?1:o):o;return o},setTableWidth:function(){var p=this,r=p.get("width"),o=0,q=null;if(r=="auto"){return}if(p.get("forceFit")){p.forceFitColumns()}else{if(p._isAllowScrollLeft()){o=p.getColumnsWidth();q=p.get("emptyColumn");if(r<o){q.get("el").width(n)}else{q.get("el").width("auto")}}}},_uiSetWidth:function(){var o=this;o.setTableWidth()},_uiSetForceFit:function(p){var o=this;if(p){o.setTableWidth()}}},{ATTRS:{columns:{value:[]},emptyColumn:{},focusable:{value:false},forceFit:{sync:false,view:true,value:false},tpl:{view:true,value:'<table cellspacing="0" class="'+k+'grid-table" cellpadding="0">'+"<thead><tr></tr></thead>"+"</table>"},tableCls:{view:true},xview:{value:d},events:{value:{"add":false,"remove":false}}}},{xclass:"grid-header",priority:1});b.exports=j});define("bui/grid/column",["jquery","bui/common"],function(e,h,b){var j=e("jquery"),l=e("bui/common"),k=l.prefix,a=k+"grid-hd-title",m=k+"grid-hd-open",o="sort-",i="ASC",d="DESC",g=k+"grid-hd-menu-trigger",c="grid-hd-menu-trigger";var n=l.Component.View.extend({setTplContent:function(t){var p=this,s=p.get("sortTpl"),q=p.get("triggerTpl"),u=p.get("el"),r;n.superclass.setTplContent.call(p,t);r=u.find("."+a);j(s).insertAfter(r);j(q).insertAfter(r)},_setContent:function(){this.setTplContent()},_uiSetShowMenu:function(s){var p=this,q=p.get("triggerTpl"),t=p.get("el"),r=t.find("."+a);if(s){j(q).insertAfter(r)}else{t.find("."+g).remove()}},_uiSetTitle:function(p){if(!this.get("rendered")){return}this._setContent()},_uiSetDraggable:function(p){if(!this.get("rendered")){return}this._setContent()},_uiSetSortable:function(p){if(!this.get("rendered")){return}this._setContent()},_uiSetTpl:function(p){if(!this.get("rendered")){return}this._setContent()},_uiSetSortState:function(q){var p=this,r=p.get("el"),u=q?"addClass":"removeClass",t=o+"asc",s=o+"desc";r.removeClass(t+" "+s);if(q==="ASC"){r.addClass(t)}else{if(q==="DESC"){r.addClass(s)}}},_uiSetOpen:function(q){var p=this,r=p.get("el");if(q){r.addClass(m)}else{r.removeClass(m)}}},{ATTRS:{sortTpl:{view:true,getter:function(){var p=this,q=p.get("sortable");if(q){return'<span class="'+k+'grid-sort-icon">&nbsp;</span>'}return""}},tpl:{}}});var f=l.Component.Controller.extend({_toggleSortState:function(){var p=this,q=p.get("sortState"),r=q?(q===i?d:i):i;p.set("sortState",r)},performActionInternal:function(r){var p=this,q=j(r.target),s=p.get("prefixCls");if(q.hasClass(s+c)){}else{if(p.get("sortable")){p._toggleSortState()}}},_uiSetWidth:function(p){if(p){this.set("originWidth",p)}}},{ATTRS:{elTagName:{value:"th"},open:{view:true,value:false},dataIndex:{view:true,value:""},draggable:{sync:false,view:true,value:true},editor:{},focusable:{value:false},fixed:{value:false},id:{},renderer:{},resizable:{value:true},sortable:{sync:false,view:true,value:true},sortState:{view:true,value:null},title:{sync:false,view:true,value:"&#160;"},width:{value:100},showMenu:{view:true,value:false},triggerTpl:{view:true,value:'<span class="'+g+'"></span>'},tpl:{sync:false,view:true,value:'<div class="'+k+'grid-hd-inner">'+'<span class="'+a+'">{title}</span>'+"</div>"},cellTpl:{value:""},events:{value:{"afterWidthChange":true,"afterSortStateChange":true,"afterVisibleChange":true,"click":true,"resize":true,"move":true}},xview:{value:n}}},{xclass:"grid-hd",priority:1});f.Empty=f.extend({},{ATTRS:{type:{value:"empty"},sortable:{view:true,value:false},width:{view:true,value:null},tpl:{view:true,value:'<div class="'+k+'grid-hd-inner"></div>'}}},{xclass:"grid-hd-empty",priority:1});b.exports=f});define("bui/grid/format",["jquery"],function(c,b,d){var f=c("jquery");function a(g){if(g<10){return"0"+g}return g}var e={dateRenderer:function(i){if(!i){return""}if(BUI.isString(i)){return i}var g=null;try{g=new Date(i)}catch(h){return""}if(!g||!g.getFullYear){return""}return g.getFullYear()+"-"+a(g.getMonth()+1)+"-"+a(g.getDate())},datetimeRenderer:function(i){if(!i){return""}if(BUI.isString(i)){return i}var g=null;try{g=new Date(i)}catch(h){return""}if(!g||!g.getFullYear){return""}return g.getFullYear()+"-"+a(g.getMonth()+1)+"-"+a(g.getDate())+" "+a(g.getHours())+":"+a(g.getMinutes())+":"+a(g.getSeconds())},cutTextRenderer:function(g){return function(h){h=h||"";if(h.toString().length>g){return h.toString().substring(0,g)+"..."}return h}},enumRenderer:function(g){return function(h){return g[h]||""}},multipleItemsRenderer:function(h){var g=e.enumRenderer(h);return function(j){var i=[];if(!j){return""}if(!BUI.isArray(j)){j=j.toString().split(",")}f.each(j,function(k,l){i.push(g(l))});return i.join(",")}},moneyCentRenderer:function(g){if(BUI.isString(g)){g=parseFloat(g)}if(f.isNumberic(g)){return(g*0.01).toFixed(2)}return g}};d.exports=e});define("bui/grid/plugins/base",["bui/common","jquery","bui/menu"],function(b,a,c){var e=b("bui/common"),d=b("bui/grid/plugins/selection"),f={};e.mix(f,{CheckSelection:d.CheckSelection,RadioSelection:d.RadioSelection,Cascade:b("bui/grid/plugins/cascade"),CellEditing:b("bui/grid/plugins/cellediting"),RowEditing:b("bui/grid/plugins/rowediting"),DialogEditing:b("bui/grid/plugins/dialog"),AutoFit:b("bui/grid/plugins/autofit"),GridMenu:b("bui/grid/plugins/gridmenu"),Summary:b("bui/grid/plugins/summary"),RowNumber:b("bui/grid/plugins/rownumber"),ColumnGroup:b("bui/grid/plugins/columngroup"),RowGroup:b("bui/grid/plugins/rowgroup"),ColumnResize:b("bui/grid/plugins/columnresize"),ColumnChecked:b("bui/grid/plugins/columnchecked")});c.exports=f});define("bui/grid/plugins/selection",["jquery","bui/common"],function(c,e,a){var f=c("jquery"),i=c("bui/common"),g=i.prefix,d=g+"grid-checkBox",h="x-grid-checkbox",b=g+"grid-radio";function k(m){k.superclass.constructor.call(this,m)}i.extend(k,i.Base);k.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+d+'-container"><span class="'+h+'"></span></div>'}};i.augment(k,{createDom:function(o){var m=this;var n={title:"",width:m.get("width"),fixed:true,resizable:false,sortable:false,tpl:'<div class="'+g+'grid-hd-inner">'+m.get("cellInner")+"",cellTpl:m.get("cellInner")},p=o.addColumn(n,0);o.set("multipleSelect",true);m.set("column",p)},bindUI:function(q){var m=this,p=m.get("column"),n=p.get("el"),o=n.find("."+h);o.on("click",function(){var r=n.hasClass("checked");if(!r){q.setAllSelection();n.addClass("checked")}else{q.clearSelection();n.removeClass("checked")}});q.on("rowunselected",function(r){n.removeClass("checked")});q.on("clear",function(){n.removeClass("checked")})}});var j=function(m){j.superclass.constructor.call(this,m)};i.extend(j,i.Base);j.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+g+'grid-radio-container"><input  class="'+b+'" type="radio"></div>'}};i.augment(j,{createDom:function(o){var m=this;var n={title:"",width:m.get("width"),resizable:false,fixed:true,sortable:false,cellTpl:m.get("cellInner")},p=o.addColumn(n,0);o.set("multipleSelect",false);m.set("column",p)},bindUI:function(n){var m=this;n.on("rowselected",function(o){m._setRowChecked(o.row,true)});n.on("rowunselected",function(o){m._setRowChecked(o.row,false)})},_setRowChecked:function(p,o){var n=f(p),m=n.find("."+b);m.attr("checked",o)}});var l={CheckSelection:k,RadioSelection:j};a.exports=l});define("bui/grid/plugins/cascade",["jquery","bui/common"],function(c,e,b){var g=c("jquery"),l=c("bui/common"),j=l.prefix,f="",h="data-record",i=j+"grid-cascade",n=i+"-expand",d=i+"-row",m=i+"-cell",a=i+"-collapse";var k=function(o){k.superclass.constructor.call(this,o)};l.extend(k,l.Base);k.ATTRS={width:{value:40},cellInner:{value:'<span class="'+i+'"><i class="'+i+'-icon"></i></span>'},rowTpl:{value:'<tr class="'+d+'"><td class="'+m+'"></td></tr>'},renderer:{},events:["expand","collapse","removed"]};l.augment(k,{initializer:function(q){var o=this;var p={title:"",elCls:"center",width:o.get("width"),resizable:false,fixed:true,sortable:false,cellTpl:o.get("cellInner")},r=q.addColumn(p,0);q.set("innerBorder",false);o.set("grid",q)},bindUI:function(p){var o=this;p.on("cellclick",function(r){var q=g(r.domTarget),s=q.closest("."+i);if(s.length){if(!s.hasClass(n)){o._onExpand(r.record,r.row,s)}else{o._onCollapse(r.record,r.row,s)}}});p.on("columnvisiblechange",function(){o._resetColspan()});p.on("rowremoved",function(q){o.remove(q.record)});p.on("clear",function(){o.removeAll()})},expandAll:function(){var o=this,q=o.get("grid"),p=q.getRecords();g.each(p,function(s,r){o.expand(r)})},expand:function(p){var o=this,q=o.get("grid");var r=q.findRow(p);if(r){o._onExpand(p,r)}},collapse:function(p){var o=this,q=o.get("grid");var r=q.findRow(p);if(r){o._onCollapse(p,r)}},removeAll:function(){var o=this,p=o._getAllCascadeRows();p.each(function(q,r){o._removeCascadeRow(r)})},remove:function(p){var o=this,q=o._findCascadeRow(p);if(q){o._removeCascadeRow(q)}},collapseAll:function(){var o=this,q=o.get("grid"),p=q.getRecords();g.each(p,function(s,r){o.collapse(r)})},_getRowRecord:function(o){return g(o).data(h)},_removeCascadeRow:function(o){this.fire("removed",{record:g(o).data(h),row:o});g(o).remove()},_findCascadeRow:function(q){var p=this,r=p._getAllCascadeRows(),o=null;g.each(r,function(s,t){if(p._getRowRecord(t)===q){o=t;return false}});return o},_getAllCascadeRows:function(){var o=this,p=o.get("grid");return p.get("el").find("."+d)},_getCascadeRow:function(p){var o=g(p).next();if((o).hasClass(d)){return o}return null},_getRowContent:function(p){var o=this,r=o.get("renderer"),q=r?r(p):"";return q},_createCascadeRow:function(p,t){var o=this,s=o.get("rowTpl"),r=o._getRowContent(p),q=g(s).insertAfter(t);q.find("."+m).append(g(r));q.data(h,p);return q},_onExpand:function(p,s,r){var o=this,q=o._getCascadeRow(s),t=o._getColumnCount(s);r=r||g(s).find("."+i);r.addClass(n);if(!q||!q.length){q=o._createCascadeRow(p,s)}g(q).removeClass(a);o._setColSpan(q,s);o.fire("expand",{record:p,row:q[0]})},_onCollapse:function(p,s,r){var o=this,q=o._getCascadeRow(s);r=r||g(s).find("."+i);r.removeClass(n);if(q&&q.length){g(q).addClass(a);o.fire("collapse",{record:p,row:q[0]})}},_getColumnCount:function(o){return g(o).children().filter(function(){return g(this).css("display")!=="none"}).length},_setColSpan:function(p,q){q=q||g(p).prev();var o=this,r=o._getColumnCount(q);g(p).find("."+m).attr("colspan",r)},_resetColspan:function(){var o=this,p=o._getAllCascadeRows();g.each(p,function(q,r){o._setColSpan(r)})},destructor:function(){var o=this;o.removeAll();o.off();o.clearAttrVals()}});b.exports=k});define("bui/grid/plugins/cellediting",["jquery"],function(e,d,f){var g=e("jquery"),h=e("bui/grid/plugins/editing"),b=BUI.prefix+"grid-body",a=BUI.prefix+"grid-cell";var c=function(i){c.superclass.constructor.call(this,i)};c.ATTRS={triggerCls:{value:a}};BUI.extend(c,h);BUI.augment(c,{getEditorCfgs:function(j){var i=this,k=i.get("grid"),l=k.get("el").find("."+b),m=[];BUI.each(j,function(o){var n={field:o,changeSourceEvent:null,hideExceptNode:l,autoUpdate:false,preventHide:false,editableFn:o.editableFn};if(o.xtype==="checkbox"){n.innerValueField="checked"}m.push(n)});return m},getEditor:function(l){if(!l){return null}var i=this,k=i.get("editors"),j=null;BUI.each(k,function(m){if(m.get("field").get("name")===l){j=m;return false}});return j},beforeShowEditor:function(l,k){var j=this,i=g(k.cell);j.resetWidth(l,i.outerWidth());j._makeEnable(l,k)},_makeEnable:function(l,k){var n=l.get("editableFn"),m,j,i;if(BUI.isFunction(n)){m=k.field;i=k.record;if(i&&m){j=n(i[m],i);if(j){l.get("field").enable()}else{l.get("field").disable()}}}},resetWidth:function(j,i){j.set("width",i)},updateRecord:function(k,j,l){var i=this,n=l.getValue(),o=l.get("field").get("name"),m=j[o];n=BUI.isDate(n)?n.getTime():n;if(m!==n){k.setValue(j,o,n)}},getAlignNode:function(i){return g(i.cell)},getFields:function(){var k=[],i=this,j=i.get("editors");BUI.each(j,function(l){k.push(l.get("field"))});return k},getEditValue:function(i){if(i.record&&i.field){var j=i.record[i.field];return j==null?"":j}return""}});f.exports=c});define("bui/grid/plugins/editing",["jquery"],function(b,a,c){var d=b("jquery"),f=BUI.prefix+"grid-cell-inner",g=BUI.prefix+"grid-cell-error";function e(h){e.superclass.constructor.call(this,h)}BUI.extend(e,BUI.Base);e.ATTRS={align:{value:{points:["cl","cl"]}},showError:{value:true},errorTpl:{value:'<span class="x-icon '+g+' x-icon-mini x-icon-error" title="{error}">!</span>'},isInitEditors:{value:false},record:{},curEditor:{},hasValid:{},editors:{shared:false,value:[]},triggerCls:{},triggerSelected:{value:true}};BUI.augment(e,{initializer:function(i){var h=this;h.set("grid",i);h.initEditing(i)},renderUI:function(){var h=this,i=h.get("grid");b.async("bui/editor",function(j){h.initEditors(j);h._initGridEvent(i);h.set("isInitEditors",true);h.fire("editorready")})},initEditing:function(h){},_getCurEditor:function(){return this.get("curEditor")},_initGridEvent:function(i){var h=this,k=i.get("header");i.on("cellclick",function(n){var m=null,o=n.domTarget,p=h.get("triggerCls"),l=h._getCurEditor();if(l&&l.get("acceptEvent")){l.accept();l.hide()}else{l&&l.cancel()}m=h.getEditor(n.field);if(m&&d(o).closest("."+p).length){h.showEditor(m,n);if(!h.get("triggerSelected")){return false}}});i.on("rowcreated",function(l){j(l.record,l.row)});i.on("rowremoved",function(l){if(h.get("record")==l.record){h.cancel()}});i.on("rowupdated",function(l){j(l.record,l.row)});i.on("scroll",function(n){var l=h._getCurEditor();if(l){var p=l.get("align"),m=p.node,o=m.position();if(o.top<0||o.top>n.bodyHeight){l.hide()}else{l.set("align",p);l.show()}}});k.on("afterVisibleChange",function(m){if(m.target&&m.target!=k){var l=m.target;h.onColumnVisibleChange(l)}});function j(l,m){if(h.get("hasValid")){h.validRecord(l,h.getFields(),d(m))}}},initEditors:function(k){var i=this,m=i.get("grid"),h=[],l=m.get("columns");BUI.each(l,function(n){var o=i.getFieldConfig(n);if(o){o.name=n.get("dataIndex");o.colId=n.get("id");if(o.validator){o.validator=i.wrapValidator(o.validator)}h.push(o)}});var j=i.getEditorCfgs(h);BUI.each(j,function(n){i.initEidtor(n,k)})},getFieldConfig:function(h){return h.get("editor")},wrapValidator:function(i){var h=this;return function(k){var j=h.get("record");return i(k,j)}},onColumnVisibleChange:function(h){},getEditorCfgs:function(h){},getEditorConstructor:function(h){return h.Editor},initEidtor:function(j,k){var h=this,i=h.getEditorConstructor(k),l=new i(j);l.render();h.get("editors").push(l);h.bindEidtor(l);return l},bindEidtor:function(k){var h=this,j=h.get("grid"),i=j.get("store");k.on("accept",function(){var l=h.get("record");h.updateRecord(i,l,k);h.fire("accept",{editor:k,record:l});h.set("curEditor",null)});k.on("cancel",function(){h.fire("cancel",{editor:k,record:h.get("record")});h.set("curEditor",null)})},getEditor:function(h){},getAlignNode:function(h){},getEditValue:function(h){},showEditor:function(k,j){var h=this,l=h.getEditValue(j),i=h.getAlignNode(j);h.beforeShowEditor(k,j);h.set("record",j.record);h.fire("beforeeditorshow",{editor:k,record:j.record});k.setValue(l);if(i){var m=h.get("align");m.node=i;k.set("align",m)}k.show();h.focusEditor(k,j.field);h.set("curEditor",k);h.fire("editorshow",{editor:k,record:j.record})},focusEditor:function(h,i){h.focus()},beforeShowEditor:function(i,h){},_createEditOptions:function(i,n){var h=this,l=h.get("grid"),k=l.findRow(i),m=l.findColumnByField(n),j=l.findCell(m.get("id"),k);return{record:i,field:n,cell:j[0],row:k[0]}},valid:function(){var h=this,k=h.get("grid"),j=k.get("store");if(j){var i=j.getResult();BUI.each(i,function(l){h.validRecord(l,h.getFields())})}h.set("hasValid",true)},isValid:function(){var h=this,i=h.get("grid");if(!h.get("hasValid")){h.valid()}return !i.get("el").find("."+g).length},clearErrors:function(){var h=this,i=h.get("grid");i.get("el").find("."+g).remove()},getFields:function(h){},validRecord:function(j,i,k){var h=this,l=[];h.setInternal("record",j);i=i||h.getFields();BUI.each(i,function(p){var n=p.get("name"),o=j[n]||"",m=p.getValidError(o);if(m){l.push({name:n,error:m,id:p.get("colId")})}});h.showRecordError(j,l,k)},showRecordError:function(i,l,k){var h=this,j=h.get("grid");k=k||j.findRow(i);if(k){h._clearRowError(k);BUI.each(l,function(n){var m=j.findCell(n.id,k);h._showCellError(m,n.error)})}},updateRecord:function(i,h,j){},_clearRowError:function(h){h.find("."+g).remove()},_showCellError:function(j,k){var i=this,h=BUI.substitute(i.get("errorTpl"),{error:k}),l=j.find("."+f);d(h).appendTo(l)},edit:function(i,l){var h=this,j=h._createEditOptions(i,l),k=h.getEditor(l);h.showEditor(k,j)},cancel:function(){var h=this,i=h.get("editors");BUI.each(i,function(j){if(j.get("visible")){j.cancel()}});h.set("curEditor",null);h.set("record",null)},destructor:function(){var h=this,i=h.get("editors");BUI.each(i,function(j){j.destroy&&j.destroy()});h.off();h.clearAttrVals()}});c.exports=e});define("bui/grid/plugins/rowediting",["jquery","bui/common"],function(c,a,d){var e=c("jquery"),g=c("bui/common"),f=c("bui/grid/plugins/editing"),b=g.prefix+"grid-row";var h=function(i){h.superclass.constructor.call(this,i)};h.ATTRS={autoSave:{value:false},align:{value:{points:["tl","tl"],offset:[-2,0]}},triggerCls:{value:b},editor:{}};g.extend(h,f);g.augment(h,{getEditorCfgs:function(j){var i=this,l=i.get("editor"),m=[],k=g.mix(true,{changeSourceEvent:null,autoUpdate:false,form:{children:j,buttonBar:{elCls:"centered toolbar"}}},l);m.push(k);return m},wrapValidator:function(j){var i=this;return function(n){var m=i.get("curEditor"),l=i.get("record"),k=m?m.getValue():l;if(k){return j(n,k,l)}}},focusEditor:function(i,l){var j=i.get("form"),k=j.getField(l);if(k){k.focus()}},getFieldConfig:function(k){var j=k.get("editor");if(j){if(j.xtype==="checkbox"){j.innerValueField="checked"}return j}var i={xtype:"plain"};if(k.get("dataIndex")&&k.get("renderer")){i.renderer=k.get("renderer")}return i},updateRecord:function(k,j,l){var i=this,m=l.getValue();g.each(m,function(o,n){if(g.isDate(o)){m[n]=o.getTime()}});g.mix(j,m);k.update(j);if(i.get("autoSave")){k.save(j)}},getEditor:function(k){var i=this,j=i.get("editors");return j[0]},onColumnVisibleChange:function(k){var i=this,m=k.get("id"),j=i.getEditor(),l=j.getChild(m,true);if(l){l.set("visible",k.get("visible"))}},beforeShowEditor:function(m,j){var i=this,l=i.get("grid"),k=l.get("columns"),n=m.get("form"),o=e(j.row);m.set("width",o.width());g.each(k,function(q){var s=q.get("dataIndex"),r=n.getField(s);if(!q.get("visible")){r&&r.set("visible",false)}else{var p=q.get("el").outerWidth()-r.getAppendWidth();r.set("width",p)}})},getEditValue:function(i){return i.record},getEditorConstructor:function(i){return i.RecordEditor},getAlignNode:function(i){return e(i.row)},getFields:function(){var i=this,j=i.get("editors");return j[0].get("form").get("children")}});d.exports=h});define("bui/grid/plugins/dialog",["jquery","bui/common"],function(d,c,e){var f=d("jquery"),g=d("bui/common"),b="add",h="edit";function a(i){a.superclass.constructor.call(this,i)}a.ATTRS={autoSave:{value:false},record:{},curIndex:{},contentId:{},editor:{},form:{},events:{value:{recordchange:false}},editType:{}};g.extend(a,g.Base);g.augment(a,{initializer:function(j){var i=this;i.set("grid",j);d.async("bui/editor",function(k){i._initEditor(k);i.fire("editorready")})},bindUI:function(j){var i=this,k=i.get("triggerCls");if(k){j.on("cellclick",function(n){var l=f(n.domTarget),m=i.get("editor");if(l.hasClass(k)&&m){i.edit(n.record);if(j.get("multipleSelect")){return false}}})}},_initEditor:function(k){var i=this,n=i.get("contentId"),m=f("#"+n).find("form"),l=i.get("editor"),j=g.merge(l,{contentId:n,form:{srcNode:m}});l=new k.DialogEditor(j);i._bindEditor(l);i.set("editor",l);i.set("form",l.get("form"))},_bindEditor:function(j){var i=this;j.on("accept",function(){var l=j.get("form"),k=l.serializeToObject();i.saveRecord(k);i.fire("accept",{editor:j,record:i.get("record"),form:l})});j.on("cancel",function(){i.fire("cancel",{editor:j,record:i.get("record"),form:j.get("form")})})},edit:function(j){var i=this;i.set("editType",h);i.showEditor(j)},add:function(j,k){var i=this;i.set("editType",b);i.set("curIndex",k);i.showEditor(j)},saveRecord:function(k){var j=this,o=j.get("grid"),m=j.get("editType"),n=j.get("curIndex"),l=o.get("store"),i=j.get("record");g.mix(i,k);if(m==b){if(n!=null){l.addAt(i,n)}else{l.add(i)}}else{l.update(i)}if(j.get("autoSave")){l.save(i)}},showEditor:function(j){var i=this,k=i.get("editor");i.set("record",j);k.show();k.setValue(j,true);i.fire("recordchange",{record:j,editType:i.get("editType")});i.fire("editorshow",{eidtor:k,editType:i.get("editType")})},cancel:function(){var i=this,j=i.get("editor");j.cancel()},destructor:function(){var i=this,j=i.get("editor");j&&j.destroy();i.off();i.clearAttrVals()}});e.exports=a});define("bui/grid/plugins/autofit",["jquery","bui/common"],function(c,a,d){var f=c("jquery"),g=c("bui/common"),e=g.UA;var b=function(h){b.superclass.constructor.call(this,h)};g.extend(b,g.Base);b.ATTRS={};g.augment(b,{bindUI:function(i){var h=this,j;f(window).on("resize",function(){function k(){clearTimeout(j);j=setTimeout(function(){h._autoFit(i)},100);h.set("handler",j)}k()})},_autoFit:function(j){var h=this,m=f(j.get("render")),i=f(window).width(),l,n=0,k=j.get("el").parent();while(k[0]&&k[0]!=f("body")[0]){n+=k.outerWidth()-k.width();k=k.parent()}j.set("width",i-n)}});d.exports=b});define("bui/grid/plugins/gridmenu",["jquery","bui/common","bui/menu"],function(d,f,c){var g=d("jquery"),k=d("bui/common"),j=d("bui/menu"),i=k.prefix,b="sort-asc",a="sort-desc",e="column-setting",l="icon-check";var h=function(m){h.superclass.constructor.call(this,m)};k.extend(h,k.Base);h.ATTRS={menu:{},activedColumn:{},triggerCls:{value:i+"grid-hd-menu-trigger"},items:{value:[{id:b,text:"升序",iconCls:"icon-arrow-up"},{id:a,text:"降序",iconCls:"icon-arrow-down"},{xclass:"menu-item-sparator"},{id:e,text:"设置列",iconCls:"icon-list-alt"}]}};k.augment(h,{initializer:function(n){var m=this;m.set("grid",n)},renderUI:function(o){var m=this,n=o.get("columns");k.each(n,function(p){m._addShowMenu(p)})},bindUI:function(n){var m=this;n.on("columnadd",function(o){m._addShowMenu(o.column)});n.on("columnclick",function(q){var o=g(q.domTarget),p=q.column,r;m.set("activedColumn",p);if(o.hasClass(m.get("triggerCls"))){r=m.get("menu")||m._initMenu();r.set("align",{node:o,points:["bl","tl"],offset:[0,0]});r.show();m._afterShow(p,r)}})},_addShowMenu:function(m){if(!m.get("fixed")){m.set("showMenu",true)}},_afterShow:function(o,p){var m=this,n=m.get("grid");p=p||m.get("menu");m._resetSortMenuItems(o,p);m._resetColumnsVisible(p)},_resetColumnsVisible:function(q){var m=this,p=q.findItemById(e),n=p.get("subMenu")||m._initColumnsMenu(p),o=m.get("grid").get("columns");n.removeChildren(true);g.each(o,function(s,u){if(!u.get("fixed")){var r={xclass:"context-menu-item",text:u.get("title"),column:u,iconCls:"icon"},t=n.addChild(r);if(u.get("visible")){t.set("selected",true)}}})},_resetSortMenuItems:function(m,o){var p=o.findItemById(b),n=o.findItemById(a);if(m.get("sortable")){p.set("disabled",false);n.set("disabled",false)}else{p.set("disabled",true);n.set("disabled",true)}},_initMenu:function(){var m=this,o=m.get("menu"),n;if(!o){n=m.get("items");g.each(n,function(p,q){if(!q.xclass){q.xclass="context-menu-item"}});o=new j.ContextMenu({children:n,elCls:"grid-menu"});m._initMenuEvent(o);m.set("menu",o)}return o},_initMenuEvent:function(n){var m=this;n.on("itemclick",function(q){var p=q.item,r=p.get("id"),o=m.get("activedColumn");if(r===b){o.set("sortState","ASC")}else{if(r===a){o.set("sortState","DESC")}}});n.on("afterVisibleChange",function(p){var q=p.newVal,o=m.get("activedColumn");if(q&&o){o.set("open",true)}else{o.set("open",false)}})},_initColumnsMenu:function(n){var m=new j.ContextMenu({multipleSelect:true,elCls:"grid-column-menu"});n.set("subMenu",m);m.on("itemclick",function(r){var q=r.item,p=q.get("column"),o=q.get("selected");if(o){p.set("visible",true)}else{p.set("visible",false)}});return m},destructor:function(){var m=this,n=m.get("menu");if(n){n.destroy()}m.off();m.clearAttrVals()}});c.exports=h});define("bui/grid/plugins/summary",["jquery","bui/common"],function(k,r,a){var g=k("jquery"),o=k("bui/common"),f=o.prefix,d=f+"grid-row",m=f+"grid-body",j=f+"grid-summary-row",l=f+"grid-cell-inner",p="grid-td-",i=f+"grid-cell-text",b=f+"grid-cell";function e(s){if(s>0){return'<td class="'+b+'" colspan="'+s+'">&nbsp;</td>'}return""}function n(s,t){return'<td class="'+b+" "+p+t+'">'+c(s)+"</td>"}function c(s){return'<div class="'+l+'" >'+'<span class="'+i+' ">'+s+"</span>"+"</div>"}function q(){return'<td class="'+b+" "+b+'-empty">&nbsp;</td>'}var h=function(s){h.superclass.constructor.call(this,s)};h.ATTRS={footerTpl:{value:"<tfoot></tfoot>"},footerEl:{},summaryTitle:{value:"查询合计"},pageSummaryTitle:{value:"本页合计"},field:{value:"summary"},pageSummaryField:{value:"pageSummary"},summaryField:{value:"summary"},pageSummary:{},summary:{}};o.extend(h,o.Base);o.augment(h,{initializer:function(t){var s=this;s.set("grid",t)},renderUI:function(w){var s=this,v=w.get("el").find("."+m),u=v.find("table"),t=g(s.get("footerTpl")).appendTo(u);s.set("footerEl",t)},bindUI:function(u){var s=this,t=u.get("store");if(t){t.on("beforeprocessload",function(v){s._processSummary(v.data)});t.on("add",function(){s.resetPageSummary()});t.on("remove",function(){s.resetPageSummary()});t.on("update",function(){s.resetPageSummary()})}u.on("aftershow",function(){s.resetSummary()});u.get("header").on("afterVisibleChange",function(){s.resetSummary()})},_processSummary:function(w){var s=this,t=s.get("footerEl");t.empty();if(!w){return}var u=w[s.get("pageSummaryField")],v=w[s.get("summaryField")];s.set("pageSummary",u);s.set("summary",v)},resetPageSummary:function(){var s=this,v=s.get("grid"),u=v.get("columns"),t=s._calculatePageSummary(),w=s.get("pageEl");s.set("pageSummary",t);if(w){o.each(u,function(y){if(y.get("summary")&&y.get("visible")){var A=y.get("id"),x=w.find("."+p+A),z=s._getSummaryCellText(y,t);x.find("."+i).text(z)}});s._updateFirstRow(w,s.get("pageSummaryTitle"))}},resetSummary:function(u,v){var s=this,t=s.get("footerEl"),w=null;t.empty();u=u||s.get("pageSummary");if(!u){u=s._calculatePageSummary();s.set("pageSummary",u)}v=v||s.get("summary");w=s._creatSummaryRow(u,s.get("pageSummaryTitle"));s.set("pageEl",w);s._creatSummaryRow(v,s.get("summaryTitle"))},_creatSummaryRow:function(w,x){if(!w){return null}var s=this,t=s.get("footerEl"),v=s._getSummaryTpl(w),u=g(v).appendTo(t);s._updateFirstRow(u,x);return u},_updateFirstRow:function(t,w){var s=t.find("td").first(),v=s.find("."+l);if(v.length){var u=w+": ";text=v.text();if(text.indexOf(u)===-1){text=u+text}s.html(c(text))}else{s.html(c(w+": "))}},_getSummaryTpl:function(u){var s=this,w=s.get("grid"),v=w.get("columns"),z=[],t=-1,x=-1,y=null;g.each(v,function(C,B){if(B.get("visible")){x+=1;if(B.get("summary")){z.push(e(x-t-1));var D=s._getSummaryCellText(B,u),A=n(D,B.get("id"));z.push(A);t=x}}});if(t!==x){z.push(e(x-t))}y=['<tr class="',j," ",d,'">',z.join(""),q(),"</tr>"].join("");return y},_getSummaryCellText:function(u,t){var s=this,y=t[u.get("dataIndex")],w=y==null?"":y,v=u.get("renderer"),x=v?v(w,t):w;return x},_calculatePageSummary:function(){var s=this,v=s.get("grid"),t=v.get("store"),u=v.get("columns"),w={};o.each(u,function(y){if(y.get("summary")){var x=y.get("dataIndex");w[x]=t.sum(x)}});return w}});a.exports=h});define("bui/grid/plugins/rownumber",[],function(d,c,e){var b="x-grid-rownumber";function a(f){a.superclass.constructor.call(this,f)}BUI.extend(a,BUI.Base);a.ATTRS={width:{value:40},column:{}};BUI.augment(a,{createDom:function(h){var f=this;var g={title:"",width:f.get("width"),fixed:true,resizable:false,sortable:false,renderer:function(k,l,j){return j+1},elCls:b},i=h.addColumn(g,0);f.set("column",i)}});e.exports=a});define("bui/grid/plugins/columngroup",["jquery","bui/common"],function(c,d,b){var e=c("jquery"),h=c("bui/common"),f=h.prefix,a=f+"grid-hd-title",k=f+"grid-column-group",g=f+"grid-group-header",j=f+"grid-db-hd";var i=function(l){i.superclass.constructor.call(this,l)};i.ATTRS={groups:{value:[]},columnTpl:{value:'<th class="bui-grid-hd center" colspan="{colspan}"><div class="'+f+'grid-hd-inner">'+'<span class="'+a+'">{title}</span>'+"</div></th>"}};h.extend(i,h.Base);h.augment(i,{renderUI:function(l){var u=this,m=u.get("groups"),r=l.get("header"),x=r.get("el"),o=r.get("children"),p=e('<tr class="'+k+'"></tr>').prependTo(x.find("thead"));x.addClass(g);h.each(m,function(C){var z=u._getGroupTpl(C),y=e(z).appendTo(p);C.el=y;for(var A=C.from;A<=C.to;A++){var B=o[A];if(B){B.set("group",C)}}});var t;for(var q=o.length-1;q>=0;q--){var n=o[q],w=n.get("group");if(w){t=w.el}else{var v=n.get("el");v.addClass(j);v.attr("rowspan",2);if(t){v.insertBefore(t)}else{v.appendTo(p)}t=v}}if(m[0].from!==0){var s=o[m[0].from];if(s){s.get("el").css("border-left-width",1)}}},_getGroupTpl:function(m){var l=this,n=l.get("columnTpl"),o=m.to-m.from+1;return h.substitute(n,{colspan:o,title:m.title})}});b.exports=i});define("bui/grid/plugins/rowgroup",["jquery","bui/common"],function(c,e,b){var f=c("jquery"),h=c("bui/common"),l="data-group",g=h.prefix,k=g+"grid-row-group",d=g+"grid-cascade",j=g+"grid-cascade-expand";function a(m,n){return{items:[],value:m,text:n}}var i=function(m){i.superclass.constructor.call(this,m)};i.ATTRS={groups:{shared:false,value:[]},renderer:{}};h.extend(i,h.Base);h.augment(i,{renderUI:function(o){var n=this,m=o.get("el").find("tbody");n.set("grid",o);n.set("tbodyEl",m)},bindUI:function(o){var n=this,m=[];o.on("aftershow",function(){var p=o.getItems(),q=n._getSortColumn();n._clear();if(q){o.get("view").getAllElements().hide();var s=q.get("dataIndex");h.each(p,function(v,t){var u=m[m.length-1],x=q.get("renderer"),w=v[s],z;if(!u||w!=u.value){z=x?x(w,v):w;var y=a(w,z);y.begin=t;m.push(y);u&&n._createGroup(u);u=y}u.items.push(v)});var r=m[m.length-1];r&&n._createGroup(r);n.set("groups",m)}});o.on("clear",function(){n._clear()});n.get("tbodyEl").delegate("."+d,"click",function(q){var p=f(q.currentTarget),r=n._getGroupData(p);if(p.hasClass(j)){n._collapse(r);p.removeClass(j)}else{n._expand(r);p.addClass(j)}})},_getSortColumn:function(){var m=this,o=m.get("grid"),n=o.get("store"),p=n.get("sortField");return o.findColumnByField(p)},_getGroupData:function(n){var m=this,o=n.closest("."+k);return o.data(l)},_createGroup:function(t){var s=this,m=s.get("grid"),v=t.items[0],n=m.findElement(v),q=m.get("columns").length,r=s.get("renderer"),u=r?r(t.text,t):t.text,p='<tr class="'+k+'"><td colspan="'+(q+1)+'"><div class="bui-grid-cell-inner"><span class="bui-grid-cell-text"><span class="bui-grid-cascade"><i class="bui-grid-cascade-icon"></i></span> '+u+"</span></div></td></tr>",o=f(p).insertBefore(n);o.data(l,t)},_getGroupedElements:function(s){var m=this,p=m.get("grid"),r=p.get("view").getAllElements(),q=s.begin,n=s.items.length+q,t=[];for(var o=q;o<n;o++){t.push(r[o])}return f(t)},_expand:function(n){var m=this,o=m._getGroupedElements(n);o.show()},_collapse:function(n){var m=this,o=m._getGroupedElements(n);o.hide()},_clear:function(){var o=this,n=o.get("groups"),m=o.get("tbodyEl");h.Array.empty(n);m.find("."+k).remove()}});b.exports=i});define("bui/grid/plugins/columnresize",["jquery","bui/common"],function(b,c,a){var e=b("jquery"),f=b("bui/common"),g=15,i=30,h="col-resize";var d=function(j){d.superclass.constructor.call(this,j)};d.ATTRS={resizing:{value:false},draging:{}};f.extend(d,f.Base);f.augment(d,{renderUI:function(j){this.set("grid",j)},bindUI:function(k){var j=this,q=k.get("header"),o,l,n;q.get("el").delegate(".bui-grid-hd","mouseenter",function(t){var r=j.get("resizing");if(!r){var s=t.currentTarget;o=j._getColumn(s);l=j._getPreCol(o)}}).delegate(".bui-grid-hd","mouseleave",function(s){var r=j.get("resizing");if(!r&&o){o.get("el").css("cursor","");o=null}}).delegate(".bui-grid-hd","mousemove",function(y){var x=j.get("resizing");if(!x&&o){var t=o.get("el"),w=y.pageX,v=t.offset(),u=v.left,s=t.width();if(w-u<g&&l){t.css("cursor",h);n=-1}else{if((u+s)-w<g){n=1;t.css("cursor",h)}else{o.get("el").css("cursor","")}}}if(x){y.preventDefault();var B=j.get("draging"),r=B.start,w=y.pageX,z=w-r,s=n>0?o.get("width"):l.get("width"),A=s+z;if(A>i&&A<k.get("el").width()){B.end=w;j.moveDrag(w)}}}).delegate(".bui-grid-hd","mousedown",function(s){var r=j.get("resizing");if(!r&&o&&o.get("el").css("cursor")==h){s.preventDefault();j.showDrag(s.pageX);m()}});function p(w){var x=j.get("draging");if(o&&x){var s=n>0?o:l,v=s.get("width"),u=x.end-x.start;j.hideDrag();if(k.get("forceFit")){var r=s.get("originWidth"),t=v/r,y=(v+u)/t;s.set("originWidth",y);s.set("width",y)}else{s.set("width",v+u)}}e(document).off("mouseup",p)}function m(){e(document).on("mouseup",p)}},showDrag:function(m){var p=this,j=p.get("grid"),n=j.get("header"),r=j.get("el").find(".bui-grid-body"),q=n.get("el").height()+r.height(),l=n.get("el").offset(),k=p.get("dragEl");if(!k){var o='<div class="bui-drag-line"></div>';k=e(o).appendTo("body");p.set("dragEl",k)}k.css({top:l.top,left:m,height:q});p.set("resizing",true);p.set("draging",{start:m,end:m});k.show()},hideDrag:function(){var k=this,j=k.get("dragEl");j&&j.hide();k.set("draging",null);k.set("resizing",false)},moveDrag:function(l){var k=this,j=k.get("dragEl");j&&j.css("left",l)},_getColumn:function(l){var j=this,k=j.get("grid").get("columns"),m=null;f.each(k,function(n){if(n.containsElement(l)){m=n;return false}});return m},_getPreCol:function(k){var j=this,l=j.get("grid").get("columns"),m=null;f.each(l,function(o,n){if(o==k){return false}else{if(o.get("visible")){m=o}}});return m}});a.exports=d});define("bui/grid/plugins/columnchecked",["jquery","bui/common"],function(b,a,d){var e=b("jquery"),f=b("bui/common");var c=function(g){c.superclass.constructor.call(this,g)};f.extend(c,f.Base);c.ATTRS={triggerCls:{value:"x-col-checkbox"},uncheckedTpl:{value:'<span class="x-col-checkbox"></span>'},checkedTpl:{value:'<span class="x-col-checkbox x-col-checkbox-checked"></span>'}};f.augment(c,{renderUI:function(k){var h=this,j=k.get("columns"),i=h.get("uncheckedTpl"),g=h.get("checkedTpl");f.each(j,function(l){if(l.get("checkable")){var n=l.get("renderer");var m=function(o,p){var q=n?n(o,p):"";if(o){q=g+q}else{q=i+q}return q};l.set("renderer",m)}})},bindUI:function(i){var g=this,j=g.get("triggerCls"),h=i.get("store");i.on("cellclick",function(m){var l=e(m.domTarget);if(l.hasClass(j)){var k=m.record,o=m.field,n=k[o];h.setValue(k,o,!n);return false}})}});d.exports=c});(function(){if(BUI.loaderScript.getAttribute("data-auto-use")=="false"){return}BUI.use(["bui/common","bui/data","bui/list","bui/picker","bui/menu","bui/toolbar","bui/form","bui/mask","bui/select","bui/tab","bui/calendar","bui/overlay","bui/editor","bui/grid","bui/tooltip"])})();